/*! Built with http://stenciljs.com */
const{h:t}=window.gisviewer,e=".kml,.csv,.zip",n="gis-viewer",i="map-container",r="tool-bar",o="draw-bar-plugin",s="zoom-to-extent-plugin",a="full-screen-plugin",u="measure-plugin",h="search-plugin",l="layer-manager-plugin",c="drop-down-plugin",f="custom-drop-down-plugin",p="custom-settings",d="custom-export",_="mini-map-plugin",g="scale-plugin",m="mouse-coordinate-plugin",v={lat:85,lng:-180},y={lat:-85,lng:180};var b;!function(t){t.kml="kml",t.csv="csv",t.zip="zip"}(b||(b={}));const w=Object.values(b),x={MGRS:"utmref",UTM:"utm",DECIMAL:"gps"},P={HEAT:"heat",CLUSTER:"cluster"},T=.1,C={name:"Online map",address:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"},O={BASE_MAPS:"Base Maps",DRAWABLE_LAYER:"Drawable Layer",INITIAL_LAYERS:"Initial Layers",[b.kml.toUpperCase()+"_Layers"]:b.kml.toUpperCase()+" Layers",[b.csv.toUpperCase()+"_Layers"]:b.csv.toUpperCase()+" Layers",[b.zip.toUpperCase()+"_Layers"]:b.zip.toUpperCase()+" Layers"},S=2,M=20,E={POPUP:"Popup",TOOLTIP:"Tooltip"};var A="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function k(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function I(t,e){return t(e={exports:{}},e.exports),e.exports}var z,B,R=I(function(t,e){(function(){var n,i=200,r="Expected a function",o="__lodash_placeholder__",s=1,a=2,u=4,h=1,l=2,c=1,f=2,p=4,d=8,_=16,g=32,m=64,v=128,y=256,b=512,w=800,L=16,x=1/0,P=9007199254740991,T=1.7976931348623157e308,C=NaN,O=4294967295,S=O-1,M=O>>>1,E=[["ary",v],["bind",c],["bindKey",f],["curry",d],["curryRight",_],["flip",b],["partial",g],["partialRight",m],["rearg",y]],k="[object Arguments]",I="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",R="[object Date]",j="[object DOMException]",D="[object Error]",Z="[object Function]",N="[object GeneratorFunction]",U="[object Map]",W="[object Number]",G="[object Null]",V="[object Object]",F="[object Proxy]",H="[object RegExp]",q="[object Set]",Y="[object String]",$="[object Symbol]",K="[object Undefined]",J="[object WeakMap]",X="[object ArrayBuffer]",Q="[object DataView]",tt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",it="[object Int16Array]",rt="[object Int32Array]",ot="[object Uint8Array]",st="[object Uint8ClampedArray]",at="[object Uint16Array]",ut="[object Uint32Array]",ht=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/&(?:amp|lt|gt|quot|#39);/g,pt=/[&<>"']/g,dt=RegExp(ft.source),_t=RegExp(pt.source),gt=/<%-([\s\S]+?)%>/g,mt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,xt=RegExp(Lt.source),Pt=/^\s+|\s+$/g,Tt=/^\s+/,Ct=/\s+$/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,St=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,At=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,It=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Rt=/^\[object .+?Constructor\]$/,jt=/^0o[0-7]+$/i,Dt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nt=/($^)/,Ut=/['\n\r\u2028\u2029\\]/g,Wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Gt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vt="["+Gt+"]",Ft="["+Wt+"]",Ht="\\d+",qt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Yt="[^\\ud800-\\udfff"+Gt+Ht+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",$t="\\ud83c[\\udffb-\\udfff]",Kt="[^\\ud800-\\udfff]",Jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Qt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",te="(?:"+qt+"|"+Yt+")",ee="(?:"+Qt+"|"+Yt+")",ne="(?:"+Ft+"|"+$t+")?",ie="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[Kt,Jt,Xt].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",re="(?:"+["[\\u2700-\\u27bf]",Jt,Xt].join("|")+")"+ie,oe="(?:"+[Kt+Ft+"?",Ft,Jt,Xt,"[\\ud800-\\udfff]"].join("|")+")",se=RegExp("['’]","g"),ae=RegExp(Ft,"g"),ue=RegExp($t+"(?="+$t+")|"+oe+ie,"g"),he=RegExp([Qt+"?"+qt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Vt,Qt,"$"].join("|")+")",ee+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Vt,Qt+te,"$"].join("|")+")",Qt+"?"+te+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Qt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ht,re].join("|"),"g"),le=RegExp("[\\u200d\\ud800-\\udfff"+Wt+"\\ufe0e\\ufe0f]"),ce=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pe=-1,de={};de[tt]=de[et]=de[nt]=de[it]=de[rt]=de[ot]=de[st]=de[at]=de[ut]=!0,de[k]=de[I]=de[X]=de[B]=de[Q]=de[R]=de[D]=de[Z]=de[U]=de[W]=de[V]=de[H]=de[q]=de[Y]=de[J]=!1;var _e={};_e[k]=_e[I]=_e[X]=_e[Q]=_e[B]=_e[R]=_e[tt]=_e[et]=_e[nt]=_e[it]=_e[rt]=_e[U]=_e[W]=_e[V]=_e[H]=_e[q]=_e[Y]=_e[$]=_e[ot]=_e[st]=_e[at]=_e[ut]=!0,_e[D]=_e[Z]=_e[J]=!1;var ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},me=parseFloat,ve=parseInt,ye="object"==typeof A&&A&&A.Object===Object&&A,be="object"==typeof self&&self&&self.Object===Object&&self,we=ye||be||Function("return this")(),Le=e&&!e.nodeType&&e,xe=Le&&t&&!t.nodeType&&t,Pe=xe&&xe.exports===Le,Te=Pe&&ye.process,Ce=function(){try{return Te&&Te.binding&&Te.binding("util")}catch(t){}}(),Oe=Ce&&Ce.isArrayBuffer,Se=Ce&&Ce.isDate,Me=Ce&&Ce.isMap,Ee=Ce&&Ce.isRegExp,Ae=Ce&&Ce.isSet,ke=Ce&&Ce.isTypedArray;function Ie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ze(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function Be(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function je(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function De(t,e){return!(null==t||!t.length)&&Ye(t,e,0)>-1}function Ze(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ne(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ue(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function We(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Ge(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ve(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Fe=Xe("length");function He(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function qe(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Ye(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):qe(t,Ke,n)}function $e(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Ke(t){return t!=t}function Je(t,e){var n=null==t?0:t.length;return n?en(t,e)/n:C}function Xe(t){return function(e){return null==e?n:e[t]}}function Qe(t){return function(e){return null==t?n:t[e]}}function tn(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function en(t,e){for(var i,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==n&&(i=i===n?s:i+s)}return i}function nn(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function rn(t){return function(e){return t(e)}}function on(t,e){return Ne(e,function(e){return t[e]})}function sn(t,e){return t.has(e)}function an(t,e){for(var n=-1,i=t.length;++n<i&&Ye(e,t[n],0)>-1;);return n}function un(t,e){for(var n=t.length;n--&&Ye(e,t[n],0)>-1;);return n}var hn=Qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ln=Qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cn(t){return"\\"+ge[t]}function fn(t){return le.test(t)}function pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function dn(t,e){return function(n){return t(e(n))}}function _n(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var a=t[n];a!==e&&a!==o||(t[n]=o,s[r++]=n)}return s}function gn(t,e){return"__proto__"==e?n:t[e]}function mn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function vn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function yn(t){return fn(t)?function(t){for(var e=ue.lastIndex=0;ue.test(t);)++e;return e}(t):Fe(t)}function bn(t){return fn(t)?function(t){return t.match(ue)||[]}(t):function(t){return t.split("")}(t)}var wn=Qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ln=function t(e){var A,Wt=(e=null==e?we:Ln.defaults(we.Object(),e,Ln.pick(we,fe))).Array,Gt=e.Date,Vt=e.Error,Ft=e.Function,Ht=e.Math,qt=e.Object,Yt=e.RegExp,$t=e.String,Kt=e.TypeError,Jt=Wt.prototype,Xt=Ft.prototype,Qt=qt.prototype,te=e["__core-js_shared__"],ee=Xt.toString,ne=Qt.hasOwnProperty,ie=0,re=(A=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",oe=Qt.toString,ue=ee.call(qt),le=we._,ge=Yt("^"+ee.call(ne).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=Pe?e.Buffer:n,be=e.Symbol,Le=e.Uint8Array,xe=ye?ye.allocUnsafe:n,Te=dn(qt.getPrototypeOf,qt),Ce=qt.create,Fe=Qt.propertyIsEnumerable,Qe=Jt.splice,xn=be?be.isConcatSpreadable:n,Pn=be?be.iterator:n,Tn=be?be.toStringTag:n,Cn=function(){try{var t=To(qt,"defineProperty");return t({},"",{}),t}catch(t){}}(),On=e.clearTimeout!==we.clearTimeout&&e.clearTimeout,Sn=Gt&&Gt.now!==we.Date.now&&Gt.now,Mn=e.setTimeout!==we.setTimeout&&e.setTimeout,En=Ht.ceil,An=Ht.floor,kn=qt.getOwnPropertySymbols,In=ye?ye.isBuffer:n,zn=e.isFinite,Bn=Jt.join,Rn=dn(qt.keys,qt),jn=Ht.max,Dn=Ht.min,Zn=Gt.now,Nn=e.parseInt,Un=Ht.random,Wn=Jt.reverse,Gn=To(e,"DataView"),Vn=To(e,"Map"),Fn=To(e,"Promise"),Hn=To(e,"Set"),qn=To(e,"WeakMap"),Yn=To(qt,"create"),$n=qn&&new qn,Kn={},Jn=Ko(Gn),Xn=Ko(Vn),Qn=Ko(Fn),ti=Ko(Hn),ei=Ko(qn),ni=be?be.prototype:n,ii=ni?ni.valueOf:n,ri=ni?ni.toString:n;function oi(t){if(pa(t)&&!na(t)&&!(t instanceof hi)){if(t instanceof ui)return t;if(ne.call(t,"__wrapped__"))return Jo(t)}return new ui(t)}var si=function(){function t(){}return function(e){if(!fa(e))return{};if(Ce)return Ce(e);t.prototype=e;var i=new t;return t.prototype=n,i}}();function ai(){}function ui(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function hi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=O,this.__views__=[]}function li(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ci(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function fi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function pi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new fi;++e<n;)this.add(t[e])}function di(t){var e=this.__data__=new ci(t);this.size=e.size}function _i(t,e){var n=na(t),i=!n&&ea(t),r=!n&&!i&&sa(t),o=!n&&!i&&!r&&wa(t),s=n||i||r||o,a=s?nn(t.length,$t):[],u=a.length;for(var h in t)!e&&!ne.call(t,h)||s&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||ko(h,u))||a.push(h);return a}function gi(t){var e=t.length;return e?t[lr(0,e-1)]:n}function mi(t,e,i){(i===n||Xs(t[e],i))&&(i!==n||e in t)||Li(t,e,i)}function vi(t,e,i){var r=t[e];ne.call(t,e)&&Xs(r,i)&&(i!==n||e in t)||Li(t,e,i)}function yi(t,e){for(var n=t.length;n--;)if(Xs(t[n][0],e))return n;return-1}function bi(t,e,n,i){return Mi(t,function(t,r,o){e(i,t,n(t),o)}),i}function wi(t,e){return t&&Gr(e,Ga(e),t)}function Li(t,e,n){"__proto__"==e&&Cn?Cn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function xi(t,e){for(var i=-1,r=e.length,o=Wt(r),s=null==t;++i<r;)o[i]=s?n:Da(t,e[i]);return o}function Pi(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n&&(t=t>=e?t:e)),t}function Ti(t,e,i,r,o,h){var l,c=e&s,f=e&a,p=e&u;if(i&&(l=o?i(t,r,o,h):i(t)),l!==n)return l;if(!fa(t))return t;var d=na(t);if(d){if(l=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ne.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return Wr(t,l)}else{var _=So(t),g=_==Z||_==N;if(sa(t))return Rr(t,c);if(_==V||_==k||g&&!o){if(l=f||g?{}:Eo(t),!c)return f?function(t,e){return Gr(t,Oo(t),e)}(t,function(e,n){return e&&Gr(t,Va(t),e)}(l)):function(t,e){return Gr(t,Co(t),e)}(t,wi(l,t))}else{if(!_e[_])return o?t:{};l=function(t,e,n){var i,r,o,s=t.constructor;switch(e){case X:return jr(t);case B:case R:return new s(+t);case Q:return function(t,e){var n=e?jr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case tt:case et:case nt:case it:case rt:case ot:case st:case at:case ut:return Dr(t,n);case U:return new s;case W:case Y:return new s(t);case H:return(o=new(r=t).constructor(r.source,It.exec(r))).lastIndex=r.lastIndex,o;case q:return new s;case $:return i=t,ii?qt(ii.call(i)):{}}}(t,_,c)}}h||(h=new di);var m=h.get(t);if(m)return m;if(h.set(t,l),va(t))return t.forEach(function(n){l.add(Ti(n,e,i,n,t,h))}),l;if(da(t))return t.forEach(function(n,r){l.set(r,Ti(n,e,i,r,t,h))}),l;var v=d?n:(p?f?vo:mo:f?Va:Ga)(t);return Be(v||t,function(n,r){v&&(n=t[r=n]),vi(l,r,Ti(n,e,i,r,t,h))}),l}function Ci(t,e,i){var r=i.length;if(null==t)return!r;for(t=qt(t);r--;){var o=i[r],s=e[o],a=t[o];if(a===n&&!(o in t)||!s(a))return!1}return!0}function Oi(t,e,i){if("function"!=typeof t)throw new Kt(r);return Go(function(){t.apply(n,i)},e)}function Si(t,e,n,r){var o=-1,s=De,a=!0,u=t.length,h=[],l=e.length;if(!u)return h;n&&(e=Ne(e,rn(n))),r?(s=Ze,a=!1):e.length>=i&&(s=sn,a=!1,e=new pi(e));t:for(;++o<u;){var c=t[o],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var p=l;p--;)if(e[p]===f)continue t;h.push(c)}else s(e,f,r)||h.push(c)}return h}oi.templateSettings={escape:gt,evaluate:mt,interpolate:vt,variable:"",imports:{_:oi}},oi.prototype=ai.prototype,oi.prototype.constructor=oi,ui.prototype=si(ai.prototype),ui.prototype.constructor=ui,hi.prototype=si(ai.prototype),hi.prototype.constructor=hi,li.prototype.clear=function(){this.__data__=Yn?Yn(null):{},this.size=0},li.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},li.prototype.get=function(t){var e=this.__data__;if(Yn){var i=e[t];return"__lodash_hash_undefined__"===i?n:i}return ne.call(e,t)?e[t]:n},li.prototype.has=function(t){var e=this.__data__;return Yn?e[t]!==n:ne.call(e,t)},li.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Yn&&e===n?"__lodash_hash_undefined__":e,this},ci.prototype.clear=function(){this.__data__=[],this.size=0},ci.prototype.delete=function(t){var e=this.__data__,n=yi(e,t);return!(n<0||(n==e.length-1?e.pop():Qe.call(e,n,1),--this.size,0))},ci.prototype.get=function(t){var e=this.__data__,i=yi(e,t);return i<0?n:e[i][1]},ci.prototype.has=function(t){return yi(this.__data__,t)>-1},ci.prototype.set=function(t,e){var n=this.__data__,i=yi(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},fi.prototype.clear=function(){this.size=0,this.__data__={hash:new li,map:new(Vn||ci),string:new li}},fi.prototype.delete=function(t){var e=xo(this,t).delete(t);return this.size-=e?1:0,e},fi.prototype.get=function(t){return xo(this,t).get(t)},fi.prototype.has=function(t){return xo(this,t).has(t)},fi.prototype.set=function(t,e){var n=xo(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},pi.prototype.add=pi.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},pi.prototype.has=function(t){return this.__data__.has(t)},di.prototype.clear=function(){this.__data__=new ci,this.size=0},di.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},di.prototype.get=function(t){return this.__data__.get(t)},di.prototype.has=function(t){return this.__data__.has(t)},di.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ci){var r=n.__data__;if(!Vn||r.length<i-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fi(r)}return n.set(t,e),this.size=n.size,this};var Mi=Hr(ji),Ei=Hr(Di,!0);function Ai(t,e){var n=!0;return Mi(t,function(t,i,r){return n=!!e(t,i,r)}),n}function ki(t,e,i){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===n?a==a&&!ba(a):i(a,u)))var u=a,h=s}return h}function Ii(t,e){var n=[];return Mi(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function zi(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=Ao),r||(r=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?zi(a,e-1,n,i,r):Ue(r,a):i||(r[r.length]=a)}return r}var Bi=qr(),Ri=qr(!0);function ji(t,e){return t&&Bi(t,e,Ga)}function Di(t,e){return t&&Ri(t,e,Ga)}function Zi(t,e){return je(e,function(e){return ha(t[e])})}function Ni(t,e){for(var i=0,r=(e=kr(e,t)).length;null!=t&&i<r;)t=t[$o(e[i++])];return i&&i==r?t:n}function Ui(t,e,n){var i=e(t);return na(t)?i:Ue(i,n(t))}function Wi(t){return null==t?t===n?K:G:Tn&&Tn in qt(t)?function(t){var e=ne.call(t,Tn),i=t[Tn];try{t[Tn]=n;var r=!0}catch(t){}var o=oe.call(t);return r&&(e?t[Tn]=i:delete t[Tn]),o}(t):function(t){return oe.call(t)}(t)}function Gi(t,e){return t>e}function Vi(t,e){return null!=t&&ne.call(t,e)}function Fi(t,e){return null!=t&&e in qt(t)}function Hi(t,e,i){for(var r=i?Ze:De,o=t[0].length,s=t.length,a=s,u=Wt(s),h=1/0,l=[];a--;){var c=t[a];a&&e&&(c=Ne(c,rn(e))),h=Dn(c.length,h),u[a]=!i&&(e||o>=120&&c.length>=120)?new pi(a&&c):n}c=t[0];var f=-1,p=u[0];t:for(;++f<o&&l.length<h;){var d=c[f],_=e?e(d):d;if(d=i||0!==d?d:0,!(p?sn(p,_):r(l,_,i))){for(a=s;--a;){var g=u[a];if(!(g?sn(g,_):r(t[a],_,i)))continue t}p&&p.push(_),l.push(d)}}return l}function qi(t,e,i){var r=null==(t=Uo(t,e=kr(e,t)))?t:t[$o(us(e))];return null==r?n:Ie(r,t,i)}function Yi(t){return pa(t)&&Wi(t)==k}function $i(t,e,i,r,o){return t===e||(null==t||null==e||!pa(t)&&!pa(e)?t!=t&&e!=e:function(t,e,i,r,o,s){var a=na(t),u=na(e),c=a?I:So(t),f=u?I:So(e),p=(c=c==k?V:c)==V,d=(f=f==k?V:f)==V,_=c==f;if(_&&sa(t)){if(!sa(e))return!1;a=!0,p=!1}if(_&&!p)return s||(s=new di),a||wa(t)?_o(t,e,i,r,o,s):function(t,e,n,i,r,o,s){switch(c){case Q:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case X:return!(t.byteLength!=e.byteLength||!o(new Le(t),new Le(e)));case B:case R:case W:return Xs(+t,+e);case D:return t.name==e.name&&t.message==e.message;case H:case Y:return t==e+"";case U:var a=pn;case q:var u=i&h;if(a||(a=mn),t.size!=e.size&&!u)return!1;var f=s.get(t);if(f)return f==e;i|=l,s.set(t,e);var p=_o(a(t),a(e),i,r,o,s);return s.delete(t),p;case $:if(ii)return ii.call(t)==ii.call(e)}return!1}(t,e,0,i,r,o,s);if(!(i&h)){var g=p&&ne.call(t,"__wrapped__"),m=d&&ne.call(e,"__wrapped__");if(g||m){var v=g?t.value():t,y=m?e.value():e;return s||(s=new di),o(v,y,i,r,s)}}return!!_&&(s||(s=new di),function(t,e,i,r,o,s){var a=i&h,u=mo(t),l=u.length;if(l!=mo(e).length&&!a)return!1;for(var c=l;c--;){var f=u[c];if(!(a?f in e:ne.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var _=a;++c<l;){var g=t[f=u[c]],m=e[f];if(r)var v=a?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(!(v===n?g===m||o(g,m,i,r,s):v)){d=!1;break}_||(_="constructor"==f)}if(d&&!_){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,i,r,o,s))}(t,e,i,r,$i,o))}function Ki(t,e,i,r){var o=i.length,s=o,a=!r;if(null==t)return!s;for(t=qt(t);o--;){var u=i[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=i[o])[0],f=t[c],p=u[1];if(a&&u[2]){if(f===n&&!(c in t))return!1}else{var d=new di;if(r)var _=r(f,p,c,t,e,d);if(!(_===n?$i(p,f,h|l,r,d):_))return!1}}return!0}function Ji(t){return!(!fa(t)||re&&re in t)&&(ha(t)?ge:Rt).test(Ko(t))}function Xi(t){return"function"==typeof t?t:null==t?_u:"object"==typeof t?na(t)?ir(t[0],t[1]):nr(t):Pu(t)}function Qi(t){if(!jo(t))return Rn(t);var e=[];for(var n in qt(t))ne.call(t,n)&&"constructor"!=n&&e.push(n);return e}function tr(t,e){return t<e}function er(t,e){var n=-1,i=ra(t)?Wt(t.length):[];return Mi(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function nr(t){var e=Po(t);return 1==e.length&&e[0][2]?Zo(e[0][0],e[0][1]):function(n){return n===t||Ki(n,t,e)}}function ir(t,e){return zo(t)&&Do(e)?Zo($o(t),e):function(i){var r=Da(i,t);return r===n&&r===e?Za(i,t):$i(e,r,h|l)}}function rr(t,e,i,r,o){t!==e&&Bi(e,function(s,a){if(fa(s))o||(o=new di),function(t,e,i,r,o,s,a){var u=gn(t,i),h=gn(e,i),l=a.get(h);if(l)mi(t,i,l);else{var c=s?s(u,h,i+"",t,e,a):n,f=c===n;if(f){var p=na(h),d=!p&&sa(h),_=!p&&!d&&wa(h);c=h,p||d||_?na(u)?c=u:oa(u)?c=Wr(u):d?(f=!1,c=Rr(h,!0)):_?(f=!1,c=Dr(h,!0)):c=[]:ga(h)||ea(h)?(c=u,ea(u)?c=Ma(u):(!fa(u)||r&&ha(u))&&(c=Eo(h))):f=!1}f&&(a.set(h,c),o(c,h,r,s,a),a.delete(h)),mi(t,i,c)}}(t,e,a,i,rr,r,o);else{var u=r?r(gn(t,a),s,a+"",t,e,o):n;u===n&&(u=s),mi(t,a,u)}},Va)}function or(t,e){var i=t.length;if(i)return ko(e+=e<0?i:0,i)?t[e]:n}function sr(t,e,n){var i=-1;return e=Ne(e.length?e:[_u],rn(Lo())),function(t,e){var i=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=Zr(r[i],o[i]);if(u){if(i>=a)return u;var h=n[i];return u*("desc"==h?-1:1)}}return t.index-e.index}(t,e,n)});i--;)t[i]=t[i].value;return t}(er(t,function(t,n,r){return{criteria:Ne(e,function(e){return e(t)}),index:++i,value:t}}))}function ar(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=Ni(t,s);n(a,s)&&pr(o,kr(s,t),a)}return o}function ur(t,e,n,i){var r=i?$e:Ye,o=-1,s=e.length,a=t;for(t===e&&(e=Wr(e)),n&&(a=Ne(t,rn(n)));++o<s;)for(var u=0,h=e[o],l=n?n(h):h;(u=r(a,l,u,i))>-1;)a!==t&&Qe.call(a,u,1),Qe.call(t,u,1);return t}function hr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;ko(r)?Qe.call(t,r,1):Pr(t,r)}}return t}function lr(t,e){return t+An(Un()*(e-t+1))}function cr(t,e){var n="";if(!t||e<1||e>P)return n;do{e%2&&(n+=t),(e=An(e/2))&&(t+=t)}while(e);return n}function fr(t,e){return Vo(No(t,e,_u),t+"")}function pr(t,e,i,r){if(!fa(t))return t;for(var o=-1,s=(e=kr(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var h=$o(e[o]),l=i;if(o!=a){var c=u[h];(l=r?r(c,h,u):n)===n&&(l=fa(c)?c:ko(e[o+1])?[]:{})}vi(u,h,l),u=u[h]}return t}var dr=$n?function(t,e){return $n.set(t,e),t}:_u,_r=Cn?function(t,e){return Cn(t,"toString",{configurable:!0,enumerable:!1,value:fu(e),writable:!0})}:_u;function gr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Wt(r);++i<r;)o[i]=t[i+e];return o}function mr(t,e){var n;return Mi(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function vr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=M){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!ba(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return yr(t,e,_u,n)}function yr(t,e,i,r){e=i(e);for(var o=0,s=null==t?0:t.length,a=e!=e,u=null===e,h=ba(e),l=e===n;o<s;){var c=An((o+s)/2),f=i(t[c]),p=f!==n,d=null===f,_=f==f,g=ba(f);if(a)var m=r||_;else m=l?_&&(r||p):u?_&&p&&(r||!d):h?_&&p&&!d&&(r||!g):!d&&!g&&(r?f<=e:f<e);m?o=c+1:s=c}return Dn(s,S)}function br(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!Xs(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function wr(t){return"number"==typeof t?t:ba(t)?C:+t}function Lr(t){if("string"==typeof t)return t;if(na(t))return Ne(t,Lr)+"";if(ba(t))return ri?ri.call(t):"";var e=t+"";return"0"==e&&1/t==-x?"-0":e}function xr(t,e,n){var r=-1,o=De,s=t.length,a=!0,u=[],h=u;if(n)a=!1,o=Ze;else if(s>=i){var l=e?null:uo(t);if(l)return mn(l);a=!1,o=sn,h=new pi}else h=e?[]:u;t:for(;++r<s;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var p=h.length;p--;)if(h[p]===f)continue t;e&&h.push(f),u.push(c)}else o(h,f,n)||(h!==u&&h.push(f),u.push(c))}return u}function Pr(t,e){return null==(t=Uo(t,e=kr(e,t)))||delete t[$o(us(e))]}function Tr(t,e,n,i){return pr(t,e,n(Ni(t,e)),i)}function Cr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?gr(t,i?0:o,i?o+1:r):gr(t,i?o+1:0,i?r:o)}function Or(t,e){var n=t;return n instanceof hi&&(n=n.value()),We(e,function(t,e){return e.func.apply(e.thisArg,Ue([t],e.args))},n)}function Sr(t,e,n){var i=t.length;if(i<2)return i?xr(t[0]):[];for(var r=-1,o=Wt(i);++r<i;)for(var s=t[r],a=-1;++a<i;)a!=r&&(o[r]=Si(o[r]||s,t[a],e,n));return xr(zi(o,1),e,n)}function Mr(t,e,i){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:n;i(a,t[r],u)}return a}function Er(t){return oa(t)?t:[]}function Ar(t){return"function"==typeof t?t:_u}function kr(t,e){return na(t)?t:zo(t,e)?[t]:Yo(Ea(t))}var Ir=fr;function zr(t,e,i){var r=t.length;return i=i===n?r:i,!e&&i>=r?t:gr(t,e,i)}var Br=On||function(t){return we.clearTimeout(t)};function Rr(t,e){if(e)return t.slice();var n=t.length,i=xe?xe(n):new t.constructor(n);return t.copy(i),i}function jr(t){var e=new t.constructor(t.byteLength);return new Le(e).set(new Le(t)),e}function Dr(t,e){var n=e?jr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Zr(t,e){if(t!==e){var i=t!==n,r=null===t,o=t==t,s=ba(t),a=e!==n,u=null===e,h=e==e,l=ba(e);if(!u&&!l&&!s&&t>e||s&&a&&h&&!u&&!l||r&&a&&h||!i&&h||!o)return 1;if(!r&&!s&&!l&&t<e||l&&i&&o&&!r&&!s||u&&i&&o||!a&&o||!h)return-1}return 0}function Nr(t,e,n,i){for(var r=-1,o=t.length,s=n.length,a=-1,u=e.length,h=jn(o-s,0),l=Wt(u+h),c=!i;++a<u;)l[a]=e[a];for(;++r<s;)(c||r<o)&&(l[n[r]]=t[r]);for(;h--;)l[a++]=t[r++];return l}function Ur(t,e,n,i){for(var r=-1,o=t.length,s=-1,a=n.length,u=-1,h=e.length,l=jn(o-a,0),c=Wt(l+h),f=!i;++r<l;)c[r]=t[r];for(var p=r;++u<h;)c[p+u]=e[u];for(;++s<a;)(f||r<o)&&(c[p+n[s]]=t[r++]);return c}function Wr(t,e){var n=-1,i=t.length;for(e||(e=Wt(i));++n<i;)e[n]=t[n];return e}function Gr(t,e,i,r){var o=!i;i||(i={});for(var s=-1,a=e.length;++s<a;){var u=e[s],h=r?r(i[u],t[u],u,i,t):n;h===n&&(h=t[u]),o?Li(i,u,h):vi(i,u,h)}return i}function Vr(t,e){return function(n,i){var r=na(n)?ze:bi,o=e?e():{};return r(n,t,Lo(i,2),o)}}function Fr(t){return fr(function(e,i){var r=-1,o=i.length,s=o>1?i[o-1]:n,a=o>2?i[2]:n;for(s=t.length>3&&"function"==typeof s?(o--,s):n,a&&Io(i[0],i[1],a)&&(s=o<3?n:s,o=1),e=qt(e);++r<o;){var u=i[r];u&&t(e,u,r,s)}return e})}function Hr(t,e){return function(n,i){if(null==n)return n;if(!ra(n))return t(n,i);for(var r=n.length,o=e?r:-1,s=qt(n);(e?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function qr(t){return function(e,n,i){for(var r=-1,o=qt(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}function Yr(t){return function(e){var i=fn(e=Ea(e))?bn(e):n,r=i?i[0]:e.charAt(0),o=i?zr(i,1).join(""):e.slice(1);return r[t]()+o}}function $r(t){return function(e){return We(hu(eu(e).replace(se,"")),t,"")}}function Kr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=si(t.prototype),i=t.apply(n,e);return fa(i)?i:n}}function Jr(t){return function(e,i,r){var o=qt(e);if(!ra(e)){var s=Lo(i,3);e=Ga(e),i=function(t){return s(o[t],t,o)}}var a=t(e,i,r);return a>-1?o[s?e[a]:a]:n}}function Xr(t){return go(function(e){var i=e.length,o=i,s=ui.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new Kt(r);if(s&&!u&&"wrapper"==bo(a))var u=new ui([],!0)}for(o=u?o:i;++o<i;){var h=bo(a=e[o]),l="wrapper"==h?yo(a):n;u=l&&Bo(l[0])&&l[1]==(v|d|g|y)&&!l[4].length&&1==l[9]?u[bo(l[0])].apply(u,l[3]):1==a.length&&Bo(a)?u[h]():u.thru(a)}return function(){var t=arguments,n=t[0];if(u&&1==t.length&&na(n))return u.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}})}function Qr(t,e,i,r,o,s,a,u,h,l){var p=e&v,g=e&c,m=e&f,y=e&(d|_),w=e&b,L=m?n:Kr(t);return function c(){for(var f=arguments.length,d=Wt(f),_=f;_--;)d[_]=arguments[_];if(y)var v=wo(c),b=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(d,v);if(r&&(d=Nr(d,r,o,y)),s&&(d=Ur(d,s,a,y)),f-=b,y&&f<l){var x=_n(d,v);return so(t,e,Qr,c.placeholder,i,d,x,u,h,l-f)}var P=g?i:this,T=m?P[t]:t;return f=d.length,u?d=function(t,e){for(var i=t.length,r=Dn(e.length,i),o=Wr(t);r--;){var s=e[r];t[r]=ko(s,i)?o[s]:n}return t}(d,u):w&&f>1&&d.reverse(),p&&h<f&&(d.length=h),this&&this!==we&&this instanceof c&&(T=L||Kr(T)),T.apply(P,d)}}function to(t,e){return function(n,i){return function(t,e,n,i){return ji(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function eo(t,e){return function(i,r){var o;if(i===n&&r===n)return e;if(i!==n&&(o=i),r!==n){if(o===n)return r;"string"==typeof i||"string"==typeof r?(i=Lr(i),r=Lr(r)):(i=wr(i),r=wr(r)),o=t(i,r)}return o}}function no(t){return go(function(e){return e=Ne(e,rn(Lo())),fr(function(n){var i=this;return t(e,function(t){return Ie(t,i,n)})})})}function io(t,e){var i=(e=e===n?" ":Lr(e)).length;if(i<2)return i?cr(e,t):e;var r=cr(e,En(t/yn(e)));return fn(e)?zr(bn(r),0,t).join(""):r.slice(0,t)}function ro(t){return function(e,i,r){return r&&"number"!=typeof r&&Io(e,i,r)&&(i=r=n),e=Ta(e),i===n?(i=e,e=0):i=Ta(i),function(t,e,n,i){for(var r=-1,o=jn(En((e-t)/(n||1)),0),s=Wt(o);o--;)s[i?o:++r]=t,t+=n;return s}(e,i,r=r===n?e<i?1:-1:Ta(r),t)}}function oo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Sa(e),n=Sa(n)),t(e,n)}}function so(t,e,i,r,o,s,a,u,h,l){var _=e&d;e|=_?g:m,(e&=~(_?m:g))&p||(e&=~(c|f));var v=[t,e,o,_?s:n,_?a:n,_?n:s,_?n:a,u,h,l],y=i.apply(n,v);return Bo(t)&&Wo(y,v),y.placeholder=r,Fo(y,t,e)}function ao(t){var e=Ht[t];return function(t,n){if(t=Sa(t),n=null==n?0:Dn(Ca(n),292)){var i=(Ea(t)+"e").split("e");return+((i=(Ea(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var uo=Hn&&1/mn(new Hn([,-0]))[1]==x?function(t){return new Hn(t)}:bu;function ho(t){return function(e){var n=So(e);return n==U?pn(e):n==q?vn(e):function(t,e){return Ne(e,function(e){return[e,t[e]]})}(e,t(e))}}function lo(t,e,i,s,a,u,h,l){var b=e&f;if(!b&&"function"!=typeof t)throw new Kt(r);var w=s?s.length:0;if(w||(e&=~(g|m),s=a=n),h=h===n?h:jn(Ca(h),0),l=l===n?l:Ca(l),w-=a?a.length:0,e&m){var L=s,x=a;s=a=n}var P=b?n:yo(t),T=[t,e,i,s,a,L,x,u,h,l];if(P&&function(t,e){var n=t[1],i=e[1],r=n|i,s=r<(c|f|v),a=i==v&&n==d||i==v&&n==y&&t[7].length<=e[8]||i==(v|y)&&e[7].length<=e[8]&&n==d;if(!s&&!a)return t;i&c&&(t[2]=e[2],r|=n&c?0:p);var u=e[3];if(u){var h=t[3];t[3]=h?Nr(h,u,e[4]):u,t[4]=h?_n(t[3],o):e[4]}(u=e[5])&&(h=t[5],t[5]=h?Ur(h,u,e[6]):u,t[6]=h?_n(t[5],o):e[6]),(u=e[7])&&(t[7]=u),i&v&&(t[8]=null==t[8]?e[8]:Dn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(T,P),t=T[0],e=T[1],i=T[2],s=T[3],a=T[4],!(l=T[9]=T[9]===n?b?0:t.length:jn(T[9]-w,0))&&e&(d|_)&&(e&=~(d|_)),e&&e!=c)C=e==d||e==_?function(t,e,i){var r=Kr(t);return function o(){for(var s=arguments.length,a=Wt(s),u=s,h=wo(o);u--;)a[u]=arguments[u];var l=s<3&&a[0]!==h&&a[s-1]!==h?[]:_n(a,h);return(s-=l.length)<i?so(t,e,Qr,o.placeholder,n,a,l,n,n,i-s):Ie(this&&this!==we&&this instanceof o?r:t,this,a)}}(t,e,l):e!=g&&e!=(c|g)||a.length?Qr.apply(n,T):function(t,e,n,i){var r=e&c,o=Kr(t);return function e(){for(var s=-1,a=arguments.length,u=-1,h=i.length,l=Wt(h+a),c=this&&this!==we&&this instanceof e?o:t;++u<h;)l[u]=i[u];for(;a--;)l[u++]=arguments[++s];return Ie(c,r?n:this,l)}}(t,e,i,s);else var C=function(t,e,n){var i=e&c,r=Kr(t);return function e(){return(this&&this!==we&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,i);return Fo((P?dr:Wo)(C,T),t,e)}function co(t,e,i,r){return t===n||Xs(t,Qt[i])&&!ne.call(r,i)?e:t}function fo(t,e,i,r,o,s){return fa(t)&&fa(e)&&(s.set(e,t),rr(t,e,n,fo,s),s.delete(e)),t}function po(t){return ga(t)?n:t}function _o(t,e,i,r,o,s){var a=i&h,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var f=s.get(t);if(f&&s.get(e))return f==e;var p=-1,d=!0,_=i&l?new pi:n;for(s.set(t,e),s.set(e,t);++p<u;){var g=t[p],m=e[p];if(r)var v=a?r(m,g,p,e,t,s):r(g,m,p,t,e,s);if(v!==n){if(v)continue;d=!1;break}if(_){if(!Ve(e,function(t,e){if(!sn(_,e)&&(g===t||o(g,t,i,r,s)))return _.push(e)})){d=!1;break}}else if(g!==m&&!o(g,m,i,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function go(t){return Vo(No(t,n,is),t+"")}function mo(t){return Ui(t,Ga,Co)}function vo(t){return Ui(t,Va,Oo)}var yo=$n?function(t){return $n.get(t)}:bu;function bo(t){for(var e=t.name+"",n=Kn[e],i=ne.call(Kn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function wo(t){return(ne.call(oi,"placeholder")?oi:t).placeholder}function Lo(){var t=oi.iteratee||gu;return t=t===gu?Xi:t,arguments.length?t(arguments[0],arguments[1]):t}function xo(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Po(t){for(var e=Ga(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Do(r)]}return e}function To(t,e){var i=function(t,e){return null==t?n:t[e]}(t,e);return Ji(i)?i:n}var Co=kn?function(t){return null==t?[]:(t=qt(t),je(kn(t),function(e){return Fe.call(t,e)}))}:Ou,Oo=kn?function(t){for(var e=[];t;)Ue(e,Co(t)),t=Te(t);return e}:Ou,So=Wi;function Mo(t,e,n){for(var i=-1,r=(e=kr(e,t)).length,o=!1;++i<r;){var s=$o(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ca(r)&&ko(s,r)&&(na(t)||ea(t))}function Eo(t){return"function"!=typeof t.constructor||jo(t)?{}:si(Te(t))}function Ao(t){return na(t)||ea(t)||!!(xn&&t&&t[xn])}function ko(t,e){var n=typeof t;return!!(e=null==e?P:e)&&("number"==n||"symbol"!=n&&Dt.test(t))&&t>-1&&t%1==0&&t<e}function Io(t,e,n){if(!fa(n))return!1;var i=typeof e;return!!("number"==i?ra(n)&&ko(e,n.length):"string"==i&&e in n)&&Xs(n[e],t)}function zo(t,e){if(na(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ba(t))||bt.test(t)||!yt.test(t)||null!=e&&t in qt(e)}function Bo(t){var e=bo(t),n=oi[e];if("function"!=typeof n||!(e in hi.prototype))return!1;if(t===n)return!0;var i=yo(n);return!!i&&t===i[0]}(Gn&&So(new Gn(new ArrayBuffer(1)))!=Q||Vn&&So(new Vn)!=U||Fn&&"[object Promise]"!=So(Fn.resolve())||Hn&&So(new Hn)!=q||qn&&So(new qn)!=J)&&(So=function(t){var e=Wi(t),i=e==V?t.constructor:n,r=i?Ko(i):"";if(r)switch(r){case Jn:return Q;case Xn:return U;case Qn:return"[object Promise]";case ti:return q;case ei:return J}return e});var Ro=te?ha:Su;function jo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function Do(t){return t==t&&!fa(t)}function Zo(t,e){return function(i){return null!=i&&i[t]===e&&(e!==n||t in qt(i))}}function No(t,e,i){return e=jn(e===n?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=jn(n.length-e,0),s=Wt(o);++r<o;)s[r]=n[e+r];r=-1;for(var a=Wt(e+1);++r<e;)a[r]=n[r];return a[e]=i(s),Ie(t,this,a)}}function Uo(t,e){return e.length<2?t:Ni(t,gr(e,0,-1))}var Wo=Ho(dr),Go=Mn||function(t,e){return we.setTimeout(t,e)},Vo=Ho(_r);function Fo(t,e,n){var i=e+"";return Vo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Be(E,function(n){var i="_."+n[0];e&n[1]&&!De(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(St);return e?e[1].split(Mt):[]}(i),n)))}function Ho(t){var e=0,i=0;return function(){var r=Zn(),o=L-(r-i);if(i=r,o>0){if(++e>=w)return arguments[0]}else e=0;return t.apply(n,arguments)}}function qo(t,e){var i=-1,r=t.length,o=r-1;for(e=e===n?r:e;++i<e;){var s=lr(i,o),a=t[s];t[s]=t[i],t[i]=a}return t.length=e,t}var Yo=function(t){var e=Hs(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(wt,function(t,n,i,r){e.push(i?r.replace(At,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}();function $o(t){if("string"==typeof t||ba(t))return t;var e=t+"";return"0"==e&&1/t==-x?"-0":e}function Ko(t){if(null!=t){try{return ee.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Jo(t){if(t instanceof hi)return t.clone();var e=new ui(t.__wrapped__,t.__chain__);return e.__actions__=Wr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Xo=fr(function(t,e){return oa(t)?Si(t,zi(e,1,oa,!0)):[]}),Qo=fr(function(t,e){var i=us(e);return oa(i)&&(i=n),oa(t)?Si(t,zi(e,1,oa,!0),Lo(i,2)):[]}),ts=fr(function(t,e){var i=us(e);return oa(i)&&(i=n),oa(t)?Si(t,zi(e,1,oa,!0),n,i):[]});function es(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ca(n);return r<0&&(r=jn(i+r,0)),qe(t,Lo(e,3),r)}function ns(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return i!==n&&(o=Ca(i),o=i<0?jn(r+o,0):Dn(o,r-1)),qe(t,Lo(e,3),o,!0)}function is(t){return null!=t&&t.length?zi(t,1):[]}function rs(t){return t&&t.length?t[0]:n}var os=fr(function(t){var e=Ne(t,Er);return e.length&&e[0]===t[0]?Hi(e):[]}),ss=fr(function(t){var e=us(t),i=Ne(t,Er);return e===us(i)?e=n:i.pop(),i.length&&i[0]===t[0]?Hi(i,Lo(e,2)):[]}),as=fr(function(t){var e=us(t),i=Ne(t,Er);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?Hi(i,n,e):[]});function us(t){var e=null==t?0:t.length;return e?t[e-1]:n}var hs=fr(ls);function ls(t,e){return t&&t.length&&e&&e.length?ur(t,e):t}var cs=go(function(t,e){var n=null==t?0:t.length,i=xi(t,e);return hr(t,Ne(e,function(t){return ko(t,n)?+t:t}).sort(Zr)),i});function fs(t){return null==t?t:Wn.call(t)}var ps=fr(function(t){return xr(zi(t,1,oa,!0))}),ds=fr(function(t){var e=us(t);return oa(e)&&(e=n),xr(zi(t,1,oa,!0),Lo(e,2))}),_s=fr(function(t){var e=us(t);return e="function"==typeof e?e:n,xr(zi(t,1,oa,!0),n,e)});function gs(t){if(!t||!t.length)return[];var e=0;return t=je(t,function(t){if(oa(t))return e=jn(t.length,e),!0}),nn(e,function(e){return Ne(t,Xe(e))})}function ms(t,e){if(!t||!t.length)return[];var i=gs(t);return null==e?i:Ne(i,function(t){return Ie(e,n,t)})}var vs=fr(function(t,e){return oa(t)?Si(t,e):[]}),ys=fr(function(t){return Sr(je(t,oa))}),bs=fr(function(t){var e=us(t);return oa(e)&&(e=n),Sr(je(t,oa),Lo(e,2))}),ws=fr(function(t){var e=us(t);return e="function"==typeof e?e:n,Sr(je(t,oa),n,e)}),Ls=fr(gs),xs=fr(function(t){var e=t.length,i=e>1?t[e-1]:n;return ms(t,i="function"==typeof i?(t.pop(),i):n)});function Ps(t){var e=oi(t);return e.__chain__=!0,e}function Ts(t,e){return e(t)}var Cs=go(function(t){var e=t.length,i=e?t[0]:0,r=this.__wrapped__,o=function(e){return xi(e,t)};return!(e>1||this.__actions__.length)&&r instanceof hi&&ko(i)?((r=r.slice(i,+i+(e?1:0))).__actions__.push({func:Ts,args:[o],thisArg:n}),new ui(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(o)}),Os=Vr(function(t,e,n){ne.call(t,n)?++t[n]:Li(t,n,1)}),Ss=Jr(es),Ms=Jr(ns);function Es(t,e){return(na(t)?Be:Mi)(t,Lo(e,3))}function As(t,e){return(na(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Ei)(t,Lo(e,3))}var ks=Vr(function(t,e,n){ne.call(t,n)?t[n].push(e):Li(t,n,[e])}),Is=fr(function(t,e,n){var i=-1,r="function"==typeof e,o=ra(t)?Wt(t.length):[];return Mi(t,function(t){o[++i]=r?Ie(e,t,n):qi(t,e,n)}),o}),zs=Vr(function(t,e,n){Li(t,n,e)});function Bs(t,e){return(na(t)?Ne:er)(t,Lo(e,3))}var Rs=Vr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),js=fr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Io(t,e[0],e[1])?e=[]:n>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),sr(t,zi(e,1),[])}),Ds=Sn||function(){return we.Date.now()};function Zs(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,lo(t,v,n,n,n,n,e)}function Ns(t,e){var i;if("function"!=typeof e)throw new Kt(r);return t=Ca(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Us=fr(function(t,e,n){var i=c;if(n.length){var r=_n(n,wo(Us));i|=g}return lo(t,i,e,n,r)}),Ws=fr(function(t,e,n){var i=c|f;if(n.length){var r=_n(n,wo(Ws));i|=g}return lo(e,i,t,n,r)});function Gs(t,e,i){var o,s,a,u,h,l,c=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new Kt(r);function _(e){var i=o,r=s;return o=s=n,c=e,u=t.apply(r,i)}function g(t){var i=t-l;return l===n||i>=e||i<0||p&&t-c>=a}function m(){var t=Ds();if(g(t))return v(t);h=Go(m,function(t){var n=e-(t-l);return p?Dn(n,a-(t-c)):n}(t))}function v(t){return h=n,d&&o?_(t):(o=s=n,u)}function y(){var t=Ds(),i=g(t);if(o=arguments,s=this,l=t,i){if(h===n)return function(t){return c=t,h=Go(m,e),f?_(t):u}(l);if(p)return h=Go(m,e),_(l)}return h===n&&(h=Go(m,e)),u}return e=Sa(e)||0,fa(i)&&(f=!!i.leading,a=(p="maxWait"in i)?jn(Sa(i.maxWait)||0,e):a,d="trailing"in i?!!i.trailing:d),y.cancel=function(){h!==n&&Br(h),c=0,o=l=s=h=n},y.flush=function(){return h===n?u:v(Ds())},y}var Vs=fr(function(t,e){return Oi(t,1,e)}),Fs=fr(function(t,e,n){return Oi(t,Sa(e)||0,n)});function Hs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Kt(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Hs.Cache||fi),n}function qs(t){if("function"!=typeof t)throw new Kt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Hs.Cache=fi;var Ys=Ir(function(t,e){var n=(e=1==e.length&&na(e[0])?Ne(e[0],rn(Lo())):Ne(zi(e,1),rn(Lo()))).length;return fr(function(i){for(var r=-1,o=Dn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return Ie(t,this,i)})}),$s=fr(function(t,e){var i=_n(e,wo($s));return lo(t,g,n,e,i)}),Ks=fr(function(t,e){var i=_n(e,wo(Ks));return lo(t,m,n,e,i)}),Js=go(function(t,e){return lo(t,y,n,n,n,e)});function Xs(t,e){return t===e||t!=t&&e!=e}var Qs=oo(Gi),ta=oo(function(t,e){return t>=e}),ea=Yi(function(){return arguments}())?Yi:function(t){return pa(t)&&ne.call(t,"callee")&&!Fe.call(t,"callee")},na=Wt.isArray,ia=Oe?rn(Oe):function(t){return pa(t)&&Wi(t)==X};function ra(t){return null!=t&&ca(t.length)&&!ha(t)}function oa(t){return pa(t)&&ra(t)}var sa=In||Su,aa=Se?rn(Se):function(t){return pa(t)&&Wi(t)==R};function ua(t){if(!pa(t))return!1;var e=Wi(t);return e==D||e==j||"string"==typeof t.message&&"string"==typeof t.name&&!ga(t)}function ha(t){if(!fa(t))return!1;var e=Wi(t);return e==Z||e==N||e==z||e==F}function la(t){return"number"==typeof t&&t==Ca(t)}function ca(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function fa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function pa(t){return null!=t&&"object"==typeof t}var da=Me?rn(Me):function(t){return pa(t)&&So(t)==U};function _a(t){return"number"==typeof t||pa(t)&&Wi(t)==W}function ga(t){if(!pa(t)||Wi(t)!=V)return!1;var e=Te(t);if(null===e)return!0;var n=ne.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ee.call(n)==ue}var ma=Ee?rn(Ee):function(t){return pa(t)&&Wi(t)==H},va=Ae?rn(Ae):function(t){return pa(t)&&So(t)==q};function ya(t){return"string"==typeof t||!na(t)&&pa(t)&&Wi(t)==Y}function ba(t){return"symbol"==typeof t||pa(t)&&Wi(t)==$}var wa=ke?rn(ke):function(t){return pa(t)&&ca(t.length)&&!!de[Wi(t)]},La=oo(tr),xa=oo(function(t,e){return t<=e});function Pa(t){if(!t)return[];if(ra(t))return ya(t)?bn(t):Wr(t);if(Pn&&t[Pn])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Pn]());var e=So(t);return(e==U?pn:e==q?mn:Xa)(t)}function Ta(t){return t?(t=Sa(t))===x||t===-x?(t<0?-1:1)*T:t==t?t:0:0===t?t:0}function Ca(t){var e=Ta(t),n=e%1;return e==e?n?e-n:e:0}function Oa(t){return t?Pi(Ca(t),0,O):0}function Sa(t){if("number"==typeof t)return t;if(ba(t))return C;if(fa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=fa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pt,"");var n=Bt.test(t);return n||jt.test(t)?ve(t.slice(2),n?2:8):zt.test(t)?C:+t}function Ma(t){return Gr(t,Va(t))}function Ea(t){return null==t?"":Lr(t)}var Aa=Fr(function(t,e){if(jo(e)||ra(e))Gr(e,Ga(e),t);else for(var n in e)ne.call(e,n)&&vi(t,n,e[n])}),ka=Fr(function(t,e){Gr(e,Va(e),t)}),Ia=Fr(function(t,e,n,i){Gr(e,Va(e),t,i)}),za=Fr(function(t,e,n,i){Gr(e,Ga(e),t,i)}),Ba=go(xi),Ra=fr(function(t,e){t=qt(t);var i=-1,r=e.length,o=r>2?e[2]:n;for(o&&Io(e[0],e[1],o)&&(r=1);++i<r;)for(var s=e[i],a=Va(s),u=-1,h=a.length;++u<h;){var l=a[u],c=t[l];(c===n||Xs(c,Qt[l])&&!ne.call(t,l))&&(t[l]=s[l])}return t}),ja=fr(function(t){return t.push(n,fo),Ie(Ha,n,t)});function Da(t,e,i){var r=null==t?n:Ni(t,e);return r===n?i:r}function Za(t,e){return null!=t&&Mo(t,e,Fi)}var Na=to(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=oe.call(e)),t[e]=n},fu(_u)),Ua=to(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=oe.call(e)),ne.call(t,e)?t[e].push(n):t[e]=[n]},Lo),Wa=fr(qi);function Ga(t){return ra(t)?_i(t):Qi(t)}function Va(t){return ra(t)?_i(t,!0):function(t){if(!fa(t))return function(t){var e=[];if(null!=t)for(var n in qt(t))e.push(n);return e}(t);var e=jo(t),n=[];for(var i in t)("constructor"!=i||!e&&ne.call(t,i))&&n.push(i);return n}(t)}var Fa=Fr(function(t,e,n){rr(t,e,n)}),Ha=Fr(function(t,e,n,i){rr(t,e,n,i)}),qa=go(function(t,e){var n={};if(null==t)return n;var i=!1;e=Ne(e,function(e){return e=kr(e,t),i||(i=e.length>1),e}),Gr(t,vo(t),n),i&&(n=Ti(n,s|a|u,po));for(var r=e.length;r--;)Pr(n,e[r]);return n}),Ya=go(function(t,e){return null==t?{}:function(t,e){return ar(t,e,function(e,n){return Za(t,n)})}(t,e)});function $a(t,e){if(null==t)return{};var n=Ne(vo(t),function(t){return[t]});return e=Lo(e),ar(t,n,function(t,n){return e(t,n[0])})}var Ka=ho(Ga),Ja=ho(Va);function Xa(t){return null==t?[]:on(t,Ga(t))}var Qa=$r(function(t,e,n){return e=e.toLowerCase(),t+(n?tu(e):e)});function tu(t){return uu(Ea(t).toLowerCase())}function eu(t){return(t=Ea(t))&&t.replace(Zt,hn).replace(ae,"")}var nu=$r(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),iu=$r(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ru=Yr("toLowerCase"),ou=$r(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),su=$r(function(t,e,n){return t+(n?" ":"")+uu(e)}),au=$r(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),uu=Yr("toUpperCase");function hu(t,e,i){return t=Ea(t),(e=i?n:e)===n?function(t){return ce.test(t)}(t)?function(t){return t.match(he)||[]}(t):function(t){return t.match(Et)||[]}(t):t.match(e)||[]}var lu=fr(function(t,e){try{return Ie(t,n,e)}catch(t){return ua(t)?t:new Vt(t)}}),cu=go(function(t,e){return Be(e,function(e){e=$o(e),Li(t,e,Us(t[e],t))}),t});function fu(t){return function(){return t}}var pu=Xr(),du=Xr(!0);function _u(t){return t}function gu(t){return Xi("function"==typeof t?t:Ti(t,s))}var mu=fr(function(t,e){return function(n){return qi(n,t,e)}}),vu=fr(function(t,e){return function(n){return qi(t,n,e)}});function yu(t,e,n){var i=Ga(e),r=Zi(e,i);null!=n||fa(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Zi(e,Ga(e)));var o=!(fa(n)&&"chain"in n&&!n.chain),s=ha(t);return Be(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Wr(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Ue([this.value()],arguments))})}),t}function bu(){}var wu=no(Ne),Lu=no(Re),xu=no(Ve);function Pu(t){return zo(t)?Xe($o(t)):function(t){return function(e){return Ni(e,t)}}(t)}var Tu=ro(),Cu=ro(!0);function Ou(){return[]}function Su(){return!1}var Mu,Eu=eo(function(t,e){return t+e},0),Au=ao("ceil"),ku=eo(function(t,e){return t/e},1),Iu=ao("floor"),zu=eo(function(t,e){return t*e},1),Bu=ao("round"),Ru=eo(function(t,e){return t-e},0);return oi.after=function(t,e){if("function"!=typeof e)throw new Kt(r);return t=Ca(t),function(){if(--t<1)return e.apply(this,arguments)}},oi.ary=Zs,oi.assign=Aa,oi.assignIn=ka,oi.assignInWith=Ia,oi.assignWith=za,oi.at=Ba,oi.before=Ns,oi.bind=Us,oi.bindAll=cu,oi.bindKey=Ws,oi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return na(t)?t:[t]},oi.chain=Ps,oi.chunk=function(t,e,i){e=(i?Io(t,e,i):e===n)?1:jn(Ca(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,s=0,a=Wt(En(r/e));o<r;)a[s++]=gr(t,o,o+=e);return a},oi.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},oi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Wt(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ue(na(n)?Wr(n):[n],zi(e,1))},oi.cond=function(t){var e=null==t?0:t.length,n=Lo();return t=e?Ne(t,function(t){if("function"!=typeof t[1])throw new Kt(r);return[n(t[0]),t[1]]}):[],fr(function(n){for(var i=-1;++i<e;){var r=t[i];if(Ie(r[0],this,n))return Ie(r[1],this,n)}})},oi.conforms=function(t){return function(t){var e=Ga(t);return function(n){return Ci(n,t,e)}}(Ti(t,s))},oi.constant=fu,oi.countBy=Os,oi.create=function(t,e){var n=si(t);return null==e?n:wi(n,e)},oi.curry=function t(e,i,r){var o=lo(e,d,n,n,n,n,n,i=r?n:i);return o.placeholder=t.placeholder,o},oi.curryRight=function t(e,i,r){var o=lo(e,_,n,n,n,n,n,i=r?n:i);return o.placeholder=t.placeholder,o},oi.debounce=Gs,oi.defaults=Ra,oi.defaultsDeep=ja,oi.defer=Vs,oi.delay=Fs,oi.difference=Xo,oi.differenceBy=Qo,oi.differenceWith=ts,oi.drop=function(t,e,i){var r=null==t?0:t.length;return r?gr(t,(e=i||e===n?1:Ca(e))<0?0:e,r):[]},oi.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?gr(t,0,(e=r-(e=i||e===n?1:Ca(e)))<0?0:e):[]},oi.dropRightWhile=function(t,e){return t&&t.length?Cr(t,Lo(e,3),!0,!0):[]},oi.dropWhile=function(t,e){return t&&t.length?Cr(t,Lo(e,3),!0):[]},oi.fill=function(t,e,i,r){var o=null==t?0:t.length;return o?(i&&"number"!=typeof i&&Io(t,e,i)&&(i=0,r=o),function(t,e,i,r){var o=t.length;for((i=Ca(i))<0&&(i=-i>o?0:o+i),(r=r===n||r>o?o:Ca(r))<0&&(r+=o),r=i>r?0:Oa(r);i<r;)t[i++]=e;return t}(t,e,i,r)):[]},oi.filter=function(t,e){return(na(t)?je:Ii)(t,Lo(e,3))},oi.flatMap=function(t,e){return zi(Bs(t,e),1)},oi.flatMapDeep=function(t,e){return zi(Bs(t,e),x)},oi.flatMapDepth=function(t,e,i){return i=i===n?1:Ca(i),zi(Bs(t,e),i)},oi.flatten=is,oi.flattenDeep=function(t){return null!=t&&t.length?zi(t,x):[]},oi.flattenDepth=function(t,e){return null!=t&&t.length?zi(t,e=e===n?1:Ca(e)):[]},oi.flip=function(t){return lo(t,b)},oi.flow=pu,oi.flowRight=du,oi.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},oi.functions=function(t){return null==t?[]:Zi(t,Ga(t))},oi.functionsIn=function(t){return null==t?[]:Zi(t,Va(t))},oi.groupBy=ks,oi.initial=function(t){return null!=t&&t.length?gr(t,0,-1):[]},oi.intersection=os,oi.intersectionBy=ss,oi.intersectionWith=as,oi.invert=Na,oi.invertBy=Ua,oi.invokeMap=Is,oi.iteratee=gu,oi.keyBy=zs,oi.keys=Ga,oi.keysIn=Va,oi.map=Bs,oi.mapKeys=function(t,e){var n={};return e=Lo(e,3),ji(t,function(t,i,r){Li(n,e(t,i,r),t)}),n},oi.mapValues=function(t,e){var n={};return e=Lo(e,3),ji(t,function(t,i,r){Li(n,i,e(t,i,r))}),n},oi.matches=function(t){return nr(Ti(t,s))},oi.matchesProperty=function(t,e){return ir(t,Ti(e,s))},oi.memoize=Hs,oi.merge=Fa,oi.mergeWith=Ha,oi.method=mu,oi.methodOf=vu,oi.mixin=yu,oi.negate=qs,oi.nthArg=function(t){return t=Ca(t),fr(function(e){return or(e,t)})},oi.omit=qa,oi.omitBy=function(t,e){return $a(t,qs(Lo(e)))},oi.once=function(t){return Ns(2,t)},oi.orderBy=function(t,e,i,r){return null==t?[]:(na(e)||(e=null==e?[]:[e]),na(i=r?n:i)||(i=null==i?[]:[i]),sr(t,e,i))},oi.over=wu,oi.overArgs=Ys,oi.overEvery=Lu,oi.overSome=xu,oi.partial=$s,oi.partialRight=Ks,oi.partition=Rs,oi.pick=Ya,oi.pickBy=$a,oi.property=Pu,oi.propertyOf=function(t){return function(e){return null==t?n:Ni(t,e)}},oi.pull=hs,oi.pullAll=ls,oi.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ur(t,e,Lo(n,2)):t},oi.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?ur(t,e,n,i):t},oi.pullAt=cs,oi.range=Tu,oi.rangeRight=Cu,oi.rearg=Js,oi.reject=function(t,e){return(na(t)?je:Ii)(t,qs(Lo(e,3)))},oi.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Lo(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return hr(t,r),n},oi.rest=function(t,e){if("function"!=typeof t)throw new Kt(r);return fr(t,e=e===n?e:Ca(e))},oi.reverse=fs,oi.sampleSize=function(t,e,i){return e=(i?Io(t,e,i):e===n)?1:Ca(e),(na(t)?function(t,e){return qo(Wr(t),Pi(e,0,t.length))}:function(t,e){var n=Xa(t);return qo(n,Pi(e,0,n.length))})(t,e)},oi.set=function(t,e,n){return null==t?t:pr(t,e,n)},oi.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:pr(t,e,i,r)},oi.shuffle=function(t){return(na(t)?function(t){return qo(Wr(t))}:function(t){return qo(Xa(t))})(t)},oi.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&Io(t,e,i)?(e=0,i=r):(e=null==e?0:Ca(e),i=i===n?r:Ca(i)),gr(t,e,i)):[]},oi.sortBy=js,oi.sortedUniq=function(t){return t&&t.length?br(t):[]},oi.sortedUniqBy=function(t,e){return t&&t.length?br(t,Lo(e,2)):[]},oi.split=function(t,e,i){return i&&"number"!=typeof i&&Io(t,e,i)&&(e=i=n),(i=i===n?O:i>>>0)?(t=Ea(t))&&("string"==typeof e||null!=e&&!ma(e))&&!(e=Lr(e))&&fn(t)?zr(bn(t),0,i):t.split(e,i):[]},oi.spread=function(t,e){if("function"!=typeof t)throw new Kt(r);return e=null==e?0:jn(Ca(e),0),fr(function(n){var i=n[e],r=zr(n,0,e);return i&&Ue(r,i),Ie(t,this,r)})},oi.tail=function(t){var e=null==t?0:t.length;return e?gr(t,1,e):[]},oi.take=function(t,e,i){return t&&t.length?gr(t,0,(e=i||e===n?1:Ca(e))<0?0:e):[]},oi.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?gr(t,(e=r-(e=i||e===n?1:Ca(e)))<0?0:e,r):[]},oi.takeRightWhile=function(t,e){return t&&t.length?Cr(t,Lo(e,3),!1,!0):[]},oi.takeWhile=function(t,e){return t&&t.length?Cr(t,Lo(e,3)):[]},oi.tap=function(t,e){return e(t),t},oi.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Kt(r);return fa(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Gs(t,e,{leading:i,maxWait:e,trailing:o})},oi.thru=Ts,oi.toArray=Pa,oi.toPairs=Ka,oi.toPairsIn=Ja,oi.toPath=function(t){return na(t)?Ne(t,$o):ba(t)?[t]:Wr(Yo(Ea(t)))},oi.toPlainObject=Ma,oi.transform=function(t,e,n){var i=na(t),r=i||sa(t)||wa(t);if(e=Lo(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:fa(t)&&ha(o)?si(Te(t)):{}}return(r?Be:ji)(t,function(t,i,r){return e(n,t,i,r)}),n},oi.unary=function(t){return Zs(t,1)},oi.union=ps,oi.unionBy=ds,oi.unionWith=_s,oi.uniq=function(t){return t&&t.length?xr(t):[]},oi.uniqBy=function(t,e){return t&&t.length?xr(t,Lo(e,2)):[]},oi.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?xr(t,n,e):[]},oi.unset=function(t,e){return null==t||Pr(t,e)},oi.unzip=gs,oi.unzipWith=ms,oi.update=function(t,e,n){return null==t?t:Tr(t,e,Ar(n))},oi.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:Tr(t,e,Ar(i),r)},oi.values=Xa,oi.valuesIn=function(t){return null==t?[]:on(t,Va(t))},oi.without=vs,oi.words=hu,oi.wrap=function(t,e){return $s(Ar(e),t)},oi.xor=ys,oi.xorBy=bs,oi.xorWith=ws,oi.zip=Ls,oi.zipObject=function(t,e){return Mr(t||[],e||[],vi)},oi.zipObjectDeep=function(t,e){return Mr(t||[],e||[],pr)},oi.zipWith=xs,oi.entries=Ka,oi.entriesIn=Ja,oi.extend=ka,oi.extendWith=Ia,yu(oi,oi),oi.add=Eu,oi.attempt=lu,oi.camelCase=Qa,oi.capitalize=tu,oi.ceil=Au,oi.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=Sa(i))==i?i:0),e!==n&&(e=(e=Sa(e))==e?e:0),Pi(Sa(t),e,i)},oi.clone=function(t){return Ti(t,u)},oi.cloneDeep=function(t){return Ti(t,s|u)},oi.cloneDeepWith=function(t,e){return Ti(t,s|u,e="function"==typeof e?e:n)},oi.cloneWith=function(t,e){return Ti(t,u,e="function"==typeof e?e:n)},oi.conformsTo=function(t,e){return null==e||Ci(t,e,Ga(e))},oi.deburr=eu,oi.defaultTo=function(t,e){return null==t||t!=t?e:t},oi.divide=ku,oi.endsWith=function(t,e,i){t=Ea(t),e=Lr(e);var r=t.length,o=i=i===n?r:Pi(Ca(i),0,r);return(i-=e.length)>=0&&t.slice(i,o)==e},oi.eq=Xs,oi.escape=function(t){return(t=Ea(t))&&_t.test(t)?t.replace(pt,ln):t},oi.escapeRegExp=function(t){return(t=Ea(t))&&xt.test(t)?t.replace(Lt,"\\$&"):t},oi.every=function(t,e,i){var r=na(t)?Re:Ai;return i&&Io(t,e,i)&&(e=n),r(t,Lo(e,3))},oi.find=Ss,oi.findIndex=es,oi.findKey=function(t,e){return He(t,Lo(e,3),ji)},oi.findLast=Ms,oi.findLastIndex=ns,oi.findLastKey=function(t,e){return He(t,Lo(e,3),Di)},oi.floor=Iu,oi.forEach=Es,oi.forEachRight=As,oi.forIn=function(t,e){return null==t?t:Bi(t,Lo(e,3),Va)},oi.forInRight=function(t,e){return null==t?t:Ri(t,Lo(e,3),Va)},oi.forOwn=function(t,e){return t&&ji(t,Lo(e,3))},oi.forOwnRight=function(t,e){return t&&Di(t,Lo(e,3))},oi.get=Da,oi.gt=Qs,oi.gte=ta,oi.has=function(t,e){return null!=t&&Mo(t,e,Vi)},oi.hasIn=Za,oi.head=rs,oi.identity=_u,oi.includes=function(t,e,n,i){t=ra(t)?t:Xa(t),n=n&&!i?Ca(n):0;var r=t.length;return n<0&&(n=jn(r+n,0)),ya(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ye(t,e,n)>-1},oi.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ca(n);return r<0&&(r=jn(i+r,0)),Ye(t,e,r)},oi.inRange=function(t,e,i){return e=Ta(e),i===n?(i=e,e=0):i=Ta(i),function(t,e,n){return t>=Dn(e,n)&&t<jn(e,n)}(t=Sa(t),e,i)},oi.invoke=Wa,oi.isArguments=ea,oi.isArray=na,oi.isArrayBuffer=ia,oi.isArrayLike=ra,oi.isArrayLikeObject=oa,oi.isBoolean=function(t){return!0===t||!1===t||pa(t)&&Wi(t)==B},oi.isBuffer=sa,oi.isDate=aa,oi.isElement=function(t){return pa(t)&&1===t.nodeType&&!ga(t)},oi.isEmpty=function(t){if(null==t)return!0;if(ra(t)&&(na(t)||"string"==typeof t||"function"==typeof t.splice||sa(t)||wa(t)||ea(t)))return!t.length;var e=So(t);if(e==U||e==q)return!t.size;if(jo(t))return!Qi(t).length;for(var n in t)if(ne.call(t,n))return!1;return!0},oi.isEqual=function(t,e){return $i(t,e)},oi.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?$i(t,e,n,i):!!r},oi.isError=ua,oi.isFinite=function(t){return"number"==typeof t&&zn(t)},oi.isFunction=ha,oi.isInteger=la,oi.isLength=ca,oi.isMap=da,oi.isMatch=function(t,e){return t===e||Ki(t,e,Po(e))},oi.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,Ki(t,e,Po(e),i)},oi.isNaN=function(t){return _a(t)&&t!=+t},oi.isNative=function(t){if(Ro(t))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ji(t)},oi.isNil=function(t){return null==t},oi.isNull=function(t){return null===t},oi.isNumber=_a,oi.isObject=fa,oi.isObjectLike=pa,oi.isPlainObject=ga,oi.isRegExp=ma,oi.isSafeInteger=function(t){return la(t)&&t>=-P&&t<=P},oi.isSet=va,oi.isString=ya,oi.isSymbol=ba,oi.isTypedArray=wa,oi.isUndefined=function(t){return t===n},oi.isWeakMap=function(t){return pa(t)&&So(t)==J},oi.isWeakSet=function(t){return pa(t)&&"[object WeakSet]"==Wi(t)},oi.join=function(t,e){return null==t?"":Bn.call(t,e)},oi.kebabCase=nu,oi.last=us,oi.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var o=r;return i!==n&&(o=(o=Ca(i))<0?jn(r+o,0):Dn(o,r-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):qe(t,Ke,o,!0)},oi.lowerCase=iu,oi.lowerFirst=ru,oi.lt=La,oi.lte=xa,oi.max=function(t){return t&&t.length?ki(t,_u,Gi):n},oi.maxBy=function(t,e){return t&&t.length?ki(t,Lo(e,2),Gi):n},oi.mean=function(t){return Je(t,_u)},oi.meanBy=function(t,e){return Je(t,Lo(e,2))},oi.min=function(t){return t&&t.length?ki(t,_u,tr):n},oi.minBy=function(t,e){return t&&t.length?ki(t,Lo(e,2),tr):n},oi.stubArray=Ou,oi.stubFalse=Su,oi.stubObject=function(){return{}},oi.stubString=function(){return""},oi.stubTrue=function(){return!0},oi.multiply=zu,oi.nth=function(t,e){return t&&t.length?or(t,Ca(e)):n},oi.noConflict=function(){return we._===this&&(we._=le),this},oi.noop=bu,oi.now=Ds,oi.pad=function(t,e,n){t=Ea(t);var i=(e=Ca(e))?yn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return io(An(r),n)+t+io(En(r),n)},oi.padEnd=function(t,e,n){t=Ea(t);var i=(e=Ca(e))?yn(t):0;return e&&i<e?t+io(e-i,n):t},oi.padStart=function(t,e,n){t=Ea(t);var i=(e=Ca(e))?yn(t):0;return e&&i<e?io(e-i,n)+t:t},oi.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Nn(Ea(t).replace(Tt,""),e||0)},oi.random=function(t,e,i){if(i&&"boolean"!=typeof i&&Io(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Ta(t),e===n?(e=t,t=0):e=Ta(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var o=Un();return Dn(t+o*(e-t+me("1e-"+((o+"").length-1))),e)}return lr(t,e)},oi.reduce=function(t,e,n){var i=na(t)?We:tn,r=arguments.length<3;return i(t,Lo(e,4),n,r,Mi)},oi.reduceRight=function(t,e,n){var i=na(t)?Ge:tn,r=arguments.length<3;return i(t,Lo(e,4),n,r,Ei)},oi.repeat=function(t,e,i){return e=(i?Io(t,e,i):e===n)?1:Ca(e),cr(Ea(t),e)},oi.replace=function(){var t=arguments,e=Ea(t[0]);return t.length<3?e:e.replace(t[1],t[2])},oi.result=function(t,e,i){var r=-1,o=(e=kr(e,t)).length;for(o||(o=1,t=n);++r<o;){var s=null==t?n:t[$o(e[r])];s===n&&(r=o,s=i),t=ha(s)?s.call(t):s}return t},oi.round=Bu,oi.runInContext=t,oi.sample=function(t){return(na(t)?gi:function(t){return gi(Xa(t))})(t)},oi.size=function(t){if(null==t)return 0;if(ra(t))return ya(t)?yn(t):t.length;var e=So(t);return e==U||e==q?t.size:Qi(t).length},oi.snakeCase=ou,oi.some=function(t,e,i){var r=na(t)?Ve:mr;return i&&Io(t,e,i)&&(e=n),r(t,Lo(e,3))},oi.sortedIndex=function(t,e){return vr(t,e)},oi.sortedIndexBy=function(t,e,n){return yr(t,e,Lo(n,2))},oi.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=vr(t,e);if(i<n&&Xs(t[i],e))return i}return-1},oi.sortedLastIndex=function(t,e){return vr(t,e,!0)},oi.sortedLastIndexBy=function(t,e,n){return yr(t,e,Lo(n,2),!0)},oi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=vr(t,e,!0)-1;if(Xs(t[n],e))return n}return-1},oi.startCase=su,oi.startsWith=function(t,e,n){return t=Ea(t),n=null==n?0:Pi(Ca(n),0,t.length),e=Lr(e),t.slice(n,n+e.length)==e},oi.subtract=Ru,oi.sum=function(t){return t&&t.length?en(t,_u):0},oi.sumBy=function(t,e){return t&&t.length?en(t,Lo(e,2)):0},oi.template=function(t,e,i){var r=oi.templateSettings;i&&Io(t,e,i)&&(e=n),t=Ea(t),e=Ia({},e,r,co);var o,s,a=Ia({},e.imports,r.imports,co),u=Ga(a),h=on(a,u),l=0,c=e.interpolate||Nt,f="__p += '",p=Yt((e.escape||Nt).source+"|"+c.source+"|"+(c===vt?kt:Nt).source+"|"+(e.evaluate||Nt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++pe+"]")+"\n";t.replace(p,function(e,n,i,r,a,u){return i||(i=r),f+=t.slice(l,u).replace(Ut,cn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var _=e.variable;_||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(ht,""):f).replace(lt,"$1").replace(ct,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=lu(function(){return Ft(u,d+"return "+f).apply(n,h)});if(g.source=f,ua(g))throw g;return g},oi.times=function(t,e){if((t=Ca(t))<1||t>P)return[];var n=O,i=Dn(t,O);e=Lo(e),t-=O;for(var r=nn(i,e);++n<t;)e(n);return r},oi.toFinite=Ta,oi.toInteger=Ca,oi.toLength=Oa,oi.toLower=function(t){return Ea(t).toLowerCase()},oi.toNumber=Sa,oi.toSafeInteger=function(t){return t?Pi(Ca(t),-P,P):0===t?t:0},oi.toString=Ea,oi.toUpper=function(t){return Ea(t).toUpperCase()},oi.trim=function(t,e,i){if((t=Ea(t))&&(i||e===n))return t.replace(Pt,"");if(!t||!(e=Lr(e)))return t;var r=bn(t),o=bn(e);return zr(r,an(r,o),un(r,o)+1).join("")},oi.trimEnd=function(t,e,i){if((t=Ea(t))&&(i||e===n))return t.replace(Ct,"");if(!t||!(e=Lr(e)))return t;var r=bn(t);return zr(r,0,un(r,bn(e))+1).join("")},oi.trimStart=function(t,e,i){if((t=Ea(t))&&(i||e===n))return t.replace(Tt,"");if(!t||!(e=Lr(e)))return t;var r=bn(t);return zr(r,an(r,bn(e))).join("")},oi.truncate=function(t,e){var i=30,r="...";if(fa(e)){var o="separator"in e?e.separator:o;i="length"in e?Ca(e.length):i,r="omission"in e?Lr(e.omission):r}var s=(t=Ea(t)).length;if(fn(t)){var a=bn(t);s=a.length}if(i>=s)return t;var u=i-yn(r);if(u<1)return r;var h=a?zr(a,0,u).join(""):t.slice(0,u);if(o===n)return h+r;if(a&&(u+=h.length-u),ma(o)){if(t.slice(u).search(o)){var l,c=h;for(o.global||(o=Yt(o.source,Ea(It.exec(o))+"g")),o.lastIndex=0;l=o.exec(c);)var f=l.index;h=h.slice(0,f===n?u:f)}}else if(t.indexOf(Lr(o),u)!=u){var p=h.lastIndexOf(o);p>-1&&(h=h.slice(0,p))}return h+r},oi.unescape=function(t){return(t=Ea(t))&&dt.test(t)?t.replace(ft,wn):t},oi.uniqueId=function(t){var e=++ie;return Ea(t)+e},oi.upperCase=au,oi.upperFirst=uu,oi.each=Es,oi.eachRight=As,oi.first=rs,yu(oi,(Mu={},ji(oi,function(t,e){ne.call(oi.prototype,e)||(Mu[e]=t)}),Mu),{chain:!1}),oi.VERSION="4.17.5",Be(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){oi[t].placeholder=oi}),Be(["drop","take"],function(t,e){hi.prototype[t]=function(i){i=i===n?1:jn(Ca(i),0);var r=this.__filtered__&&!e?new hi(this):this.clone();return r.__filtered__?r.__takeCount__=Dn(i,r.__takeCount__):r.__views__.push({size:Dn(i,O),type:t+(r.__dir__<0?"Right":"")}),r},hi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Be(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;hi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Lo(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),Be(["head","last"],function(t,e){var n="take"+(e?"Right":"");hi.prototype[t]=function(){return this[n](1).value()[0]}}),Be(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");hi.prototype[t]=function(){return this.__filtered__?new hi(this):this[n](1)}}),hi.prototype.compact=function(){return this.filter(_u)},hi.prototype.find=function(t){return this.filter(t).head()},hi.prototype.findLast=function(t){return this.reverse().find(t)},hi.prototype.invokeMap=fr(function(t,e){return"function"==typeof t?new hi(this):this.map(function(n){return qi(n,t,e)})}),hi.prototype.reject=function(t){return this.filter(qs(Lo(t)))},hi.prototype.slice=function(t,e){t=Ca(t);var i=this;return i.__filtered__&&(t>0||e<0)?new hi(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n&&(i=(e=Ca(e))<0?i.dropRight(-e):i.take(e-t)),i)},hi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},hi.prototype.toArray=function(){return this.take(O)},ji(hi.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=oi[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(oi.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof hi,h=a[0],l=u||na(e),c=function(t){var e=o.apply(oi,Ue([t],a));return r&&f?e[0]:e};l&&i&&"function"==typeof h&&1!=h.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,_=u&&!p;if(!s&&l){e=_?e:new hi(this);var g=t.apply(e,a);return g.__actions__.push({func:Ts,args:[c],thisArg:n}),new ui(g,f)}return d&&_?t.apply(this,a):(g=this.thru(c),d?r?g.value()[0]:g.value():g)})}),Be(["pop","push","shift","sort","splice","unshift"],function(t){var e=Jt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);oi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(na(r)?r:[],t)}return this[n](function(n){return e.apply(na(n)?n:[],t)})}}),ji(hi.prototype,function(t,e){var n=oi[e];if(n){var i=n.name+"";(Kn[i]||(Kn[i]=[])).push({name:e,func:n})}}),Kn[Qr(n,f).name]=[{name:"wrapper",func:n}],hi.prototype.clone=function(){var t=new hi(this.__wrapped__);return t.__actions__=Wr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Wr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Wr(this.__views__),t},hi.prototype.reverse=function(){if(this.__filtered__){var t=new hi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},hi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=na(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Dn(e,t+s);break;case"takeRight":t=jn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,h=i?a:s-1,l=this.__iteratees__,c=l.length,f=0,p=Dn(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return Or(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var _=-1,g=t[h+=e];++_<c;){var m=l[_],v=m.iteratee,y=m.type,b=v(g);if(2==y)g=b;else if(!b){if(1==y)continue t;break t}}d[f++]=g}return d},oi.prototype.at=Cs,oi.prototype.chain=function(){return Ps(this)},oi.prototype.commit=function(){return new ui(this.value(),this.__chain__)},oi.prototype.next=function(){this.__values__===n&&(this.__values__=Pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},oi.prototype.plant=function(t){for(var e,i=this;i instanceof ai;){var r=Jo(i);r.__index__=0,r.__values__=n,e?o.__wrapped__=r:e=r;var o=r;i=i.__wrapped__}return o.__wrapped__=t,e},oi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof hi){var e=t;return this.__actions__.length&&(e=new hi(this)),(e=e.reverse()).__actions__.push({func:Ts,args:[fs],thisArg:n}),new ui(e,this.__chain__)}return this.thru(fs)},oi.prototype.toJSON=oi.prototype.valueOf=oi.prototype.value=function(){return Or(this.__wrapped__,this.__actions__)},oi.prototype.first=oi.prototype.head,Pn&&(oi.prototype[Pn]=function(){return this}),oi}();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(we._=Ln,n(function(){return Ln})):xe?((xe.exports=Ln)._=Ln,Le._=Ln):we._=Ln}).call(A)});!function(t){t[t.CIRCLE=0]="CIRCLE",t[t.POLYGON=1]="POLYGON",t[t.MARKER=2]="MARKER",t[t.POLYLINE=3]="POLYLINE",t[t.LABEL=4]="LABEL",t[t.MULTIPOLYGON=5]="MULTIPOLYGON"}(z||(z={})),function(t){t[t.REGULAR=0]="REGULAR",t[t.RADIO_BUTTON=1]="RADIO_BUTTON",t[t.CHECK_BOX=2]="CHECK_BOX"}(B||(B={}));var j=I(function(t,e){!function(t){var e=Object.freeze;function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function s(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function a(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function h(){return!1}function l(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function f(t){return c(t).split(/\s+/)}function p(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function d(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var _=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(_,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var P=window.requestAnimationFrame||b("RequestAnimationFrame")||x,T=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(!n||P!==x)return P.call(window,r(t,e));t.call(e)}function O(t){t&&T.call(window,t)}var S=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:r,lastId:o,stamp:s,throttle:a,wrapNum:u,falseFn:h,formatNum:l,trim:c,splitWords:f,setOptions:p,getParamString:d,template:g,isArray:m,indexOf:v,emptyImageUrl:y,requestFn:P,cancelFn:T,requestAnimFrame:C,cancelAnimFrame:O});function M(){}M.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=i(r);for(var s in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(i(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},M.include=function(t){return n(this.prototype,t),this},M.mergeOptions=function(t){return n(this.prototype.options,t),this},M.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=f(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=f(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var s=i[r];if(s.ctx===n&&s.fn===e)return s.fn=h,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=h;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var A=M.extend(E);function k(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var I=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function z(t,e,n){return t instanceof k?t:m(t)?new k(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,e,n)}function B(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return!t||t instanceof B?t:new B(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function D(t,e){return t instanceof j?t:new j(t,e)}function Z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function N(t,e,n){return t instanceof Z?t:m(t)&&"object"!=typeof t[0]?3===t.length?new Z(t[0],t[1],t[2]):2===t.length?new Z(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new Z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new Z(t,e,n)}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},B.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new k(this.min.x,this.max.y)},getTopRight:function(){return new k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof k?z(t):R(t))instanceof B?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof Z)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(N(t)||D(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new Z(e.lat,e.lng),this._northEast=new Z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new j(new Z(e.lat-i,e.lng-r),new Z(n.lat+i,n.lng+r))},getCenter:function(){return new Z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Z(this.getNorth(),this.getWest())},getSouthEast:function(){return new Z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof Z||"lat"in t?N(t):D(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=D(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=D(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=D(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},Z.prototype={equals:function(t,e){return!!t&&(t=N(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,N(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return D([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new Z(this.lat,this.lng,this.alt)}};var U,W={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new B(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new Z(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new j(new Z(o.lat-i,o.lng-r),new Z(s.lat-i,s.lng-r))}},G=n({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new k(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new Z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=6378137*Math.PI,new B([-U,-U],[U,U]))};function F(t,e,n,i){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function H(t,e,n,i){return new F(t,e,n,i)}F.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new k((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var q=n({},G,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return H(t,.5,-t,.5)}()}),Y=n({},q,{code:"EPSG:900913"});function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(s=t[n]).length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?Ot?"z":"x":""}return u||"M0 0"}var J=document.documentElement.style,X="ActiveXObject"in window,Q=X&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Mt("webkit"),nt=Mt("android"),it=Mt("android 2")||Mt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Mt("Google")&&rt<537&&!("AudioNode"in window),st=!!window.opera,at=Mt("chrome"),ut=Mt("gecko")&&!et&&!st&&!X,ht=!at&&Mt("safari"),lt=Mt("phantom"),ct="OTransition"in J,ft=0===navigator.platform.indexOf("Win"),pt=X&&"transition"in J,dt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,_t="MozPerspective"in J,gt=!window.L_DISABLE_3D&&(pt||dt||_t)&&!ct&&!lt,mt="undefined"!=typeof orientation||Mt("mobile"),vt=mt&&et,yt=mt&&dt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),Lt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),xt=mt&&st,Pt=mt&&ut,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ct=!!document.createElement("canvas").getContext,Ot=!(!document.createElementNS||!$("svg").createSVGRect),St=!Ot&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Mt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Et=(Object.freeze||Object)({ie:X,ielt9:Q,edge:tt,webkit:et,android:nt,android23:it,androidStock:ot,opera:st,chrome:at,gecko:ut,safari:ht,phantom:lt,opera12:ct,win:ft,ie3d:pt,webkit3d:dt,gecko3d:_t,any3d:gt,mobile:mt,mobileWebkit:vt,mobileWebkit3d:yt,msPointer:bt,pointer:wt,touch:Lt,mobileOpera:xt,mobileGecko:Pt,retina:Tt,canvas:Ct,svg:Ot,vml:St}),At=bt?"MSPointerDown":"pointerdown",kt=bt?"MSPointerMove":"pointermove",It=bt?"MSPointerUp":"pointerup",zt=bt?"MSPointerCancel":"pointercancel",Bt=["INPUT","SELECT","OPTION"],Rt={},jt=!1,Dt=0;function Zt(t){Rt[t.pointerId]=t,Dt++}function Nt(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function Ut(t){delete Rt[t.pointerId],Dt--}function Wt(t,e){for(var n in t.touches=[],Rt)t.touches.push(Rt[n]);t.changedTouches=[t],e(t)}var Gt=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Vt=bt?"MSPointerUp":wt?"pointerup":"touchend",Ft="_leaflet_";function Ht(t,e,n){var i,r,o=!1,s=250;function a(t){var e;if(wt){if(!tt||"mouse"===t.pointerType)return;e=Dt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(i||n);r=t.touches?t.touches[0]:t,o=a>0&&a<=s,i=n}}function u(t){if(o&&!r.cancelBubble){if(wt){if(!tt||"mouse"===t.pointerType)return;var n,s,a={};for(s in r)n=r[s],a[s]=n&&n.bind?n.bind(r):n;r=a}r.type="dblclick",e(r),i=null}}return t[Ft+Gt+n]=a,t[Ft+Vt+n]=u,t[Ft+"dblclick"+n]=e,t.addEventListener(Gt,a,!1),t.addEventListener(Vt,u,!1),t.addEventListener("dblclick",e,!1),this}function qt(t,e){var n=t[Ft+Gt+e],i=t[Ft+Vt+e],r=t[Ft+"dblclick"+e];return t.removeEventListener(Gt,n,!1),t.removeEventListener(Vt,i,!1),tt||t.removeEventListener("dblclick",r,!1),this}function Yt(t,e,n,i){if("object"==typeof e)for(var r in e)Jt(t,r,e[r],n);else for(var o=0,s=(e=f(e)).length;o<s;o++)Jt(t,e[o],n,i);return this}var $t="_leaflet_events";function Kt(t,e,n,i){if("object"==typeof e)for(var r in e)Xt(t,r,e[r],n);else if(e)for(var o=0,s=(e=f(e)).length;o<s;o++)Xt(t,e[o],n,i);else{for(var a in t[$t])Xt(t,a,t[$t][a]);delete t[$t]}return this}function Jt(t,e,n,i){var o=e+s(n)+(i?"_"+s(i):"");if(t[$t]&&t[$t][o])return this;var a=function(e){return n.call(i||t,e||window.event)},u=a;wt&&0===e.indexOf("touch")?function(t,e,n,i){"touchstart"===e?function(t,e,n){var i=r(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Bt.indexOf(t.target.tagName)<0))return;ne(t)}Wt(t,e)});t["_leaflet_touchstart"+n]=i,t.addEventListener(At,i,!1),jt||(document.documentElement.addEventListener(At,Zt,!0),document.documentElement.addEventListener(kt,Nt,!0),document.documentElement.addEventListener(It,Ut,!0),document.documentElement.addEventListener(zt,Ut,!0),jt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Wt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(kt,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Wt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(It,i,!1),t.addEventListener(zt,i,!1)}(t,n,i)}(t,e,a,o):!Lt||"dblclick"!==e||!Ht||wt&&at?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,ce(t,e)&&u(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&nt&&(a=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=ae&&n-ae;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?ie(t):(ae=n,e(t))}(t,u)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):Ht(t,a,o),t[$t]=t[$t]||{},t[$t][o]=a}function Xt(t,e,n,i){var r=e+s(n)+(i?"_"+s(i):""),o=t[$t]&&t[$t][r];if(!o)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(At,i,!1):"touchmove"===e?t.removeEventListener(kt,i,!1):"touchend"===e&&(t.removeEventListener(It,i,!1),t.removeEventListener(zt,i,!1))}(t,e,r):!Lt||"dblclick"!==e||!qt||wt&&at?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):qt(t,r),t[$t][r]=null}function Qt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,le(t),this}function te(t){return Jt(t,"mousewheel",Qt),this}function ee(t){return Yt(t,"mousedown touchstart dblclick",Qt),Jt(t,"click",he),this}function ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ie(t){return ne(t),Qt(t),this}function re(t,e){if(!e)return new k(t.clientX,t.clientY);var n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,r=n.height/e.offsetHeight||1;return new k(t.clientX/i-n.left-e.clientLeft,t.clientY/r-n.top-e.clientTop)}var oe=ft&&at?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function se(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/oe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var ae,ue={};function he(t){ue[t.type]=!0}function le(t){var e=ue[t.type];return ue[t.type]=!1,e}function ce(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var fe,pe,de,_e,ge,me=(Object.freeze||Object)({on:Yt,off:Kt,stopPropagation:Qt,disableScrollPropagation:te,disableClickPropagation:ee,preventDefault:ne,stop:ie,getMousePosition:re,getWheelDelta:se,fakeStop:he,skipped:le,isExternalTarget:ce,addListener:Yt,removeListener:Kt}),ve=ze(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),ye=ze(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),be="webkitTransition"===ye||"OTransition"===ye?ye+"End":"transitionend";function we(t){return"string"==typeof t?document.getElementById(t):t}function Le(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function xe(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function Pe(t){var e=t.parentNode;e&&e.removeChild(t)}function Te(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ce(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function Oe(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Se(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ke(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function Me(t,e){if(void 0!==t.classList)for(var n=f(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!Se(t,e)){var o=ke(t);Ae(t,(o?o+" ":"")+e)}}function Ee(t,e){void 0!==t.classList?t.classList.remove(e):Ae(t,c((" "+ke(t)+" ").replace(" "+e+" "," ")))}function Ae(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ke(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function Ie(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ze(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Be(t,e,n){var i=e||new k(0,0);t.style[ve]=(pt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Re(t,e){t._leaflet_pos=e,gt?Be(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function je(t){return t._leaflet_pos||new k(0,0)}if("onselectstart"in document)fe=function(){Yt(window,"selectstart",ne)},pe=function(){Kt(window,"selectstart",ne)};else{var De=ze(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fe=function(){if(De){var t=document.documentElement.style;de=t[De],t[De]="none"}},pe=function(){De&&(document.documentElement.style[De]=de,de=void 0)}}function Ze(){Yt(window,"dragstart",ne)}function Ne(){Kt(window,"dragstart",ne)}function Ue(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(We(),_e=t,ge=t.style.outline,t.style.outline="none",Yt(window,"keydown",We))}function We(){_e&&(_e.style.outline=ge,_e=void 0,ge=void 0,Kt(window,"keydown",We))}var Ge=(Object.freeze||Object)({TRANSFORM:ve,TRANSITION:ye,TRANSITION_END:be,get:we,getStyle:Le,create:xe,remove:Pe,empty:Te,toFront:Ce,toBack:Oe,hasClass:Se,addClass:Me,removeClass:Ee,setClass:Ae,getClass:ke,setOpacity:Ie,testProp:ze,setTransform:Be,setPosition:Re,getPosition:je,disableTextSelection:fe,enableTextSelection:pe,disableImageDrag:Ze,enableImageDrag:Ne,preventOutline:Ue,restoreOutline:We}),Ve=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=je(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Re(this._el,n),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Fe=A.extend({options:{crs:q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(N(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=ye&&gt&&!xt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Yt(this._proxy,be,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(N(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof k?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():D(t);var n=z(e.paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r);return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=D(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=z(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ve,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){Me(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom;t=N(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),u=a*this.getZoomScale(s,e),h=r.distanceTo(i)||1,l=1.42,c=l*l;function f(t){var e=(u*u-a*a+(t?-1:1)*c*c*h*h)/(2*(t?u:a)*c*h),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var _=f(0);var g=Date.now(),m=(f(1)-_)/l,v=n.duration?1e3*n.duration:1e3*m*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-g)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*m;o<=1?(this._flyToFrame=C(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(function(t){return a*(d(_)*(p(e=_+l*t)/d(e))-p(_))/c;var e}(u)/h)),s),this.getScaleZoom(a/function(t){return a*(d(_)/d(_+l*t))}(u),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=D(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,D(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),s=i.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new Z(t.coords.latitude,t.coords.longitude),n=e.toBounds(t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)Pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=xe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=D(t),n=z(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),h=R(this.project(a,i),this.project(s,i)).getSize(),l=gt?this.options.zoomSnap:1,c=u.x/h.x,f=u.y/h.y,p=e?Math.max(c,f):Math.min(c,f);return i=this.getScaleZoom(p,i),l&&(i=Math.round(i/(l/100))*(l/100),i=e?Math.ceil(i/l)*l:Math.floor(i/l)*l),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new B(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(N(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){var e=z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(N(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(D(t))},distance:function(t,e){return this.options.crs.distance(N(t),N(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=we(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Yt(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,Me(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(Tt?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(ht?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Le(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Re(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(t.markerPane,"leaflet-zoom-hide"),Me(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Re(this._mapPane,new k(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Re(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?Kt:Yt;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!ce(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||a||r||!ce(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!le(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ue(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&ne(t);var s={originalEvent:t};if("keypress"!==t.type){var a=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(e,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return je(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new B(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new B(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new k(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=gt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ee(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ve,n=this._proxy.style[e];Be(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();Be(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pe(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(C(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ee(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),C(function(){this._moveEnd(!0)},this))}}),He=M.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return Me(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(Pe(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),qe=function(t){return new He(t)};Fe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=xe("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=xe("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Pe(this._controlCorners[t]);Pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ye=He.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return He.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Me(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):Ee(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ee(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=xe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ee(e),te(e);var i=this._form=xe("form",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Yt(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=xe("a",t+"-toggle",e);r.href="#",r.title="Layers",Lt?(Yt(r,"click",ie),Yt(r,"click",this.expand,this)):Yt(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=xe("div",t+"-base",i),this._separator=xe("div",t+"-separator",i),this._overlaysList=xe("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Te(this._baseLayersList),Te(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=s(t.layer),Yt(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),$e=He.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=xe("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=xe("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),ee(o),Yt(o,"click",ie),Yt(o,"click",r,this),Yt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Ee(this._zoomInButton,e),Ee(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&Me(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&Me(this._zoomInButton,e)}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))});var Ke=He.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=xe("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=xe("div",e,n)),t.imperial&&(this._iScale=xe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Je=He.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),ee(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&(new Je).addTo(this)}),He.Layers=Ye,He.Zoom=$e,He.Scale=Ke,He.Attribution=Je,qe.layers=function(t,e,n){return new Ye(t,e,n)},qe.zoom=function(t){return new $e(t)},qe.scale=function(t){return new Ke(t)},qe.attribution=function(t){return new Je(t)};var Xe=M.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xe.addTo=function(t,e){return t.addHandler(e,this),this};var Qe,tn={Events:E},en=Lt?"touchstart mousedown":"mousedown",nn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},rn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},on=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Yt(this._dragStartTarget,en,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(on._dragging===this&&this.finishDrag(),Kt(this._dragStartTarget,en,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Se(this._element,"leaflet-zoom-anim")&&!(on._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(on._dragging=this,this._preventOutline&&Ue(this._element),Ze(),fe(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new k(e.clientX,e.clientY),Yt(document,rn[t.type],this._onMove,this),Yt(document,nn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new k(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=je(this._element).subtract(n),Me(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,O(this._animRequest),this._lastEvent=t,this._animRequest=C(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Re(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in Ee(document.body,"leaflet-dragging"),this._lastTarget&&(Ee(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn)Kt(document,rn[t],this._onMove,this),Kt(document,nn[t],this._onUp,this);Ne(),pe(),this._moved&&this._moving&&(O(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,on._dragging=!1}});function sn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var s,a,u,h=0;for(a=r+1;a<=o-1;a++)(u=cn(e[a],e[r],e[o],!0))>h&&(s=a,h=u);h>i&&(n[s]=1,t(e,n,i,r,s),t(e,n,i,s,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)s=t[i],(u=(a=t[r]).x-s.x)*u+(h=a.y-s.y)*h>e&&(n.push(t[i]),r=i);var s,a,u,h;return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function an(t,e,n){return Math.sqrt(cn(t,e,n,!0))}function un(t,e,n,i,r){var o,s,a,u=i?Qe:ln(t,n),h=ln(e,n);for(Qe=h;;){if(!(u|h))return[t,e];if(u&h)return!1;a=ln(s=hn(t,e,o=u||h,n,r),n),o===u?(t=s,u=a):(e=s,h=a)}}function hn(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,h=i.min,l=i.max;return 8&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):4&n?(o=t.x+a*(h.y-t.y)/u,s=h.y):2&n?(o=l.x,s=t.y+u*(l.x-t.x)/a):1&n&&(o=h.x,s=t.y+u*(h.x-t.x)/a),new k(o,s,r)}function ln(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function cn(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,h=a*a+u*u;return h>0&&((r=((t.x-o)*a+(t.y-s)*u)/h)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new k(o,s)}function fn(t){return!m(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function pn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fn(t)}var dn=(Object.freeze||Object)({simplify:sn,pointToSegmentDistance:an,closestPointOnSegment:function(t,e,n){return cn(t,e,n)},clipSegment:un,_getEdgeIntersection:hn,_getBitCode:ln,_sqClosestPointOnSegment:cn,isFlat:fn,_flat:pn});function _n(t,e,n){var i,r,o,s,a,u,h,l,c,f=[1,4,2,8];for(r=0,h=t.length;r<h;r++)t[r]._code=ln(t[r],e);for(s=0;s<4;s++){for(l=f[s],i=[],r=0,o=(h=t.length)-1;r<h;o=r++)a=t[r],u=t[o],a._code&l?u._code&l||((c=hn(u,a,l,e,n))._code=ln(c,e),i.push(c)):(u._code&l&&((c=hn(u,a,l,e,n))._code=ln(c,e),i.push(c)),i.push(a));t=i}return t}var gn=(Object.freeze||Object)({clipPolygon:_n}),mn={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new Z(t.y,t.x)},bounds:new B([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new k(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,h=.1;u<15&&Math.abs(h)>1e-7;u++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=h=Math.PI/2-2*Math.atan(s*e)-a;return new Z(a*n,t.x*n/i)}},yn=(Object.freeze||Object)({LonLat:mn,Mercator:vn,SphericalMercator:V}),bn=n({},G,{code:"EPSG:3395",projection:vn,transformation:function(){var t=.5/(Math.PI*vn.R);return H(t,.5,-t,.5)}()}),wn=n({},G,{code:"EPSG:4326",projection:mn,transformation:H(1/180,1,-1/180,.5)}),Ln=n({},W,{projection:mn,transformation:H(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});W.Earth=G,W.EPSG3395=bn,W.EPSG3857=q,W.EPSG900913=Y,W.EPSG4326=wn,W.Simple=Ln;var xn=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Fe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?m(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=xn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),Tn=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Cn=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=z(i),o=z("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Tt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=Cn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Cn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=xe("div","leaflet-default-icon-path",document.body),e=Le(t,"background-image")||Le(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Sn=Xe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new on(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ee(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),u=R(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!u.contains(o)){var h=z((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);n.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=je(e._icon),r=e._map.layerPointToLatLng(i);n&&Re(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=xn.extend({options:{icon:new On,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){p(this,e),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),Me(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(Me(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pe(this._shadow),this._shadow=null},_setPos:function(t){Re(this._icon,t),this._shadow&&Re(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Ie(this._icon,t),this._shadow&&Ie(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),En=xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),An=En.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=N(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return En.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new B(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),kn=An.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:En.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===G.distance){var r=Math.PI/180,o=this._mRadius/G.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),h=n.unproject(u).lat,l=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(h*r))/(Math.cos(e*r)*Math.cos(h*r)))/r;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:u.x-n.project([h,t-l]).x,this._radiusY=u.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),In=En.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=cn,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],h=1,l=u.length;h<l;h++){var c=o(t,e=u[h-1],n=u[h],!0);c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(r=a[t],o=a[t+1],(i+=n=r.distanceTo(o))>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=N(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=fn(t),i=0,r=t.length;i<r;i++)n?(e[i]=N(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new k(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof Z,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=un(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=sn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((e||0!==i)&&an(t,a[r],a[i])<=u)return!0;return!1}});In._flat=pn;var zn=In.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,u,h=this._rings[0],l=h.length;if(!l)return null;for(o=s=a=0,t=0,e=l-1;t<l;e=t++)n=h[t],i=h[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return u=0===o?h[0]:[s/o,a/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=In.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof Z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){In.prototype._setLatLngs.call(this,t),fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new k(e,e);if(t=new B(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=_n(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,h=!1;if(!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(u=(e=this._parts[r]).length)-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(h=!h);return h||In.prototype._containsPoint.call(this,t,!0)}}),Bn=Tn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=m(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Rn(t,o);return s?(s.feature=Wn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Rn(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],h=e&&e.pointToLayer,l=e&&e.coordsToLatLng||jn;if(!a&&!s)return null;switch(s.type){case"Point":return n=l(a),h?h(t,n):new Mn(n);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=l(a[r]),u.push(h?h(t,n):new Mn(n));return new Tn(u);case"LineString":case"MultiLineString":return i=Dn(a,"LineString"===s.type?0:1,l),new In(i,e);case"Polygon":case"MultiPolygon":return i=Dn(a,"Polygon"===s.type?1:2,l),new zn(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=Rn({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);c&&u.push(c)}return new Tn(u);default:throw new Error("Invalid GeoJSON object.")}}function jn(t){return new Z(t[1],t[0],t[2])}function Dn(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Dn(t[o],e-1,n):(n||jn)(t[o]),r.push(i);return r}function Zn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function Nn(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Nn(t[o],e-1,n,i):Zn(t[o],i));return!e&&n&&r.push(r[0]),r}function Un(t,e){return t.feature?n({},t.feature,{geometry:e}):Wn(e)}function Wn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Gn={toGeoJSON:function(t){return Un(this,{type:"Point",coordinates:Zn(this.getLatLng(),t)})}};function Vn(t,e){return new Bn(t,e)}Mn.include(Gn),kn.include(Gn),An.include(Gn),In.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=Nn(this._latlngs,e?1:0,!1,t);return Un(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),zn.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=e&&!fn(this._latlngs[0]),i=Nn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Un(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Pn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Un(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Wn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?Un(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Fn=Vn,Hn=xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=D(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ce(this._image),this},bringToBack:function(){return this._map&&Oe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=D(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:xe("img");Me(e,"leaflet-image-layer"),this._zoomAnimated&&Me(e,"leaflet-zoom-animated"),this.options.className&&Me(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Be(this._image,n,e)},_reset:function(){var t=this._image,e=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Re(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Ie(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),qn=Hn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:xe("video");if(Me(e,"leaflet-image-layer"),this._zoomAnimated&&Me(e,"leaflet-zoom-animated"),e.onselectstart=h,e.onmousemove=h,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{m(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var a=xe("source");a.src=this._url[s],e.appendChild(a)}}}}),Yn=xn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ie(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ie(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Ie(this._container,0),this._removeTimeout=setTimeout(r(Pe,void 0,this._container),200)):Pe(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ce(this._container),this},bringToBack:function(){return this._map&&Oe(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?Re(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),$n=Yn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Yn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof En||this._source.on("preclick",Qt))},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof En||this._source.off("preclick",Qt))},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=xe("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=xe("div",t+"-content-wrapper",e);if(this._contentNode=xe("div",t+"-content",n),ee(n),te(this._contentNode),Yt(n,"contextmenu",Qt),this._tipContainer=xe("div",t+"-tip-container",e),this._tip=xe("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=xe("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Yt(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight;r&&i>r?(e.height=r+"px",Me(t,"leaflet-popup-scrolled")):Ee(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Re(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(Le(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new k(this._containerLeft,-n-this._containerBottom);r._add(je(this._container));var o=t.layerPointToContainerPoint(r),s=z(this.options.autoPanPadding),a=z(this.options.autoPanPaddingTopLeft||s),u=z(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),l=0,c=0;o.x+i+u.x>h.x&&(l=o.x+i-h.x+u.x),o.x-l-a.x<0&&(l=o.x-a.x),o.y+n+u.y>h.y&&(c=o.y+n-h.y+u.y),o.y-c-a.y<0&&(c=o.y-a.y),(l||c)&&t.fire("autopanstart").panBy([l,c])}},_onCloseButtonClick:function(t){this._close(),ie(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(t,e,n){return t instanceof $n||(t=new $n(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),xn.include({bindPopup:function(t,e){return t instanceof $n?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new $n(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof xn||(e=t,t=this),t instanceof Tn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ie(t),e instanceof En?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Kn=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Yn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Yn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Yn.prototype.getEvents.call(this);return Lt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,u=z(this.options.offset),h=this._getAnchor();"top"===o?t=t.add(z(-s/2+u.x,-a+u.y+h.y,!0)):"bottom"===o?t=t.subtract(z(s/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(z(s/2+u.x,a/2-h.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(z(u.x+h.x,h.y-a/2+u.y,!0))):(o="left",t=t.subtract(z(s+h.x-u.x,a/2-h.y-u.y,!0))),Ee(n,"leaflet-tooltip-right"),Ee(n,"leaflet-tooltip-left"),Ee(n,"leaflet-tooltip-top"),Ee(n,"leaflet-tooltip-bottom"),Me(n,"leaflet-tooltip-"+o),Re(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ie(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Fe.include({openTooltip:function(t,e,n){return t instanceof Kn||(t=new Kn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),xn.include({bindTooltip:function(t,e){return t instanceof Kn?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Kn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Lt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof xn||(e=t,t=this),t instanceof Tn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(Me(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Ee(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Jn=Cn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=z(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Cn.Default=On;var Xn=xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Oe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){Ie(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);Ie(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(O(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(Pe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Pe(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new k(+r,+o);a.z=+s;var u=this._tileCoordsToKey(a),h=this._tiles[u];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new k(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?Be(t.el,r,i):Re(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new B(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new B(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var l=this._tiles[h].coords;l.z===this._tileZoom&&u.contains(new k(l.x,l.y))||(this._tiles[h].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var c=r.min.y;c<=r.max.y;c++)for(var f=r.min.x;f<=r.max.x;f++){var p=new k(f,c);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var _=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],_);this._level.el.appendChild(_)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return D(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new k(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ot||e.el.setAttribute("src",y),Pe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Me(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=h,t.onmousemove=h,Q&&this.options.opacity<1&&Ie(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&C(r(this._tileReady,this,t,null,o)),Re(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Ie(n.el,0),O(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(Me(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new k(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new B(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Qn=Xn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Tt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Yt(n,"load",r(this._tileOnLoad,this,e,n)),Yt(n,"error",r(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Tt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=h,e.onerror=h,e.complete||(e.src=y,Pe(e),delete this._tiles[t]))}});function ti(t,e){return new Qn(t,e)}var ei=Qn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var o=(e=p(this,e)).detectRetina&&Tt?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Qn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=R(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===wn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+d(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});Qn.WMS=ei,ti.wms=function(t,e){return new ei(t,e)};var ni=xn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=je(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e).subtract(o),a=r.multiplyBy(-n).add(i).add(r).subtract(s);gt?Be(this._container,a,n):Re(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new B(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ii=ni.extend({getEvents:function(){var t=ni.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Yt(t,"mousemove",a(this._onMouseMove,32,this),this),Yt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Yt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,Pe(this._container),Kt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},ni.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Tt?2:1;Re(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Tt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(he(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(Me(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function ri(t){return Ct?new ii(t):null}var oi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),si={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ni.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=oi("shape");Me(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=oi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Pe(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=oi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=m(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=oi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ce(t._container)},_bringToBack:function(t){Oe(t._container)}},ai=St?oi:$,ui=ni.extend({getEvents:function(){var t=ni.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=ai("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ai("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pe(this._container),Kt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ni.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Re(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ai("path");t.options.className&&Me(e,t.options.className),t.options.interactive&&Me(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ce(t._path)},_bringToBack:function(t){Oe(t._path)}});function hi(t){return Ot||St?new ui(t):null}St&&ui.include(si),Fe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ri()||hi()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=ui&&hi({pane:t})||ii&&ri({pane:t}),this._paneRenderers[t]=e),e}});var li=zn.extend({initialize:function(t,e){zn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=D(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});ui.create=ai,ui.pointsToPath=K,Bn.geometryToLayer=Rn,Bn.coordsToLatLng=jn,Bn.coordsToLatLngs=Dn,Bn.latLngToCoords=Zn,Bn.latLngsToCoords=Nn,Bn.getFeature=Un,Bn.asFeature=Wn,Fe.mergeOptions({boxZoom:!0});var ci=Xe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),fe(),Ze(),this._startPoint=this._map.mouseEventToContainerPoint(t),Yt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new B(this._point,this._startPoint),n=e.getSize();Re(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Pe(this._box),Ee(this._container,"leaflet-crosshair")),pe(),Ne(),Kt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Fe.addInitHook("addHandler","boxZoom",ci),Fe.mergeOptions({doubleClickZoom:!0});var fi=Xe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Fe.addInitHook("addHandler","doubleClickZoom",fi),Fe.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pi=Xe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new on(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ee(this._map._container,"leaflet-grab"),Ee(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=D(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,u),l=a.multiplyBy(h/u),c=h/(n.inertiaDeceleration*s),f=l.multiplyBy(-c/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),C(function(){e.panBy(f,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Fe.addInitHook("addHandler","dragging",pi),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var di=Xe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Yt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=z(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}ie(t)}}});Fe.addInitHook("addHandler","keyboard",di),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _i=Xe.extend({addHooks:function(){Yt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=se(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),ie(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Fe.addInitHook("addHandler","scrollWheelZoom",_i),Fe.mergeOptions({tap:!0,tapTolerance:15});var gi=Xe.extend({addHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ne(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new k(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&Me(n,"leaflet-active"),this._holdTimeout=setTimeout(r(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Yt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Kt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Ee(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new k(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Lt&&!wt&&Fe.addInitHook("addHandler","tap",gi),Fe.mergeOptions({touchZoom:Lt&&!it,bounceAtZoomLimits:!0});var mi=Xe.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend",this._onTouchEnd,this),ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var a=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=C(a,this,!0),ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,O(this._animRequest),Kt(document,"touchmove",this._onTouchMove),Kt(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Fe.addInitHook("addHandler","touchZoom",mi),Fe.BoxZoom=ci,Fe.DoubleClickZoom=fi,Fe.Drag=pi,Fe.Keyboard=di,Fe.ScrollWheelZoom=_i,Fe.Tap=gi,Fe.TouchZoom=mi;var vi=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=function(){return window.L=vi,this},t.Control=He,t.control=qe,t.Browser=Et,t.Evented=A,t.Mixin=tn,t.Util=S,t.Class=M,t.Handler=Xe,t.extend=n,t.bind=r,t.stamp=s,t.setOptions=p,t.DomEvent=me,t.DomUtil=Ge,t.PosAnimation=Ve,t.Draggable=on,t.LineUtil=dn,t.PolyUtil=gn,t.Point=k,t.point=z,t.Bounds=B,t.bounds=R,t.Transformation=F,t.transformation=H,t.Projection=yn,t.LatLng=Z,t.latLng=N,t.LatLngBounds=j,t.latLngBounds=D,t.CRS=W,t.GeoJSON=Bn,t.geoJSON=Vn,t.geoJson=Fn,t.Layer=xn,t.LayerGroup=Pn,t.layerGroup=function(t,e){return new Pn(t,e)},t.FeatureGroup=Tn,t.featureGroup=function(t){return new Tn(t)},t.ImageOverlay=Hn,t.imageOverlay=function(t,e,n){return new Hn(t,e,n)},t.VideoOverlay=qn,t.videoOverlay=function(t,e,n){return new qn(t,e,n)},t.DivOverlay=Yn,t.Popup=$n,t.popup=function(t,e){return new $n(t,e)},t.Tooltip=Kn,t.tooltip=function(t,e){return new Kn(t,e)},t.Icon=Cn,t.icon=function(t){return new Cn(t)},t.DivIcon=Jn,t.divIcon=function(t){return new Jn(t)},t.Marker=Mn,t.marker=function(t,e){return new Mn(t,e)},t.TileLayer=Qn,t.tileLayer=ti,t.GridLayer=Xn,t.gridLayer=function(t){return new Xn(t)},t.SVG=ui,t.svg=hi,t.Renderer=ni,t.Canvas=ii,t.canvas=ri,t.Path=En,t.CircleMarker=An,t.circleMarker=function(t,e){return new An(t,e)},t.Circle=kn,t.circle=function(t,e,n){return new kn(t,e,n)},t.Polyline=In,t.polyline=function(t,e){return new In(t,e)},t.Polygon=zn,t.polygon=function(t,e){return new zn(t,e)},t.Rectangle=li,t.rectangle=function(t,e){return new li(t,e)},t.Map=Fe,t.map=function(t,e){return new Fe(t,e)}}(e)});!function(){function t(e){return this instanceof t?(this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new t(e)}t.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,e){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=e||15;var n=this._circle=document.createElement("canvas"),i=n.getContext("2d"),r=this._r=t+e;return n.width=n.height=2*r,i.shadowOffsetX=i.shadowOffsetY=200,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(r-200,r-200,t,0,2*Math.PI,!0),i.closePath(),i.fill(),this},gradient:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),i=n.createLinearGradient(0,0,0,256);for(var r in e.width=1,e.height=256,t)i.addColorStop(r,t[r]);return n.fillStyle=i,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,i=0,r=this._data.length;r>i;i++)n=this._data[i],e.globalAlpha=Math.max(n[2]/this._max,t||.05),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var o=e.getImageData(0,0,this._width,this._height);return this._colorize(o.data,this._grad),e.putImageData(o,0,0),this},_colorize:function(t,e){for(var n,i=3,r=t.length;r>i;i+=4)(n=4*t[i])&&(t[i-3]=e[n],t[i-2]=e[n+1],t[i-1]=e[n+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var n=this._map.getSize();t.width=n.x,t.height=n.y;var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(i?"animated":"hide")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var t,e,n,i,r,o,s,a,u,h=[],l=this._heat._r,c=this._map.getSize(),f=new L.Bounds(L.point([-l,-l]),c.add([l,l])),p=void 0===this.options.max?1:this.options.max,d=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,_=1/Math.pow(2,Math.max(0,Math.min(d-this._map.getZoom(),12))),g=l/2,m=[],v=this._map._getMapPanePos(),y=v.x%g,b=v.y%g;for(t=0,e=this._latlngs.length;e>t;t++)n=this._map.latLngToContainerPoint(this._latlngs[t]),f.contains(n)&&(r=Math.floor((n.x-y)/g)+2,o=Math.floor((n.y-b)/g)+2,u=(void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1)*_,m[o]=m[o]||[],(i=m[o][r])?(i[0]=(i[0]*i[2]+n.x*u)/(i[2]+u),i[1]=(i[1]*i[2]+n.y*u)/(i[2]+u),i[2]+=u):m[o][r]=[n.x,n.y,u]);for(t=0,e=m.length;e>t;t++)if(m[t])for(s=0,a=m[t].length;a>s;s++)(i=m[t][s])&&h.push([Math.round(i[0]),Math.round(i[1]),Math.min(i[2],p)]);this._heat.data(h).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+e+")"}}),L.heatLayer=function(t,e){return new L.HeatLayer(t,e)},I(function(t,e){!function(t){var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,n=this._zoom;if(t.__parent)for(;e.__parent._zoom>=n;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var n,i=this._featureGroup,r=this._nonPointGroup,o=this.options.chunkedLoading,s=this.options.chunkInterval,a=this.options.chunkProgress,u=t.length,h=0,l=!0;if(this._map){var c=(new Date).getTime(),f=L.bind(function(){for(var p=(new Date).getTime();h<u;h++){if(o&&h%200==0)if((new Date).getTime()-p>s)break;if((n=t[h])instanceof L.LayerGroup)l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(n,t),u=t.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),e||this.fire("layeradd",{layer:n}),n.__parent&&2===n.__parent.getChildCount())){var d=n.__parent.getAllChildMarkers(),_=d[0]===n?d[1]:d[0];i.removeLayer(_)}}else r.addLayer(n),e||this.fire("layeradd",{layer:n})}a&&a(h,u,(new Date).getTime()-c),h===u?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(f,this.options.chunkDelay)},this);f()}else for(var p=this._needsClustering;h<u;h++)(n=t[h])instanceof L.LayerGroup?(l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(n,t),u=t.length):n.getLatLng?this.hasLayer(n)||p.push(n):r.addLayer(n);return this},removeLayers:function(t){var e,n,i=t.length,r=this._featureGroup,o=this._nonPointGroup,s=!0;if(!this._map){for(e=0;e<i;e++)(n=t[e])instanceof L.LayerGroup?(s&&(t=t.slice(),s=!1),this._extractNonGroupLayers(n,t),i=t.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var a=t.slice(),u=i;for(e=0;e<u;e++)(n=a[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,a),u=a.length):this._unspiderfyLayer(n)}for(e=0;e<i;e++)(n=t[e])instanceof L.LayerGroup?(s&&(t=t.slice(),s=!1),this._extractNonGroupLayers(n,t),i=t.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),r.hasLayer(n)&&(r.removeLayer(n),n.clusterShow&&n.clusterShow())):(o.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var n,i,r,o=this._needsClustering.slice(),s=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),i=o.length-1;i>=0;i--){for(n=!0,r=s.length-1;r>=0;r--)if(s[r].layer===o[i]){n=!1;break}n&&t.call(e,o[i])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(n){L.stamp(n)===t&&(e=n)}),e},hasLayer:function(t){if(!t)return!1;var e,n=this._needsClustering;for(e=n.length-1;e>=0;e--)if(n[e]===t)return!0;for(e=(n=this._needsRemoving).length-1;e>=0;e--)if(n[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var n=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,n,i;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,n=this._needsRemoving.length;e<n;e++)(i=this._needsRemoving[e]).newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(e=0,n=this._needsRemoving.length;e<n;e++)i=this._needsRemoving[e],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return t.splice(n,1),!0},_removeFromGridUnclustered:function(t,e){for(var n=this._map,i=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());e>=r&&i[e].removeObject(t,n.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,n){t._latlng=e,this.removeLayer(t),t._latlng=n,this.addLayer(t)},_childMarkerDragEnd:function(t){t.target.__dragStart&&this._moveChild(t.target,t.target.__dragStart,t.target._latlng),delete t.target.__dragStart},_removeLayer:function(t,e,n){var i=this._gridClusters,r=this._gridUnclustered,o=this._featureGroup,s=this._map,a=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var u,h=t.__parent,l=h._markers;for(this._arraySplice(l,t);h&&(h._childCount--,h._boundsNeedUpdate=!0,!(h._zoom<a));)e&&h._childCount<=1?(u=h._markers[0]===t?h._markers[1]:h._markers[0],i[h._zoom].removeObject(h,s.project(h._cLatLng,h._zoom)),r[h._zoom].addObject(u,s.project(u.getLatLng(),h._zoom)),this._arraySplice(h.__parent._childClusters,h),h.__parent._markers.push(u),u.__parent=h.__parent,h._icon&&(o.removeLayer(h),n||o.addLayer(u))):h._iconNeedsUpdate=!0,h=h.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,n){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,n)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),n=" marker-cluster-";return n+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(e||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,n=e;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(t||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;"function"!=typeof n&&(i=function(){return n}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;r>=e;r--)this._gridClusters[r]=new L.DistanceGrid(i(r)),this._gridUnclustered[r]=new L.DistanceGrid(i(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var n,i,r=this._gridClusters,o=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=s;e--){n=this._map.project(t.getLatLng(),e);var a=r[e].getNearObject(n);if(a)return a._addChild(t),void(t.__parent=a);if(a=o[e].getNearObject(n)){var u=a.__parent;u&&this._removeLayer(a,!1);var h=new this._markerCluster(this,e,a,t);r[e].addObject(h,this._map.project(h._cLatLng,e)),a.__parent=h,t.__parent=h;var l=h;for(i=e-1;i>u._zoom;i--)l=new this._markerCluster(this,i,l),r[i].addObject(l,this._map.project(a.getLatLng(),i));return u._addChild(l),void this._removeFromGridUnclustered(a,e)}o[e].addObject(t,n)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var n=e.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var n,i=t.getLayers(),r=0;for(e=e||[];r<i.length;r++)(n=i[r])instanceof L.LayerGroup?this._extractNonGroupLayers(n,e):e.push(n);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var n,i=this._getExpandedVisibleBounds(),r=this._featureGroup,o=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,o,function(o){var s,a=o._latlng,u=o._markers;for(i.contains(a)||(a=null),o._isSingleParent()&&t+1===e?(r.removeLayer(o),o._recursivelyAddChildrenToMap(null,e,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(a,e,i)),n=u.length-1;n>=0;n--)s=u[n],i.contains(s._latlng)||r.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),r.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,o,function(t){r.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var n=this,i=this._featureGroup;i.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){i.removeLayer(t),t.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,n){var i=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(i,r,e+1,n);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===t._childCount){var s=t._markers[0];this._ignoreMove=!0,s.setLatLng(s.getLatLng()),this._ignoreMove=!1,s.clusterShow&&s.clusterShow()}else t._recursively(i,n,r,function(t){t._recursivelyRemoveChildrenFromMap(i,r,e+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,n=this._childClusters.slice(),i=this._group._map,r=i.getBoundsZoom(this._bounds),o=this._zoom+1,s=i.getZoom();n.length>0&&r>o;){o++;var a=[];for(e=0;e<n.length;e++)a=a.concat(n[e]._childClusters);n=a}r>o?this._group._map.setView(this._latlng,o):r<=s?this._group._map.setView(this._latlng,s+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,n,i,r=this._markers,o=this._childClusters,s=0,a=0,u=this._childCount;if(0!==u){for(this._resetBounds(),t=0;t<r.length;t++)n=r[t]._latlng,this._bounds.extend(n),s+=n.lat,a+=n.lng;for(t=0;t<o.length;t++)(e=o[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),n=e._wLatLng,i=e._childCount,s+=n.lat*i,a+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(s/u,a/u),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,n){this._recursively(t,this._group._map.getMinZoom(),n-1,function(t){var n,i,r=t._markers;for(n=r.length-1;n>=0;n--)(i=r[n])._icon&&(i._setPos(e),i.clusterHide())},function(t){var n,i,r=t._childClusters;for(n=r.length-1;n>=0;n--)(i=r[n])._icon&&(i._setPos(e),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,n,i){this._recursively(t,i,e,function(r){r._recursivelyAnimateChildrenIn(t,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),n),r._isSingleParent()&&n-1===i?(r.clusterShow(),r._recursivelyRemoveChildrenFromMap(t,e,n)):r.clusterHide(),r._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,n){this._recursively(n,this._group._map.getMinZoom()-1,e,function(i){if(e!==i._zoom)for(var r=i._markers.length-1;r>=0;r--){var o=i._markers[r];n.contains(o._latlng)&&(t&&(o._backupLatlng=o.getLatLng(),o.setLatLng(t),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var n=this._markers[e];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(t-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,n,i){var r,o;this._recursively(t,e-1,n-1,function(t){for(o=t._markers.length-1;o>=0;o--)r=t._markers[o],i&&i.contains(r._latlng)||(t._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(t){for(o=t._childClusters.length-1;o>=0;o--)r=t._childClusters[o],i&&i.contains(r._latlng)||(t._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(t,e,n,i,r){var o,s,a=this._childClusters,u=this._zoom;if(e<=u&&(i&&i(this),r&&u===n&&r(this)),u<e||u<n)for(o=a.length-1;o>=0;o--)s=a[o],t.intersects(s._bounds)&&s._recursively(t,e,n,i,r)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var t=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,t}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var n=this._getCoord(e.x),i=this._getCoord(e.y),r=this._grid,o=r[i]=r[i]||{},s=o[n]=o[n]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,i,r=this._getCoord(e.x),o=this._getCoord(e.y),s=this._grid,a=s[o]=s[o]||{},u=a[r]=a[r]||[];for(delete this._objectPoint[L.Util.stamp(t)],n=0,i=u.length;n<i;n++)if(u[n]===t)return u.splice(n,1),1===i&&delete a[r],!0},eachObject:function(t,e){var n,i,r,o,s,a,u=this._grid;for(n in u)for(i in s=u[n])for(r=0,o=(a=s[i]).length;r<o;r++)t.call(e,a[r])&&(r--,o--)},getNearObject:function(t){var e,n,i,r,o,s,a,u,h=this._getCoord(t.x),l=this._getCoord(t.y),c=this._objectPoint,f=this._sqCellSize,p=null;for(e=l-1;e<=l+1;e++)if(r=this._grid[e])for(n=h-1;n<=h+1;n++)if(o=r[n])for(i=0,s=o.length;i<s;i++)a=o[i],((u=this._sqDist(c[L.Util.stamp(a)],t))<f||u<=f&&null===p)&&(f=u,p=a);return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},L.QuickHull={getDistant:function(t,e){var n=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+n*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var n,i,r,o=0,s=null,a=[];for(n=e.length-1;n>=0;n--)i=e[n],(r=this.getDistant(i,t))>0&&(a.push(i),r>o&&(o=r,s=i));return{maxPoint:s,newPoints:a}},buildConvexHull:function(t,e){var n=[],i=this.findMostDistantPointFromBaseLine(t,e);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([t[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,t[1]],i.newPoints)):[t[0]]},getConvexHull:function(t){var e,n=!1,i=!1,r=!1,o=!1,s=null,a=null,u=null,h=null,l=null,c=null;for(e=t.length-1;e>=0;e--){var f=t[e];(!1===n||f.lat>n)&&(s=f,n=f.lat),(!1===i||f.lat<i)&&(a=f,i=f.lat),(!1===r||f.lng>r)&&(u=f,r=f.lng),(!1===o||f.lng<o)&&(h=f,o=f.lng)}return i!==n?(c=a,l=s):(c=h,l=u),[].concat(this.buildConvexHull([c,l],t),this.buildConvexHull([l,c],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,n=this.getAllChildMarkers(),i=[];for(e=n.length-1;e>=0;e--)t=n[e].getLatLng(),i.push(t);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,n):(n.y+=10,t=this._generatePointsCircle(e.length,n)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var n,i,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,o=this._2PI/t,s=[];for(r=Math.max(r,35),s.length=t,n=0;n<t;n++)i=this._circleStartAngle+n*o,s[n]=new L.Point(e.x+r*Math.cos(i),e.y+r*Math.sin(i))._round();return s},_generatePointsSpiral:function(t,e){var n,i=this._group.options.spiderfyDistanceMultiplier,r=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,s=i*this._spiralLengthFactor*this._2PI,a=0,u=[];for(u.length=t,n=t;n>=0;n--)n<t&&(u[n]=new L.Point(e.x+r*Math.cos(a),e.y+r*Math.sin(a))._round()),r+=s/(a+=o/r+5e-4*n);return u},_noanimationUnspiderfy:function(){var t,e,n=this._group,i=n._map,r=n._featureGroup,o=this.getAllChildMarkers();for(n._ignoreMove=!0,this.setOpacity(1),e=o.length-1;e>=0;e--)t=o[e],r.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(i.removeLayer(t._spiderLeg),delete t._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var n,i,r,o,s=this._group,a=s._map,u=s._featureGroup,h=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,n=0;n<t.length;n++)o=a.layerPointToLatLng(e[n]),i=t[n],r=new L.Polyline([this._latlng,o],h),a.addLayer(r),i._spiderLeg=r,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),u.addLayer(i);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var n,i,r,o,s,a,u=this,h=this._group,l=h._map,c=h._featureGroup,f=this._latlng,p=l.latLngToLayerPoint(f),d=L.Path.SVG,_=L.extend({},this._group.options.spiderLegPolylineOptions),g=_.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),d?(_.opacity=0,_.className=(_.className||"")+" leaflet-cluster-spider-leg"):_.opacity=g,h._ignoreMove=!0,n=0;n<t.length;n++)i=t[n],a=l.layerPointToLatLng(e[n]),r=new L.Polyline([f,a],_),l.addLayer(r),i._spiderLeg=r,d&&(s=(o=r._path).getTotalLength()+.1,o.style.strokeDasharray=s,o.style.strokeDashoffset=s),i.setZIndexOffset&&i.setZIndexOffset(1e6),i.clusterHide&&i.clusterHide(),c.addLayer(i),i._setPos&&i._setPos(p);for(h._forceLayout(),h._animationStart(),n=t.length-1;n>=0;n--)a=l.layerPointToLatLng(e[n]),(i=t[n])._preSpiderfyLatlng=i._latlng,i.setLatLng(a),i.clusterShow&&i.clusterShow(),d&&((o=(r=i._spiderLeg)._path).style.strokeDashoffset=0,r.setStyle({opacity:g}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:u,markers:t})},200)},_animationUnspiderfy:function(t){var e,n,i,r,o,s,a=this,u=this._group,h=u._map,l=u._featureGroup,c=t?h._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):h.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),p=L.Path.SVG;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),n=f.length-1;n>=0;n--)(e=f[n])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,s=!0,e._setPos&&(e._setPos(c),s=!1),e.clusterHide&&(e.clusterHide(),s=!1),s&&l.removeLayer(e),p&&(o=(r=(i=e._spiderLeg)._path).getTotalLength()+.1,r.style.strokeDashoffset=o,i.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var t=0;for(n=f.length-1;n>=0;n--)(e=f[n])._spiderLeg&&t++;for(n=f.length-1;n>=0;n--)(e=f[n])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&l.removeLayer(e),h.removeLayer(e._spiderLeg),delete e._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:a,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,n;for(e in t)for(n=t[e].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,n;for(e in t)n=t[e],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(t,e){var n=this.options.icon;return L.setOptions(n,t),this.setIcon(n),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=n}(e)});var D="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Z(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}var U=Z,W=N;function G(t){if(U===setTimeout)return setTimeout(t,0);if((U===Z||!U)&&setTimeout)return U=setTimeout,setTimeout(t,0);try{return U(t,0)}catch(e){try{return U.call(null,t,0)}catch(e){return U.call(this,t,0)}}}"function"==typeof D.setTimeout&&(U=setTimeout),"function"==typeof D.clearTimeout&&(W=clearTimeout);var V,F=[],H=!1,q=-1;function Y(){H&&V&&(H=!1,V.length?F=V.concat(F):q=-1,F.length&&$())}function $(){if(!H){var t=G(Y);H=!0;for(var e=F.length;e;){for(V=F,F=[];++q<e;)V&&V[q].run();q=-1,e=F.length}V=null,H=!1,function(t){if(W===clearTimeout)return clearTimeout(t);if((W===N||!W)&&clearTimeout)return W=clearTimeout,clearTimeout(t);try{W(t)}catch(e){try{return W.call(null,t)}catch(e){return W.call(this,t)}}}(t)}}function K(t,e){this.fun=t,this.array=e}function J(){}K.prototype.run=function(){this.fun.apply(null,this.array)};var X=J,Q=J,tt=J,et=J,nt=J,it=J,rt=J,ot=D.performance||{},st=ot.now||ot.mozNow||ot.msNow||ot.oNow||ot.webkitNow||function(){return(new Date).getTime()},at=new Date,ut={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];F.push(new K(t,e)),1!==F.length||H||G($)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:X,addListener:Q,once:tt,off:et,removeListener:nt,removeAllListeners:it,emit:rt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*st.call(ot),n=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(n-=t[0],(i-=t[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-at)/1e3}},ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function lt(t,e){function n(){this.constructor=t}ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ct=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function ft(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function pt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ft(arguments[e]));return t}var dt={},_t={};function gt(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in Qe(t,"__mobxDidRunLazyInitializers",!0),e){var i=e[n];i.propertyCreator(t,i.prop,i.descriptor,i.decoratorTarget,i.decoratorArguments)}}}function mt(t,e){return function(){var n,i,r=function(i,r,o,s){if(!0===s)return e(i,r,o,i,n),null;if(!Object.prototype.hasOwnProperty.call(i,"__mobxDecorators")){var a=i.__mobxDecorators;Qe(i,"__mobxDecorators",ct({},a))}return i.__mobxDecorators[r]={prop:r,propertyCreator:e,descriptor:o,decoratorTarget:i,decoratorArguments:n},function(t,e){var n=e?dt:_t;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return gt(this),this[t]},set:function(e){gt(this),this[t]=e}})}(r,t)};return(2===(i=arguments).length||3===i.length)&&"string"==typeof i[1]||4===i.length&&!0===i[3]?(n=Ve,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function vt(){return!!hn.spyListeners.length}function yt(t){if(hn.spyListeners.length)for(var e=hn.spyListeners,n=0,i=e.length;n<i;n++)e[n](t)}function bt(t){yt(ct({},t,{spyReportStart:!0}))}var wt={spyReportEnd:!0};function Lt(t){yt(t?ct({},t,{spyReportEnd:!0}):wt)}function xt(t,e){var n=function(){return function(t,e,n,i){var r=function(t,e,n,i){var r=vt()&&!!t,o=0;if(r){o=Date.now();var s=i&&i.length||0,a=new Array(s);if(s>0)for(var u=0;u<s;u++)a[u]=i[u];bt({type:"action",name:t,object:n,arguments:a})}var h,l=Tn();return _n(),{prevDerivation:l,prevAllowStateChanges:(!0,h=hn.allowStateChanges,hn.allowStateChanges=!0,h),notifySpy:r,startTime:o}}(t,0,n,i);try{return e.apply(n,i)}finally{!function(t){var e;e=t.prevAllowStateChanges,hn.allowStateChanges=e,gn(),Cn(t.prevDerivation),t.notifySpy&&Lt({time:Date.now()-t.startTime})}(r)}}(t,e,this,arguments)};return n.isMobxAction=!0,n}function Pt(){Ye(!1)}function Tt(t){return function(e,n,i){if(i){if(i.value)return{value:xt(t,i.value),enumerable:!1,configurable:!1,writable:!0};var r=i.initializer;return{enumerable:!1,configurable:!1,writable:!1,initializer:function(){return xt(t,r.call(this))}}}return function(t){return function(e,n,i){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){tn(this,n,Ct(t,e))}})}}(t).apply(this,arguments)}}var Ct=function(t,e,n,i){return 1===arguments.length&&"function"==typeof t?xt(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?xt(t,e):1===arguments.length&&"string"==typeof t?Tt(t):!0!==i?Tt(e).apply(null,arguments):void(t[e]=xt(t.name||e,n.value))};function Ot(t,e,n){Qe(t,e,xt(e,n.bind(t)))}Ct.bound=function(t,e,n,i){return!0===i?(Ot(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Ot(this,e,n.value||n.initializer.call(this)),this[e]},set:Pt}:{enumerable:!1,configurable:!0,set:function(t){Ot(this,e,t)},get:function(){}}};var St=Object.prototype.toString;function Mt(t,e){return function t(e,n,i,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var o=typeof e;return("function"===o||"object"===o||"object"==typeof n)&&function(e,n,i,r){e=Et(e),n=Et(n);var o=St.call(e);if(o!==St.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof n)return!1;var a=e.constructor,u=n.constructor;if(a!==u&&!("function"==typeof a&&a instanceof a&&"function"==typeof u&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}i=i||[],r=r||[];for(var h=i.length;h--;)if(i[h]===e)return r[h]===n;if(i.push(e),r.push(n),s){if((h=e.length)!==n.length)return!1;for(;h--;)if(!t(e[h],n[h],i,r))return!1}else{var l,c=Object.keys(e);if(h=c.length,Object.keys(n).length!==h)return!1;for(;h--;)if(l=c[h],!At(n,l)||!t(e[l],n[l],i,r))return!1}return i.pop(),r.pop(),!0}(e,n,i,r)}(t,e)}function Et(t){return We(t)?t.peek():nn(t)||Ce(t)?rn(t.entries()):t}function At(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kt(t,e){return t===e}var It={identity:kt,structural:function(t,e){return Mt(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||kt(t,e)}};function zt(t,e){void 0===e&&(e=Fe);var n,i=e&&e.name||t.name||"Autorun@"+qe();if(e.scheduler||e.delay){var r=Rt(e),o=!1;n=new Sn(i,function(){o||(o=!0,r(function(){o=!1,n.isDisposed||n.track(s)}))},e.onError)}else n=new Sn(i,function(){this.track(s)},e.onError);function s(){t(n)}return n.schedule(),n.getDisposer()}var Bt=function(t){return t()};function Rt(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Bt}function jt(t,e,n){void 0===n&&(n=Fe),"boolean"==typeof n&&(n={fireImmediately:n});var i,r,o,s=n.name||"Reaction@"+qe(),a=Ct(s,n.onError?(i=n.onError,r=e,function(){try{return r.apply(this,arguments)}catch(t){i.call(this,t)}}):e),u=!n.scheduler&&!n.delay,h=Rt(n),l=!0,c=!1,f=n.compareStructural?It.structural:n.equals||It.default,p=new Sn(s,function(){l||u?d():c||(c=!0,h(d))},n.onError);function d(){if(c=!1,!p.isDisposed){var e=!1;p.track(function(){var n=t(p);e=l||!f(o,n),o=n}),l&&n.fireImmediately&&a(o,p),l||!0!==e||a(o,p),l&&(l=!1)}}return p.schedule(),p.getDisposer()}var Dt=function(){function t(t){var e=this;if(this.dependenciesState=an.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=an.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+qe(),this.value=new yn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=un.NONE,!t.get)return Ye("missing option for computed: get");this.derivation=t.get,this.name=t.name||"ComputedValue@"+qe(),t.set&&(this.setter=xt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?It.structural:It.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,!0===t.keepAlive&&zt(function(){return e.get()})}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState===an.UP_TO_DATE){t.lowestObserverState=an.POSSIBLY_STALE;for(var e=t.observers,n=e.length;n--;){var i=e[n];i.dependenciesState===an.UP_TO_DATE&&(i.dependenciesState=an.POSSIBLY_STALE,i.isTracing!==un.NONE&&vn(i,t),i.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&Ye("Cycle detected in computation "+this.name+": "+this.derivation),0===hn.inBatch?wn(this)&&(this.warnAboutUntrackedRead(),_n(),this.value=this.computeValue(!1),gn()):(mn(this),wn(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState!==an.STALE){t.lowestObserverState=an.STALE;for(var e=t.observers,n=e.length;n--;){var i=e[n];i.dependenciesState===an.POSSIBLY_STALE?i.dependenciesState=an.STALE:i.dependenciesState===an.UP_TO_DATE&&(t.lowestObserverState=an.UP_TO_DATE)}}}(this));var t=this.value;if(bn(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(bn(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){$e(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else $e(!1,!1)},t.prototype.trackAndCompute=function(){vt()&&yt({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===an.NOT_TRACKING,n=this.value=this.computeValue(!0);return e||bn(t)||bn(n)||!this.equals(t,n)},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,hn.computationDepth++,t)e=xn(this,this.derivation,this.scope);else if(!0===hn.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new yn(t)}return hn.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){Pn(this),this.value=void 0},t.prototype.observe=function(t,e){var n=this,i=!0,r=void 0;return zt(function(){var o=n.get();if(!i||e){var s=Tn();t({type:"update",object:n,newValue:o,oldValue:r}),Cn(s)}i=!1,r=o})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return sn(this.get())},t}();Dt.prototype[on()]=Dt.prototype.valueOf;var Zt=en("ComputedValue",Dt);function Nt(t){return void 0!==t.interceptors&&t.interceptors.length>0}function Ut(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),Ke(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function Wt(t,e){var n=Tn();try{var i=t.interceptors;if(i)for(var r=0,o=i.length;r<o&&($e(!(e=i[r](e))||e.type,"Intercept handlers should return nothing or a change object"),e);r++);return e}finally{Cn(n)}}function Gt(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function Vt(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),Ke(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function Ft(t,e){var n=Tn(),i=t.changeListeners;if(i){for(var r=0,o=(i=i.slice()).length;r<o;r++)i[r](e);Cn(n)}}var Ht={};Pe||(Pe=function(){function t(t){void 0===t&&(t="Atom@"+qe()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=an.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return mn(this)},t.prototype.reportChanged=function(){_n(),function(t){if(t.lowestObserverState!==an.STALE){t.lowestObserverState=an.STALE;for(var e=t.observers,n=e.length;n--;){var i=e[n];i.dependenciesState===an.UP_TO_DATE&&(i.isTracing!==un.NONE&&vn(i,t),i.onBecomeStale()),i.dependenciesState=an.STALE}}}(this),gn()},t.prototype.toString=function(){return this.name},t}(),Te=en("Atom",Pe));var qt=function(t){function e(e,n,i,r){void 0===i&&(i="ObservableValue@"+qe()),void 0===r&&(r=!0);var o=t.call(this,i)||this;return o.enhancer=n,o.hasUnreportedChange=!1,o.value=n(e,void 0,i),r&&vt()&&yt({type:"create",name:o.name,newValue:""+o.value}),o}return lt(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==Ht){var n=vt();n&&bt({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&Lt()}},e.prototype.prepareNewValue=function(t){if(Ln(this),Nt(this)){var e=Wt(this,{object:this,type:"update",newValue:t});if(!e)return Ht;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.value!==t?t:Ht},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),Gt(this)&&Ft(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Ut(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Vt(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return sn(this.get())},e}(Pe);qt.prototype[on()]=qt.prototype.valueOf;var Yt=en("ObservableValue",qt),$t=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t)return this.values[e].get();this.illegalAccess(t,e)},t.prototype.write=function(t,e,n){var i=this.target;if(i===t){var r=this.values[e];if(r instanceof Dt)r.set(n);else{if(Nt(this)){if(!(a=Wt(this,{type:"update",object:i,name:e,newValue:n})))return;n=a.newValue}if((n=r.prepareNewValue(n))!==Ht){var o=Gt(this),s=vt(),a=o||s?{type:"update",object:i,oldValue:r.value,name:e,newValue:n}:null;s&&bt(ct({},a,{name:this.name,key:e})),r.setNewValue(n),o&&Ft(this,a),s&&Lt()}}}else this.illegalAccess(t,e)},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(Nt(this)&&!(o=Wt(this,{object:e,name:t,type:"remove"})))return;try{_n();var n=Gt(this),i=vt(),r=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||i?{type:"remove",object:e,oldValue:r,name:t}:null;i&&bt(ct({},o,{name:this.name,key:t})),n&&Ft(this,o),i&&Lt()}finally{gn()}}},t.prototype.illegalAccess=function(t,e){return Ye("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return Vt(this,t)},t.prototype.intercept=function(t){return Ut(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new Re(Object.keys(this.values).filter(function(e){return t.values[e]instanceof qt}),ge,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Kt(t,e,n){void 0===e&&(e=""),void 0===n&&(n=_e);var i=t.$mobx;return i||(Xe(t)||(e=(t.constructor.name||"ObservableObject")+"@"+qe()),e||(e="ObservableObject@"+qe()),tn(t,"$mobx",i=new $t(t,e,n)),i)}var Jt={},Xt={};function Qt(t){return t.$mobx||(gt(t),t.$mobx)}var te=en("ObservableObjectAdministration",$t);function ee(t){return!!Je(t)&&(gt(t),te(t.$mobx))}function ne(t){var e=mt(!0,function(e,n,i,r,o){!function(t,e,n,i){var r=Kt(t);if(Nt(r)){var o=Wt(r,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(r.values[e]=new qt(n,i,r.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return Jt[t]||(Jt[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),r.keys&&r.keys.push(e),function(t,e,n,i){var r=Gt(t),o=vt(),s=r||o?{type:"add",object:e,name:n,newValue:i}:null;o&&bt(ct({},s,{name:t.name,key:n})),r&&Ft(t,s),o&&Lt()}(r,t,e,n)}(e,n,i?i.initializer?i.initializer.call(e):i.value:void 0,t)}),n=(void 0!==ut&&ut.env,e);return n.enhancer=t,n}function ie(t){return 1!==arguments.length&&Ye(!1),function(t,e){return null!==t&&void 0!==t&&(ee(t)||!!t.$mobx||Te(t)||In(t)||Zt(t))}(t)}var re=mt(!1,function(t,e,n,i,r){var o=n.get,s=n.set,a=r[0]||{};!function(t,e,n){var i=Kt(t);n.name=i.name+"."+e,n.context=t,i.values[e]=new Dt(n),Object.defineProperty(t,e,function(t){return Xt[t]||(Xt[t]={configurable:!0,enumerable:!1,get:function(){return Qt(this).read(this,t)},set:function(e){Qt(this).write(this,t,e)}})}(e))}(t,e,ct({},a,{get:o,set:s}))});re({equals:It.structural});var oe={deep:!0,name:void 0,defaultDecorator:void 0};function se(t){return null===t||void 0===t?oe:"string"==typeof t?{name:t,deep:!0}:t}function ae(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?ge:_e}Object.freeze(oe),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var ue=ne(_e),he=ne(function(t,e,n){return void 0===t||null===t?t:ee(t)||We(t)||Ce(t)?t:Array.isArray(t)?pe.array(t,{name:n,deep:!1}):Xe(t)?pe.object(t,void 0,{name:n,deep:!1}):nn(t)?pe.map(t,{name:n,deep:!1}):Ye(!1)}),le=ne(ge),ce=ne(function(t,e,n){return Mt(t,e)?e:t}),fe={box:function(t,e){arguments.length>2&&de("box");var n=se(e);return new qt(t,ae(n),n.name)},shallowBox:function(t,e){return arguments.length>2&&de("shallowBox"),pe.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&de("array");var n=se(e);return new Re(t,ae(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&de("shallowArray"),pe.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&de("map");var n=se(e);return new xe(t,ae(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&de("shallowMap"),pe.map(t,{name:e,deep:!1})},object:function(t,e,n){return"string"==typeof arguments[1]&&de("object"),function(t,e,n,i){var r=(i=se(i)).defaultDecorator||(!1===i.deep?le:ue);Kt(t,i.name,r.enhancer),_n();try{for(var o in e){var s=Object.getOwnPropertyDescriptor(e,o),a=(n&&o in n?n[o]:s.get?re:r)(t,o,s,!0);a&&Object.defineProperty(t,o,a)}}finally{gn()}return t}({},t,e,se(n))},shallowObject:function(t,e){return"string"==typeof arguments[1]&&de("shallowObject"),pe.object(t,{},{name:e,deep:!1})},ref:le,shallow:he,deep:ue,struct:ce},pe=function(t,e,n){if("string"==typeof arguments[1])return ue.apply(null,arguments);if(ie(t))return t;var i=Xe(t)?pe.object(t,e,n):Array.isArray(t)?pe.array(t,e):nn(t)?pe.map(t,e):t;if(i!==t)return i;Ye(!1)};function de(t){Ye("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}function _e(t,e,n){return ie(t)?t:Array.isArray(t)?pe.array(t,{name:n}):Xe(t)?pe.object(t,void 0,{name:n}):nn(t)?pe.map(t,{name:n}):t}function ge(t){return t}function me(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function ve(t,e){tn(t,me(),e)}function ye(t){return t[me()]=be,t}function be(){return this}function we(t,e){void 0===e&&(e=void 0),_n();try{return t.apply(e)}finally{gn()}}Object.keys(fe).forEach(function(t){return pe[t]=fe[t]});var Le={},xe=function(){function t(t,e,n){if(void 0===e&&(e=_e),void 0===n&&(n="ObservableMap@"+qe()),this.enhancer=e,this.name=n,this.$mobx=Le,this._keys=new Re(void 0,ge,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){return this._hasMap.has(t)?this._hasMap.get(t).get():this._updateHasMapEntry(t,!1).get()},t.prototype.set=function(t,e){var n=this._has(t);if(Nt(this)){var i=Wt(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!i)return this;e=i.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(Nt(this)&&!(r=Wt(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=vt(),i=Gt(this),r=i||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&bt(ct({},r,{name:this.name,key:t})),we(function(){e._keys.remove(t),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)}),i&&Ft(this,r),n&&Lt(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);return n?n.setNewValue(e):(n=new qt(e,ge,this.name+"."+t+"?",!1),this._hasMap.set(t,n)),n},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==Ht){var i=vt(),r=Gt(this),o=r||i?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;i&&bt(ct({},o,{name:this.name,key:t})),n.setNewValue(e),r&&Ft(this,o),i&&Lt()}},t.prototype._addValue=function(t,e){var n=this;we(function(){var i=new qt(e,n.enhancer,n.name+"."+t,!1);n._data.set(t,i),e=i.value,n._updateHasMapEntry(t,!0),n._keys.push(t)});var i=vt(),r=Gt(this),o=r||i?{type:"add",object:this,name:t,newValue:e}:null;i&&bt(ct({},o,{name:this.name,key:t})),r&&Ft(this,o),i&&Lt()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keys[me()]()},t.prototype.values=function(){var t=this,e=0;return ye({next:function(){return e<t._keys.length?{value:t.get(t._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var t=this,e=0;return ye({next:function(){if(e<t._keys.length){var n=t._keys[e++];return{value:[n,t.get(n)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(t,e){var n=this;this._keys.forEach(function(i){return t.call(e,n.get(i),i,n)})},t.prototype.merge=function(t){var e=this;return Ce(t)&&(t=t.toJS()),we(function(){Xe(t)?Object.keys(t).forEach(function(n){return e.set(n,t[n])}):Array.isArray(t)?t.forEach(function(t){var n=ft(t,2),i=n[0],r=n[1];return e.set(i,r)}):nn(t)?t.forEach(function(t,n){return e.set(n,t)}):null!==t&&void 0!==t&&Ye("Cannot initialize map from "+t)}),this},t.prototype.clear=function(){var t=this;we(function(){var e,n;e=function(){t._keys.slice().forEach(function(e){return t.delete(e)})},n=Tn(),e(),Cn(n)})},t.prototype.replace=function(t){var e=this;return we(function(){var n,i=Xe(n=t)?Object.keys(n):Array.isArray(n)?n.map(function(t){return ft(t,1)[0]}):nn(n)||Ce(n)?rn(n.keys()):Ye("Cannot get keys from '"+n+"'");e._keys.filter(function(t){return-1===i.indexOf(t)}).forEach(function(t){return e.delete(t)}),e.merge(t)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this._keys.forEach(function(n){return e[""+n]=t.get(n)}),e},t.prototype.toJS=function(){var t=this,e=new Map;return this._keys.forEach(function(n){return e.set(n,t.get(n))}),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+this._keys.map(function(e){return e+": "+t.get(e)}).join(", ")+" }]"},t.prototype.observe=function(t,e){return Vt(this,t)},t.prototype.intercept=function(t){return Ut(this,t)},t}();ve(xe.prototype,function(){return this.entries()}),tn(xe.prototype,"undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag","Map");var Pe,Te,Ce=en("ObservableMap",xe);function Oe(t,e){if("object"==typeof t&&null!==t){if(We(t))return void 0!==e&&Ye(!1),t.$mobx.atom;if(Ce(t)){var n=t;return void 0===e?Oe(n._keys):((i=n._data.get(e)||n._hasMap.get(e))||Ye(!1),i)}var i;if(gt(t),e&&!t.$mobx&&t[e],ee(t))return e?((i=t.$mobx.values[e])||Ye(!1),i):Ye(!1);if(Te(t)||Zt(t)||In(t))return t}else if("function"==typeof t&&In(t.$mobx))return t.$mobx;return Ye(!1)}var Se,Me,Ee,Ae,ke=(Se=!1,Me={},Object.defineProperty(Me,"0",{set:function(){Se=!0}}),Object.create(Me)[0]=1,!1===Se),Ie=0,ze=function(){};Ee=ze,Ae=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Ee.prototype,Ae):void 0!==Ee.prototype.__proto__?Ee.prototype.__proto__=Ae:Ee.prototype=Ae,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(t){Object.defineProperty(ze.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})});var Be=function(){function t(t,e,n,i){this.array=n,this.owned=i,this.values=[],this.lastKnownLength=0,this.atom=new Pe(t||"ObservableArray@"+qe()),this.enhancer=function(n,i){return e(n,i,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&this.values.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return Ut(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Vt(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),i=0;i<t-e;i++)n[i]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>Ie&&Ne(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var i=this;Ln(this.atom);var r=this.values.length;if(void 0===t?t=0:t>r?t=r:t<0&&(t=Math.max(0,r+t)),e=1===arguments.length?r-t:void 0===e||null===e?0:Math.max(0,Math.min(e,r-t)),void 0===n&&(n=Ve),Nt(this)){var o=Wt(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!o)return Ve;e=o.removedCount,n=o.added}var s=(n=0===n.length?n:n.map(function(t){return i.enhancer(t,void 0)})).length-e;this.updateArrayLength(r,s);var a=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,a),this.dehanceValues(a)},t.prototype.spliceItemsIntoValues=function(t,e,n){if(n.length<1e4)return(i=this.values).splice.apply(i,pt([t,e],n));var i,r=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),r},t.prototype.notifyArrayChildUpdate=function(t,e,n){var i=!this.owned&&vt(),r=Gt(this),o=r||i?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;i&&bt(ct({},o,{name:this.atom.name})),this.atom.reportChanged(),r&&Ft(this,o),i&&Lt()},t.prototype.notifyArraySplice=function(t,e,n){var i=!this.owned&&vt(),r=Gt(this),o=r||i?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;i&&bt(ct({},o,{name:this.atom.name})),this.atom.reportChanged(),r&&Ft(this,o),i&&Lt()},t}(),Re=function(t){function e(e,n,i,r){void 0===i&&(i="ObservableArray@"+qe()),void 0===r&&(r=!1);var o=t.call(this)||this,s=new Be(i,n,o,r);return tn(o,"$mobx",s),e&&e.length&&o.spliceWithArray(0,0,e),ke&&Object.defineProperty(s.array,"0",je),o}return lt(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(t){return We(t)?t.peek():t}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0),arguments.length;var i=this.findIndex.apply(this,arguments);return-1===i?void 0:this.get(i)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0),arguments.length;for(var i=this.peek(),r=i.length,o=n;o<r;o++)if(t.call(e,i[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(n.call(this,t),n.call(this,e),t!==e){var i,r=this.$mobx.values;i=t<e?pt(r.slice(0,t),r.slice(t+1,e+1),[r[t]],r.slice(e+1)):pt(r.slice(0,e),[r[t]],r.slice(e,t),r.slice(t+1)),this.replace(i)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,i=n.values;if(t<i.length){Ln(n.atom);var r=i[t];if(Nt(n)){var o=Wt(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,r))!==r&&(i[t]=e,n.notifyArrayChildUpdate(t,e,r))}else{if(t!==i.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+i.length);n.spliceWithArray(t,0,[e])}},e}(ze);ve(Re.prototype,function(){this.$mobx.atom.reportObserved();var t=this,e=0;return ye({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(Re.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){var e=Array.prototype[t];$e("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),Qe(Re.prototype,t,function(){return e.apply(this.peek(),arguments)})}),function(t,e){for(var n=0;n<e.length;n++)Qe(t,e[n],t[e[n]])}(Re.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var je=De(0);function De(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Ze(t){Object.defineProperty(Re.prototype,""+t,De(t))}function Ne(t){for(var e=Ie;e<t;e++)Ze(e);Ie=t}Ne(1e3);var Ue=en("ObservableArrayAdministration",Be);function We(t){return Je(t)&&Ue(t.$mobx)}var Ge="An invariant failed, however the error is obfuscated because this is an production build.",Ve=[];Object.freeze(Ve);var Fe={};function He(){return"undefined"!=typeof window?window:D}function qe(){return++hn.mobxGuid}function Ye(t){throw $e(!1,t),"X"}function $e(t,e){if(!t)throw new Error("[mobx] "+(e||Ge))}function Ke(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}function Je(t){return null!==t&&"object"==typeof t}function Xe(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function Qe(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function tn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function en(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return Je(t)&&!0===t[n]}}function nn(t){return void 0!==He().Map&&t instanceof He().Map}function rn(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function on(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function sn(t){return null===t?null:"object"==typeof t?""+t:t}Object.freeze(Fe);var an,un,hn=new function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1},ln=He();function cn(t){var e,n,i={name:t.name};return t.observing&&t.observing.length>0&&(i.dependencies=(e=t.observing,n=[],e.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),n).map(cn)),i}function fn(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function pn(t,e){if(1===t.observers.length)t.observers.length=0,dn(t);else{var n=t.observers,i=t.observersIndexes,r=n.pop();if(r!==e){var o=i[e.__mapid]||0;o?i[r.__mapid]=o:delete i[r.__mapid],n[o]=r}delete i[e.__mapid]}}function dn(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,hn.pendingUnobservations.push(t))}function _n(){hn.inBatch++}function gn(){if(0==--hn.inBatch){An();for(var t=hn.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Dt&&n.suspend())}hn.pendingUnobservations=[]}}function mn(t){var e=hn.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&hn.inBatch>0&&dn(t),!1)}function vn(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===un.BREAK){var n=[];!function t(e,n,i){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(i).join("\t")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return t(e,n,i+1)}))}((i=t,cn(Oe(i,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Dt?t.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var i}ln.__mobxInstanceCount?(ln.__mobxInstanceCount++,setTimeout(function(){Ye(!1)},1)):ln.__mobxInstanceCount=1,function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(an||(an={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(un||(un={}));var yn=function(t){this.cause=t};function bn(t){return t instanceof yn}function wn(t){switch(t.dependenciesState){case an.UP_TO_DATE:return!1;case an.NOT_TRACKING:case an.STALE:return!0;case an.POSSIBLY_STALE:for(var e=Tn(),n=t.observing,i=n.length,r=0;r<i;r++){var o=n[r];if(Zt(o)){if(hn.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return Cn(e),!0}if(t.dependenciesState===an.STALE)return Cn(e),!0}}return On(t),Cn(e),!1}}function Ln(t){var e=t.observers.length>0;hn.computationDepth>0&&e&&Ye(!1),!hn.allowStateChanges&&e&&Ye(!1)}function xn(t,e,n){On(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++hn.runId;var i,r=hn.trackingDerivation;if(hn.trackingDerivation=t,!0===hn.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new yn(t)}return hn.trackingDerivation=r,function(t){for(var e=t.observing,n=t.observing=t.newObserving,i=an.UP_TO_DATE,r=0,o=t.unboundDepsCount,s=0;s<o;s++){0===(a=n[s]).diffValue&&(a.diffValue=1,r!==s&&(n[r]=a),r++),a.dependenciesState>i&&(i=a.dependenciesState)}for(n.length=r,t.newObserving=null,o=e.length;o--;){0===(a=e[o]).diffValue&&pn(a,t),a.diffValue=0}for(;r--;){var a;1===(a=n[r]).diffValue&&(a.diffValue=0,fn(a,t))}i!==an.UP_TO_DATE&&(t.dependenciesState=i,t.onBecomeStale())}(t),i}function Pn(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)pn(e[n],t);t.dependenciesState=an.NOT_TRACKING}function Tn(){var t=hn.trackingDerivation;return hn.trackingDerivation=null,t}function Cn(t){hn.trackingDerivation=t}function On(t){if(t.dependenciesState!==an.UP_TO_DATE){t.dependenciesState=an.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=an.UP_TO_DATE}}var Sn=function(){function t(t,e,n){void 0===t&&(t="Reaction@"+qe()),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=an.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+qe(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=un.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,hn.pendingReactions.push(this),An())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){this.isDisposed||(_n(),this._isScheduled=!1,wn(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&vt()&&yt({name:this.name,type:"scheduled-reaction"})),gn())},t.prototype.track=function(t){_n();var e,n=vt();n&&(e=Date.now(),bt({name:this.name,type:"reaction"})),this._isRunning=!0;var i=xn(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Pn(this),bn(i)&&this.reportExceptionInDerivation(i.cause),n&&Lt({time:Date.now()-e}),gn()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,t),vt()&&yt({type:"error",name:this.name,message:n,error:""+t}),hn.globalReactionErrorHandlers.forEach(function(n){return n(t,e)})}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_n(),Pn(this),gn()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var i=function(t){switch(t.length){case 0:return hn.trackingDerivation;case 1:return Oe(t[0]);case 2:return Oe(t[0],t[1])}}(t);if(!i)return Ye(!1);i.isTracing===un.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled"),i.isTracing=n?un.BREAK:un.LOG}(this,t)},t}(),Mn=100,En=function(t){return t()};function An(){hn.inBatch>0||hn.isRunningReactions||En(kn)}function kn(){hn.isRunningReactions=!0;for(var t=hn.pendingReactions,e=0;t.length>0;){++e===Mn&&(console.error("Reaction doesn't converge to a stable state after "+Mn+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction()}hn.isRunningReactions=!1}var In=en("Reaction",Sn),zn={detectCycles:!0,exportMapsAsObjects:!0};"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return hn.spyListeners.push(t),Ke(function(){hn.spyListeners=hn.spyListeners.filter(function(e){return e!==t})})},extras:{getDebugName:function(t,e){return(void 0!==e?Oe(t,e):ee(t)||Ce(t)?function t(e,n){return e||Ye("Expecting some object"),void 0!==n?t(Oe(e,n)):Te(e)||Zt(e)||In(e)?e:Ce(e)?e:(gt(e),e.$mobx?e.$mobx:void Ye(!1))}(t):Oe(t)).name}}});var Bn=function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};class Rn{constructor(){this.changeCoordinates=this.changeCoordinates.bind(this),this.changeMapMode=this.changeMapMode.bind(this),this.DEFAULT_VALUES=this.getDefaultValue(),this.state=this.DEFAULT_VALUES,this.mapLayers=this.getDefaultMapLayers(),this.groupIdToShapeIdMap={},this.selectedObjects={}}toggleSelectionMode(t){this.groupIdToShapeIdMap[t.groupId][t.shapeId].shapeDef.data.isSelected=!this.groupIdToShapeIdMap[t.groupId][t.shapeId].shapeDef.data.isSelected,this.groupIdToShapeIdMap[t.groupId][t.shapeId].shapeDef.data.isSelected?this.selectedObjects[t.shapeId]=t:delete this.selectedObjects[t.shapeId],this.selectedObjects=Object.assign({},this.selectedObjects)}initState(t){this.state=R.cloneDeep(t)}updateState(t){this.state=R.merge(function t(e,n,i){void 0===i&&(i=[]),"boolean"==typeof n&&(n={detectCycles:n}),n||(n=zn);var r,o=!0===n.detectCycles;function s(t){return o&&i.push([e,t]),t}if(ie(e)){if(o&&null===i&&(i=[]),o&&null!==e&&"object"==typeof e)for(var a=0,u=i.length;a<u;a++)if(i[a][0]===e)return i[a][1];if(We(e)){var h=s([]),l=e.map(function(e){return t(e,n,i)});for(h.length=l.length,a=0,u=l.length;a<u;a++)h[a]=l[a];return h}if(ee(e)){for(var c in h=s({}),ee(r=e)?r.$mobx.getKeys():Ce(r)?r._keys.slice():Ye(!1),e)h[c]=t(e[c],n,i);return h}if(Ce(e)){if(!1===n.exportMapsAsObjects){var f=s(new Map);return e.forEach(function(e,r){f.set(r,t(e,n,i))}),f}var p=s({});return e.forEach(function(e,r){p[r]=t(e,n,i)}),p}if(Yt(e))return t(e.get(),n,i)}return e}(this.state),t)}changeCoordinates(t){this.state.mapConfig.coordinateSystemType=t}changeMapMode(t){this.state.mapConfig.mode=t}addShape(t){t.leafletRef.groupId=t.shapeDef.data.groupId,t.leafletRef.id=t.shapeDef.data.id;const e={groupId:t.leafletRef.groupId,shapeId:t.leafletRef.id};R.has(this,`groupIdToShapeIdMap[${e.groupId}]`)||(this.groupIdToShapeIdMap[e.groupId]={}),this.groupIdToShapeIdMap[e.groupId][e.shapeId]=t,t.shapeDef.data.isSelected&&(this.selectedObjects[e.shapeId]=e)}getDefaultMapLayers(){return{baseMaps:{},initialLayers:[],importedLayers:{csv:[],kml:[],zip:[]},drawableLayers:[]}}getDefaultValue(){return{tileLayers:[{name:"Online Map",tilesURI:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",minZoom:1,maxZoom:18,attributionControl:!1}],mapConfig:{isZoomToExtentOnNewData:!0,isWheelZoomOnlyAfterClick:!0,isZoomControl:!0,isFlyToBounds:!0,clusterOptions:{},mode:"cluster",distanceUnitType:"km",coordinateSystemType:"gps"},shapeLayers:[],toolbarConfig:{isExport:!0,isSettings:!0,toolbarPluginsConfig:{layerManagerConfig:{enable:!0,isImport:!0},fullScreenConfig:{enable:!0},measureConfig:{enable:!0,measureOptions:{}},unitsChangerConfig:{enable:!0},zoomToExtentConfig:{enable:!0,zoomToExtentOptions:{position:"topright"}},drawBarConfig:{enable:!0,drawBarOptions:{draw:{polyline:!0,polygon:!0,circle:!0,rectangle:!0,marker:!0},edit:{remove:!0}}},searchConfig:{enable:!0,searchOptions:{searchOnLayer:!0,queryServerUrl:"http://nominatim.openstreetmap.org/search?format=json&q={s}"}}}},mapPluginsConfig:{miniMapConfig:{enable:!0,miniMapOptions:{toggleDisplay:!0}},scaleConfig:{enable:!0,scaleOptions:{position:"bottomright"}},mouseCoordinateConfig:{enable:!0}}}}}Bn([pe],Rn.prototype,"state",void 0),Bn([pe],Rn.prototype,"mapLayers",void 0),Bn([pe],Rn.prototype,"groupIdToShapeIdMap",void 0),Bn([pe],Rn.prototype,"selectedObjects",void 0),Bn([pe],Rn.prototype,"gisMap",void 0),Bn([Ct],Rn.prototype,"toggleSelectionMode",null),Bn([Ct],Rn.prototype,"initState",null),Bn([Ct],Rn.prototype,"updateState",null),Bn([Ct],Rn.prototype,"changeCoordinates",null),Bn([Ct],Rn.prototype,"changeMapMode",null),Bn([Ct],Rn.prototype,"addShape",null);var jn=new Rn;class Dn{getName(){return z[this.getType()]}getHeatLayerPoints(t){return Kr.doNothing(t),null}toggleSelectShape(t){const e=t.groupId,n=jn.groupIdToShapeIdMap[e];n&&R.forEach(n,t=>{const e={groupId:t.leafletRef.groupId,shapeId:t.leafletRef.id};jn.toggleSelectionMode(e);const n=Xn.getManagerByType(R.get(t,"shapeDef.shapeObject.type"));n&&n.updateIsSelectedView(t.leafletRef)})}selectShape(t){Kr.doNothing([t])}updateIsSelectedView(t){const e=jn.groupIdToShapeIdMap[t.groupId][t.id],n={color:R.get(e,"shapeDef.data.isSelected")?"orange":"#38f",opacity:R.get(e,"shapeDef.data.isSelectedFade")?"0.5":"1"};t.setStyle(n)}toggleHighlight(t){Kr.removeHighlightPOIs();const e=t._icon||t.path;e&&R.get(t,"groupId")&&(e.classList.contains("highlighted")||Kr.highlightPOIsByGroupId(t.groupId))}getCoordinateList(t){return Kr.doNothing(t),[]}getMiddleCoordinate(t){return Kr.doNothing(t),null}}class Zn extends Dn{getType(){return z.CIRCLE}shapeObjectToWkt(t,e){Kr.doNothing(e);const n=t.shape;if(n.coordinate&&n.radius>=0){const t=n.radius,e=n.coordinate,i=90,r=180,o=270,s=360,a=null,u=null,h=null,l=null;return Kr.doNothing([t,e,i,r,o,s]),"CURVEPOLYGON(CIRCULARSTRING("+a+","+u+","+h+","+l+","+a+"))"}throw new Error("Please check if you have circle coordinate point and radius")}shapeWktToObject(t){let e,n=t.replace(/[^0-9\,\.\ \-]/g,"").split(",");!function(t){t[t.RIGHT=0]="RIGHT",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.TOP=3]="TOP"}(e||(e={}));const i=this._seperateCirclePoint(n,e.BOTTOM),r=this._seperateCirclePoint(n,e.TOP),o={lat:(i.lat+r.lat)/2,lng:(i.lng+r.lng)/2},s=this._calculateDistanceBetween2Points(o,r)||0;if(o)return{shape:{coordinate:o,radius:s},type:z.CIRCLE};throw"Error, invalid circle-wkt format"}isWktOfType(t){return t.indexOf("CIRCULARSTRING(")>-1}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n=t.options||{radius:0};return n.radius=e.radius,new(j.Circle.extend({getBounds:function(){return this.getLatLng().toBounds(2*this.getRadius())}}))(e.coordinate,n)}return console.error("shapeDef.shapeObject.shape is missing for creating the circle"),null}getShapeObjectFromDrawingLayer(t){return{shape:{coordinate:t.getLatLng(),radius:t.getRadius()},type:z.CIRCLE}}_seperateCirclePoint(t,e){let n;!function(t){t[t.LAT=0]="LAT",t[t.LNG=1]="LNG"}(n||(n={}));const i=t[e].split(" ");return{lat:Number(i[n.LAT]),lng:Number(i[n.LNG])}}_calculateDistanceBetween2Points(t,e){const n=t.lat,i=t.lng,r=e.lat,o=e.lng,s=this._toRad(n),a=this._toRad(r),u=this._toRad(r-n),h=this._toRad(o-i),l=Math.sin(u/2)*Math.sin(u/2)+Math.cos(s)*Math.cos(a)*Math.sin(h/2)*Math.sin(h/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3}_toRad(t){return t*Math.PI/180}getCoordinateList(t){return[t.shape.coordinate]}getRadius(t){return t.shape.radius}getAreaSize(t){const e=t.shape;return Math.PI*Math.pow(e.radius,2)||0}isLayerOfThisShapeType(t){return!!t.getRadius}}class Nn extends Dn{getCoordinateList(t){return t.shape.coordinates}getType(){return z.POLYGON}shapeObjectToWkt(t){const e=t.shape;if(e.coordinates)return this.hasClosePoint(e.coordinates)||e.coordinates.push(e.coordinates[0]),`POLYGON((${e.coordinates.map(t=>`${t.lng} ${t.lat}`).join(",")}))`;throw new Error("Polygon has no coordinates")}hasClosePoint(t){if(t.length>0)return t[0].lat===t[t.length-1].lat&&t[0].lng===t[t.length-1].lng;throw"error: polygon with one coordinate"}shapeWktToObject(t){const e=[];return t.replace(/[^0-9\.\,\ \-]/g,"").split(",").forEach(t=>{const n=t.split(" "),i={lng:Number(n[0]),lat:Number(n[1])};e.push(i)}),{shape:{coordinates:e},type:z.POLYGON}}isWktOfType(t){return-1===t.indexOf("MULTIPOLYGON(")&&t.indexOf("POLYGON(")>-1}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n=t.options,{coordinates:i}=e;return new(j.Polygon.extend({_originalInitialize:j.Polygon.prototype.initialize,initialize:function(t,e){this._originalInitialize(t,e),this._latlng=this.getBounds().getCenter()},getLatLng:function(){return this._latlng},setLatLng:function(){}}))(i,n)}return console.error("shapeDef.shapeObject.shape is missing for creating the circle"),null}getShapeObjectFromDrawingLayer(t){return{shape:{coordinates:t.getLatLngs()[0]},type:z.POLYGON}}getAreaSize(t){const e=t.shape;return j.GeometryUtil.geodesicArea(e.coordinates)||0}isLayerOfThisShapeType(t){let e=!1;const n=R.get(t,"feature.geometry.type");if(n&&"polygon"===n.toLowerCase())e=!0;else{const n=R.get(t,"_rings[0][0]");n&&(e=Object.keys(n).indexOf("_code")>-1)}return e}}const Un='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" >\n<g id="circle" fill=\'#505050\' stroke="white" stroke-width="1px">\n  <g>\n    <circle class="circle-1" cx="15" cy="15" r="8"></circle>\n    <circle class="circle-2" cx="15" cy="15" r="8"></circle>\n    <circle class="circle-3" cx="15" cy="15" r="8"></circle>\n    <circle cx="15" cy="15" r="8"></circle>\n  </g>\n</g>\n<g id="v-sign" fill="#505050">\n  <g>\n    <path d="m19.198114,12.177358l-5.793397,6.350944l-2.602831,-2.910849l0.671698,-0.70566l1.931132,2.116981l5.121699,-5.557076l0.671698,0.70566z"></path>\n  </g>\n</g>\n</svg>',Wn='<svg width="20" height="27" xmlns="http://www.w3.org/2000/svg">\n<g>\n    <path stroke-width=\'1\' fill="#505050" id="svg_1" d="m10,12.904844a2.978867,2.975777 0 0 1 -2.978867,-2.975777a2.978867,2.975777 0 0 1 2.978867,-2.975777a2.978867,2.975777 0 0 1 2.978867,2.975777a2.978867,2.975777 0 0 1 -2.978867,2.975777m0,-11.307954a8.340826,8.332177 0 0 0 -8.340826,8.332177c0,6.249133 8.340826,15.474043 8.340826,15.474043c0,0 8.340826,-9.22491 8.340826,-15.474043a8.340826,8.332177 0 0 0 -8.340826,-8.332177z"/>\n</g>\n</svg>';class Gn extends Dn{getHeatLayerPoints(t){return t.shape.coordinate}getType(){return z.MARKER}shapeObjectToWkt(t){const e=t.shape;return`POINT(${e.coordinate.lng} ${e.coordinate.lat})`}shapeWktToObject(t){const e=t.replace(/[^0-9\.\ \-]/g,"").split(" ");if(2===e.length)return{shape:{coordinate:{lng:Number(e[0]),lat:Number(e[1])}},type:z.MARKER};throw"missing latitude or longitude"}isWktOfType(t){return t.indexOf("POINT(")>-1}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n=t.options||{},{lat:i,lng:r}=e.coordinate,o="intercept"===R.get(t,"data.type"),s=j.divIcon({html:o?Un:Wn,className:o?"intecept-svg":"marker-svg",iconSize:o?new j.Point(30,30):new j.Point(20,27)});return R.assign(n,{icon:s}),new j.Marker([i,r],n)}return console.error("shapeDef.shapeObject.shape is missing for creating the marker"),null}updateIsSelectedView(t){const e=jn.groupIdToShapeIdMap[t.groupId];R.forEach(e,t=>{const e=t.leafletRef;if(!e._icon)return;const n=R.get(t,"shapeDef.data");if(n.isSelected){const t=n.isSelectedFade?"#505050":"rgba(0, 166, 218, 1)";if("intercept"===n.type){const n=e._icon.querySelector("#circle");if(!n)return;const i=e._icon.querySelector("#v-sign");n.style.strokeWidth="2px",n.style.fill="#ffffcc",n.style.stroke=t,i.style.stroke=t}else{const n=e._icon.querySelector("path");if(!n)return;n.style.fill="#ffffcc",n.style.stroke=t}}else if("intercept"===n.type){const t=e._icon.querySelector("#circle");if(!t)return;const n=e._icon.querySelector("#v-sign");t.style.fill="#505050",t.style.stroke="white",t.style.strokeWidth="1px",n.style.stroke="#505050"}else{const t=e._icon.querySelector("path");if(!t)return;t.style.fill="#505050",t.style.stroke="initial"}})}getShapeObjectFromDrawingLayer(t){return{shape:{coordinate:t.getLatLng()},type:z.MARKER}}getCoordinateList(t){return[t.shape.coordinate]}getAreaSize(t){return Kr.doNothing(t),0}isLayerOfThisShapeType(t){let e=!1;const n=R.get(t,"feature.geometry.type");if(n&&"point"===n.toLowerCase())e=!0;else{const n=R.get(t,"_icon.className");n&&(e=-1===n.indexOf("textLabelClass"))}return e}}class Vn extends Dn{getType(){return z.LABEL}isWktOfType(t){return t.indexOf("LABEL(")>-1}shapeObjectToWkt(t){const e=t.shape;return"LABEL("+e.coordinate.lng+" "+e.coordinate.lat+","+e.text+")"}shapeWktToObject(t){const e=t.split(",");if(2===e.length){const t=e[0].replace(/[^0-9\.\ \-]/g,"");let n=e[1];if(t&&n){const e=t.split(" ");if(2===e.length)return{shape:{coordinate:{lng:Number(e[0]),lat:Number(e[1])},text:n=n.replace(/[)]/g,"")},type:z.LABEL};throw"missing latitude or longitude"}throw"format are not valid"}throw"missing latitude/longitude or label text"}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n=t.options||{},{lat:i,lng:r}=e.coordinate,o=j.divIcon({className:"leaflet-marker-icon textLabelClass leaflet-zoom-animated leaflet-interactive",html:e.text});return n.icon=o,j.marker([i,r],n)}return console.error("shapeDef.shapeObject.shape is missing for creating the circle"),null}updateIsSelectedView(t){Kr.doNothing(t),console.error("TBD for label")}getShapeObjectFromDrawingLayer(t){return{shape:{coordinate:t.getLatLng(),text:t.value},type:z.LABEL}}getCoordinateList(t){return[t.shape.coordinate]}getAreaSize(t){return Kr.doNothing(t),0}isLayerOfThisShapeType(t){const e=R.get(t,"_icon.className");return!!e&&e.indexOf("textLabelClass")>-1}}class Fn extends Dn{getCoordinateList(t){return t.shape.coordinates}getType(){return z.POLYLINE}isWktOfType(t){return t.indexOf("LINESTRING(")>-1}shapeObjectToWkt(t){return`LINESTRING(${t.shape.coordinates.map(t=>`${t.lng} ${t.lat}`).join(",")})`}shapeWktToObject(t){const e=t.replace(/[^0-9\.\,\ \-]/g,"").split(","),n=[];for(const t of e){const e=t.split(" "),i={lng:Number(e[0]),lat:Number(e[1])};n.push(i)}return{shape:{coordinates:n},type:z.POLYLINE}}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n=t.options,{coordinates:i}=e;return new(j.Polyline.extend({_originalInitialize:j.Polyline.prototype.initialize,initialize:function(t,e){this._originalInitialize(t,e),this._latlng=this.getBounds().getCenter()},getLatLng:function(){return this._latlng},setLatLng:function(){}}))(i,n)}return console.error("shapeDef.shapeObject.shape is missing for creating the polyline"),null}getShapeObjectFromDrawingLayer(t){return{shape:{coordinates:t.getLatLngs()},type:z.POLYLINE}}getAreaSize(t){const e=t.shape;return j.GeometryUtil.geodesicArea(e.coordinates)||0}isLayerOfThisShapeType(t){let e=!1;const n=R.get(t,"feature.geometry.type");if(n&&"linestring"===n.toLowerCase())e=!0;else{const n=R.get(t,"_rings[0][0]");n&&(e=-1===Object.keys(n).indexOf("_code"))}return e}}class Hn extends Dn{getType(){return z.MULTIPOLYGON}shapeObjectToWkt(t){const e=t.shape;return e.polygons&&e.polygons.length>0?`MULTIPOLYGON(${e.polygons.map(t=>"(("+t.shape.coordinates.map(t=>`${t.lng} ${t.lat}`).join(",")+"))").join(",")})`:""}shapeWktToObject(t){const e={polygons:(t=t.replace(/, /g,",")).split("),(").map(t=>t.replace(/[^0-9\.\,\ \-]/g,"")).map(t=>({coordinates:t.split(",").map(t=>({lng:Number(t.split(" ")[0]),lat:Number(t.split(" ")[1])}))}))};return{type:z.MULTIPOLYGON,shape:e}}isWktOfType(t){return t.indexOf("MULTIPOLYGON")>-1}createShape(t,e){if(Kr.doNothing(e),t.shapeObject){const e=t.shapeObject.shape,n={type:"Feature",geometry:{type:"MultiPolygon",coordinates:[this._toGeoJsonMultipolygon(e)]},properties:{}},i=new j.GeoJSON(n);return i.shapeDef=R.merge(t,{data:{isSelected:R.get(t,"data.isSelected",!1),count:R.get(t,"data.count",1)}}),i}return console.error("shapeDef.shapeObject.shape is missing for creating the Polygons"),null}getShapeObjectFromDrawingLayer(t){return{shape:{coordinates:t.getLatLngs()[0]},type:z.MULTIPOLYGON}}getAreaSize(t){return Kr.doNothing(t),console.log("TBD getAreaSize() for multipolygon"),0}isLayerOfThisShapeType(t){return!!t.getLayers()}_toGeoJsonMultipolygon(t){return t.polygons.map(t=>t.coordinates.map(t=>[t.lng,t.lat]))}}const qn="marker",Yn="circle",$n="polygon",Kn="polyline",Jn="rectangle";class Xn{static initialize(){this.managersByType={},Xn.managersByType[z.CIRCLE]=new Zn,Xn.managersByType[z.MARKER]=new Gn,Xn.managersByType[z.POLYGON]=new Nn,Xn.managersByType[z.POLYLINE]=new Fn,Xn.managersByType[z.LABEL]=new Vn,Xn.managersByType[z.MULTIPOLYGON]=new Hn}static getManagerByShapeId(t){let e=Xn.getTypeById(t);return Xn.getManagerByType(e)}static getTypeById(t){return console.log(t),null}static getManagerByType(t){return Xn.managersByType[t]}static getManagerByWkt(t){for(const e of Object.keys(this.managersByType)){const n=this.managersByType[e];if(n.isWktOfType(t))return n}return console.error(`ShapeManagerRepository: Unable to detect WKT ${t}`),null}static getManagerByShapeDefinition(t){const e=R.get(t,"shapeObject.type");return null!==e&&void 0!==e?Xn.getManagerByType(e):t.shapeWkt?Xn.getManagerByWkt(t.shapeWkt):(console.error("ShapeManagerRepository: Either shapeObject or shapeWkt must not be empty"),null)}static getTypeNumberByDrawableTypeName(t){switch(t.toLowerCase()){case qn:return z.MARKER;case Yn:return z.CIRCLE;case $n:case Jn:return z.POLYGON;case Kn:return z.POLYLINE;default:throw"shapeType unrecognize: "+t}}}Xn.initialize();var Qn=[],ti=[],ei="undefined"!=typeof Uint8Array?Uint8Array:Array,ni=!1;function ii(){ni=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Qn[e]=t[e],ti[t.charCodeAt(e)]=e;ti["-".charCodeAt(0)]=62,ti["_".charCodeAt(0)]=63}function ri(t,e,n){for(var i,r,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Qn[(r=i)>>18&63]+Qn[r>>12&63]+Qn[r>>6&63]+Qn[63&r]);return o.join("")}function oi(t){var e;ni||ii();for(var n=t.length,i=n%3,r="",o=[],s=0,a=n-i;s<a;s+=16383)o.push(ri(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],r+=Qn[e>>2],r+=Qn[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=Qn[e>>10],r+=Qn[e>>4&63],r+=Qn[e<<2&63],r+="="),o.push(r),o.join("")}function si(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?r-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=h}return(p?-1:1)*s*Math.pow(2,o-i)}function ai(t,e,n,i,r,o){var s,a,u,h=8*o-r-1,l=(1<<h)-1,c=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,r),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*_}var ui={}.toString,hi=Array.isArray||function(t){return"[object Array]"==ui.call(t)};function li(){return fi.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ci(t,e){if(li()<e)throw new RangeError("Invalid typed array length");return fi.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=fi.prototype:(null===t&&(t=new fi(e)),t.length=e),t}function fi(t,e,n){if(!(fi.TYPED_ARRAY_SUPPORT||this instanceof fi))return new fi(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _i(this,t)}return pi(this,t,e,n)}function pi(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),fi.TYPED_ARRAY_SUPPORT?(t=e).__proto__=fi.prototype:t=gi(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!fi.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|yi(e,n),r=(t=ci(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(vi(e)){var n=0|mi(e.length);return 0===(t=ci(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?ci(t,0):gi(t,e);if("Buffer"===e.type&&hi(e.data))return gi(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function di(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _i(t,e){if(di(e),t=ci(t,e<0?0:0|mi(e)),!fi.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function gi(t,e){var n=e.length<0?0:0|mi(e.length);t=ci(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function mi(t){if(t>=li())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+li().toString(16)+" bytes");return 0|t}function vi(t){return!(null==t||!t._isBuffer)}function yi(t,e){if(vi(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Vi(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Fi(t).length;default:if(i)return Vi(t).length;e=(""+e).toLowerCase(),i=!0}}function bi(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function wi(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=fi.from(e,i)),vi(e))return 0===e.length?-1:Li(t,e,n,i,r);if("number"==typeof e)return e&=255,fi.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Li(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function Li(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function xi(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function Pi(t,e,n,i){return Hi(Vi(e,t.length-n),t,n,i)}function Ti(t,e,n,i){return Hi(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function Ci(t,e,n,i){return Ti(t,e,n,i)}function Oi(t,e,n,i){return Hi(Fi(e),t,n,i)}function Si(t,e,n,i){return Hi(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function Mi(t,e,n){return 0===e&&n===t.length?oi(t):oi(t.slice(e,n))}function Ei(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,h=t[r],l=null,c=h>239?4:h>223?3:h>191?2:1;if(r+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=c}return function(t){var e=t.length;if(e<=Ai)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=Ai));return n}(i)}fi.TYPED_ARRAY_SUPPORT=void 0===D.TYPED_ARRAY_SUPPORT||D.TYPED_ARRAY_SUPPORT,fi.poolSize=8192,fi._augment=function(t){return t.__proto__=fi.prototype,t},fi.from=function(t,e,n){return pi(null,t,e,n)},fi.TYPED_ARRAY_SUPPORT&&(fi.prototype.__proto__=Uint8Array.prototype,fi.__proto__=Uint8Array),fi.alloc=function(t,e,n){return function(t,e,n,i){return di(e),e<=0?ci(null,e):void 0!==n?"string"==typeof i?ci(null,e).fill(n,i):ci(null,e).fill(n):ci(null,e)}(0,t,e,n)},fi.allocUnsafe=function(t){return _i(null,t)},fi.allocUnsafeSlow=function(t){return _i(null,t)},fi.isBuffer=qi,fi.compare=function(t,e){if(!vi(t)||!vi(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},fi.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},fi.concat=function(t,e){if(!hi(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return fi.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=fi.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!vi(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},fi.byteLength=yi,fi.prototype._isBuffer=!0,fi.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)bi(this,e,e+1);return this},fi.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)bi(this,e,e+3),bi(this,e+1,e+2);return this},fi.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)bi(this,e,e+7),bi(this,e+1,e+6),bi(this,e+2,e+5),bi(this,e+3,e+4);return this},fi.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Ei(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return zi(this,e,n);case"utf8":case"utf-8":return Ei(this,e,n);case"ascii":return ki(this,e,n);case"latin1":case"binary":return Ii(this,e,n);case"base64":return Mi(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bi(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},fi.prototype.equals=function(t){if(!vi(t))throw new TypeError("Argument must be a Buffer");return this===t||0===fi.compare(this,t)},fi.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},fi.prototype.compare=function(t,e,n,i,r){if(!vi(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,a=Math.min(o,s),u=this.slice(i,r),h=t.slice(e,n),l=0;l<a;++l)if(u[l]!==h[l]){o=u[l],s=h[l];break}return o<s?-1:s<o?1:0},fi.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},fi.prototype.indexOf=function(t,e,n){return wi(this,t,e,n,!0)},fi.prototype.lastIndexOf=function(t,e,n){return wi(this,t,e,n,!1)},fi.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return xi(this,t,e,n);case"utf8":case"utf-8":return Pi(this,t,e,n);case"ascii":return Ti(this,t,e,n);case"latin1":case"binary":return Ci(this,t,e,n);case"base64":return Oi(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Si(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},fi.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ai=4096;function ki(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function Ii(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function zi(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",s=e;s<n;++s)o+=(i=t[s])<16?"0"+i.toString(16):i.toString(16);return o}function Bi(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function Ri(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function ji(t,e,n,i,r,o){if(!vi(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function Di(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function Zi(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function Ni(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ui(t,e,n,i,r){return r||Ni(t,0,n,4),ai(t,e,n,i,23,4),n+4}function Wi(t,e,n,i,r){return r||Ni(t,0,n,8),ai(t,e,n,i,52,8),n+8}fi.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),fi.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=fi.prototype;else{var r=e-t;n=new fi(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},fi.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Ri(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},fi.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Ri(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},fi.prototype.readUInt8=function(t,e){return e||Ri(t,1,this.length),this[t]},fi.prototype.readUInt16LE=function(t,e){return e||Ri(t,2,this.length),this[t]|this[t+1]<<8},fi.prototype.readUInt16BE=function(t,e){return e||Ri(t,2,this.length),this[t]<<8|this[t+1]},fi.prototype.readUInt32LE=function(t,e){return e||Ri(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},fi.prototype.readUInt32BE=function(t,e){return e||Ri(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},fi.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Ri(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},fi.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Ri(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},fi.prototype.readInt8=function(t,e){return e||Ri(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},fi.prototype.readInt16LE=function(t,e){e||Ri(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},fi.prototype.readInt16BE=function(t,e){e||Ri(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},fi.prototype.readInt32LE=function(t,e){return e||Ri(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},fi.prototype.readInt32BE=function(t,e){return e||Ri(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},fi.prototype.readFloatLE=function(t,e){return e||Ri(t,4,this.length),si(this,t,!0,23,4)},fi.prototype.readFloatBE=function(t,e){return e||Ri(t,4,this.length),si(this,t,!1,23,4)},fi.prototype.readDoubleLE=function(t,e){return e||Ri(t,8,this.length),si(this,t,!0,52,8)},fi.prototype.readDoubleBE=function(t,e){return e||Ri(t,8,this.length),si(this,t,!1,52,8)},fi.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||ji(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},fi.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||ji(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},fi.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,1,255,0),fi.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},fi.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,2,65535,0),fi.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Di(this,t,e,!0),e+2},fi.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,2,65535,0),fi.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Di(this,t,e,!1),e+2},fi.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,4,4294967295,0),fi.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Zi(this,t,e,!0),e+4},fi.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,4,4294967295,0),fi.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Zi(this,t,e,!1),e+4},fi.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);ji(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},fi.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);ji(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},fi.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,1,127,-128),fi.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},fi.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,2,32767,-32768),fi.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Di(this,t,e,!0),e+2},fi.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,2,32767,-32768),fi.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Di(this,t,e,!1),e+2},fi.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,4,2147483647,-2147483648),fi.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Zi(this,t,e,!0),e+4},fi.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||ji(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),fi.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Zi(this,t,e,!1),e+4},fi.prototype.writeFloatLE=function(t,e,n){return Ui(this,t,e,!0,n)},fi.prototype.writeFloatBE=function(t,e,n){return Ui(this,t,e,!1,n)},fi.prototype.writeDoubleLE=function(t,e,n){return Wi(this,t,e,!0,n)},fi.prototype.writeDoubleBE=function(t,e,n){return Wi(this,t,e,!1,n)},fi.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!fi.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},fi.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!fi.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=vi(t)?t:Vi(new fi(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var Gi=/[^+\/0-9A-Za-z-_]/g;function Vi(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Fi(t){return function(t){var e,n,i,r,o,s;ni||ii();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new ei(3*a/4-o),i=o>0?a-4:a;var u=0;for(e=0,n=0;e<i;e+=4,n+=3)r=ti[t.charCodeAt(e)]<<18|ti[t.charCodeAt(e+1)]<<12|ti[t.charCodeAt(e+2)]<<6|ti[t.charCodeAt(e+3)],s[u++]=r>>16&255,s[u++]=r>>8&255,s[u++]=255&r;return 2===o?(r=ti[t.charCodeAt(e)]<<2|ti[t.charCodeAt(e+1)]>>4,s[u++]=255&r):1===o&&(r=ti[t.charCodeAt(e)]<<10|ti[t.charCodeAt(e+1)]<<4|ti[t.charCodeAt(e+2)]>>2,s[u++]=r>>8&255,s[u++]=255&r),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Gi,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Hi(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function qi(t){return null!=t&&(!!t._isBuffer||Yi(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Yi(t.slice(0,0))}(t))}function Yi(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var $i={},Ki=Object.freeze({default:$i}),Ji=Ki&&$i||Ki,Xi=I(function(t){!function(e){var n,i,r,o,s;e?function(){var t=e.crypto||e.msCrypto;if(!n&&t&&t.getRandomValues)try{var r=new Uint8Array(16);o=n=function(){return t.getRandomValues(r),r},n()}catch(t){}if(!n){var s=new Array(16);i=n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),s[e]=t>>>((3&e)<<3)&255;return s},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}():function(){try{var t=Ji.randomBytes;r=n=t&&function(){return t(16)},n()}catch(t){}}();for(var a=fi,u=[],h={},l=0;l<256;l++)u[l]=(l+256).toString(16).substr(1),h[u[l]]=l;function c(t,e){var n=e||0,i=u;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}var f=n(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],d=16383&(f[6]<<8|f[7]),_=0,g=0;function m(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"===t?new a(16):null,t=null);var o=(t=t||{}).random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;s++)e[r+s]=o[s];return e||c(o)}var v=m;v.v1=function(t,e,n){var i=e&&n||0,r=e||[],o=null!=(t=t||{}).clockseq?t.clockseq:d,s=null!=t.msecs?t.msecs:(new Date).getTime(),a=null!=t.nsecs?t.nsecs:g+1,u=s-_+(a-g)/1e4;if(u<0&&null==t.clockseq&&(o=o+1&16383),(u<0||s>_)&&null==t.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_=s,g=a,d=o;var h=(1e4*(268435455&(s+=122192928e5))+a)%4294967296;r[i++]=h>>>24&255,r[i++]=h>>>16&255,r[i++]=h>>>8&255,r[i++]=255&h;var l=s/4294967296*1e4&268435455;r[i++]=l>>>8&255,r[i++]=255&l,r[i++]=l>>>24&15|16,r[i++]=l>>>16&255,r[i++]=o>>>8|128,r[i++]=255&o;for(var f=t.node||p,m=0;m<6;m++)r[i+m]=f[m];return e||c(r)},v.v4=m,v.parse=function(t,e,n){var i=e&&n||0,r=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){r<16&&(e[i+r++]=h[t])});r<16;)e[i+r++]=0;return e},v.unparse=c,v.BufferClass=a,v._rng=n,v._mathRNG=i,v._nodeRNG=r,v._whatwgRNG=o,t.exports?t.exports=v:(s=e.uuid,v.noConflict=function(){return e.uuid=s,v},e.uuid=v)}("undefined"!=typeof window?window:null)});function Qi(){}function tr(){tr.init.call(this)}function er(t){return void 0===t._maxListeners?tr.defaultMaxListeners:t._maxListeners}function nr(t,e,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=new Qi,t._eventsCount=0),s){if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(r=er(t))&&r>0&&s.length>r){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[e]=n,++t._eventsCount;return t}function ir(t,e,n){var i=!1;function r(){t.removeListener(e,r),i||(i=!0,n.apply(t,arguments))}return r.listener=n,r}function rr(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function or(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Qi.prototype=Object.create(null),tr.EventEmitter=tr,tr.usingDomains=!1,tr.prototype.domain=void 0,tr.prototype._events=void 0,tr.prototype._maxListeners=void 0,tr.defaultMaxListeners=10,tr.init=function(){this.domain=null,tr.usingDomains&&(!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Qi,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},tr.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},tr.prototype.getMaxListeners=function(){return er(this)},tr.prototype.emit=function(t){var e,n,i,r,o,s,a,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(e=arguments[1],!a){if(e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=s[t]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var i=t.length,r=or(t,i),o=0;o<i;++o)r[o].call(n)}(n,l,this);break;case 2:!function(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,o=or(t,r),s=0;s<r;++s)o[s].call(n,i)}(n,l,this,arguments[1]);break;case 3:!function(t,e,n,i,r){if(e)t.call(n,i,r);else for(var o=t.length,s=or(t,o),a=0;a<o;++a)s[a].call(n,i,r)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,i,r,o){if(e)t.call(n,i,r,o);else for(var s=t.length,a=or(t,s),u=0;u<s;++u)a[u].call(n,i,r,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];!function(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,o=or(t,r),s=0;s<r;++s)o[s].apply(n,i)}(n,l,this,r)}return!0},tr.prototype.addListener=function(t,e){return nr(this,t,e,!1)},tr.prototype.on=tr.prototype.addListener,tr.prototype.prependListener=function(t,e){return nr(this,t,e,!0)},tr.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,ir(this,t,e)),this},tr.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,ir(this,t,e)),this},tr.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Qi:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Qi,this;delete i[t]}else!function(t,e){for(var n=r,i=n+1,o=t.length;i<o;n+=1,i+=1)t[n]=t[i];t.pop()}(n);i.removeListener&&this.emit("removeListener",t,s||e)}return this},tr.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Qi,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Qi:delete n[t]),this;if(0===arguments.length){for(var i,r=Object.keys(n),o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Qi,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},tr.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},tr.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):rr.call(t,e)},tr.prototype.listenerCount=rr,tr.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var sr=Object.freeze({default:tr,EventEmitter:tr}),ar="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},ur=/%[sdj%]/g;function hr(t){if(!Tr(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(dr(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,r=i.length,o=String(t).replace(ur,function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<r;s=i[++n])Lr(s)||!Mr(s)?o+=" "+s:o+=" "+dr(s);return o}function lr(t,e){if(Or(D.process))return function(){return lr(t,e).apply(this,arguments)};if(!0===ut.noDeprecation)return t;var n=!1;return function(){if(!n){if(ut.throwDeprecation)throw new Error(e);ut.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var cr,fr={};function pr(t){return Or(cr)&&(cr=ut.env.NODE_DEBUG||""),t=t.toUpperCase(),fr[t]||(new RegExp("\\b"+t+"\\b","i").test(cr)?fr[t]=function(){var e=hr.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:fr[t]=function(){}),fr[t]}function dr(t,e){var n={seen:[],stylize:gr};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),wr(e)?n.showHidden=e:e&&Zr(n,e),Or(n.showHidden)&&(n.showHidden=!1),Or(n.depth)&&(n.depth=2),Or(n.colors)&&(n.colors=!1),Or(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=_r),mr(n,t,n.depth)}function _r(t,e){var n=dr.styles[e];return n?"["+dr.colors[n][0]+"m"+t+"["+dr.colors[n][1]+"m":t}function gr(t,e){return t}function mr(t,e,n){if(t.customInspect&&e&&kr(e.inspect)&&e.inspect!==dr&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return Tr(i)||(i=mr(t,i,n)),i}var r=function(t,e){if(Or(e))return t.stylize("undefined","undefined");if(Tr(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return Pr(e)?t.stylize(""+e,"number"):wr(e)?t.stylize(""+e,"boolean"):Lr(e)?t.stylize("null","null"):void 0}(t,e);if(r)return r;var o,s=Object.keys(e),a=(o={},s.forEach(function(t,e){o[t]=!0}),o);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),Ar(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return vr(e);if(0===s.length){if(kr(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(Sr(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Er(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ar(e))return vr(e)}var h,l="",c=!1,f=["{","}"];return br(e)&&(c=!0,f=["[","]"]),kr(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),Sr(e)&&(l=" "+RegExp.prototype.toString.call(e)),Er(e)&&(l=" "+Date.prototype.toUTCString.call(e)),Ar(e)&&(l=" "+vr(e)),0!==s.length||c&&0!=e.length?n<0?Sr(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),h=c?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)Nr(e,String(s))?o.push(yr(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(yr(t,e,n,i,r,!0))}),o}(t,e,n,a,s):s.map(function(i){return yr(t,e,n,a,i,c)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(h,l,f)):f[0]+l+f[1]}function vr(t){return"["+Error.prototype.toString.call(t)+"]"}function yr(t,e,n,i,r,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),Nr(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(u.value)<0?(a=Lr(n)?mr(t,u.value,null):mr(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),Or(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function br(t){return Array.isArray(t)}function wr(t){return"boolean"==typeof t}function Lr(t){return null===t}function xr(t){return null==t}function Pr(t){return"number"==typeof t}function Tr(t){return"string"==typeof t}function Cr(t){return"symbol"==typeof t}function Or(t){return void 0===t}function Sr(t){return Mr(t)&&"[object RegExp]"===Br(t)}function Mr(t){return"object"==typeof t&&null!==t}function Er(t){return Mr(t)&&"[object Date]"===Br(t)}function Ar(t){return Mr(t)&&("[object Error]"===Br(t)||t instanceof Error)}function kr(t){return"function"==typeof t}function Ir(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function zr(t){return qi(t)}function Br(t){return Object.prototype.toString.call(t)}function Rr(t){return t<10?"0"+t.toString(10):t.toString(10)}dr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},dr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var jr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Dr(){var t,e;console.log("%s - %s",(e=[Rr((t=new Date).getHours()),Rr(t.getMinutes()),Rr(t.getSeconds())].join(":"),[t.getDate(),jr[t.getMonth()],e].join(" ")),hr.apply(null,arguments))}function Zr(t,e){if(!e||!Mr(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function Nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ur={inherits:ar,_extend:Zr,log:Dr,isBuffer:zr,isPrimitive:Ir,isFunction:kr,isError:Ar,isDate:Er,isObject:Mr,isRegExp:Sr,isUndefined:Or,isSymbol:Cr,isString:Tr,isNumber:Pr,isNullOrUndefined:xr,isNull:Lr,isBoolean:wr,isArray:br,inspect:dr,deprecate:lr,format:hr,debuglog:pr},Wr=Object.freeze({format:hr,deprecate:lr,debuglog:pr,inspect:dr,isArray:br,isBoolean:wr,isNull:Lr,isNullOrUndefined:xr,isNumber:Pr,isString:Tr,isSymbol:Cr,isUndefined:Or,isRegExp:Sr,isObject:Mr,isDate:Er,isError:Ar,isFunction:kr,isPrimitive:Ir,isBuffer:zr,log:Dr,inherits:ar,_extend:Zr,default:Ur});function Gr(t,e,n){var i=t;e.slice(0,-1).forEach(function(t){void 0===i[t]&&(i[t]={}),i=i[t]});var r=e[e.length-1];void 0===i[r]||"boolean"==typeof i[r]?i[r]=n:Array.isArray(i[r])?i[r].push(n):i[r]=[i[r],n]}function Vr(t){return"number"==typeof t||!!/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}var Fr=sr&&tr||sr,Hr=Wr&&Ur||Wr,qr=I(function(t){var e=Fr.EventEmitter,n=function(t,e){e||(e={});var n={bools:{},strings:{}};[].concat(e.boolean).filter(Boolean).forEach(function(t){n.bools[t]=!0}),[].concat(e.string).filter(Boolean).forEach(function(t){n.strings[t]=!0});var i={};Object.keys(e.alias||{}).forEach(function(t){i[t]=[].concat(e.alias[t]),i[t].forEach(function(e){i[e]=[t].concat(i[t].filter(function(t){return e!==t}))})});var r=e.default||{},o={_:[]};Object.keys(n.bools).forEach(function(t){a(t,void 0!==r[t]&&r[t])});var s=[];function a(t,e){var r=!n.strings[t]&&Vr(e)?Number(e):e;Gr(o,t.split("."),r),(i[t]||[]).forEach(function(t){Gr(o,t.split("."),r)})}-1!==t.indexOf("--")&&(s=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var u=0;u<t.length;u++){var h=t[u];if(/^--.+=/.test(h)){var l=h.match(/^--([^=]+)=([\s\S]*)$/);a(l[1],l[2])}else if(/^--no-.+/.test(h))a(c=h.match(/^--no-(.+)/)[1],!1);else if(/^--.+/.test(h)){var c=h.match(/^--(.+)/)[1];void 0===(_=t[u+1])||/^-/.test(_)||n.bools[c]||i[c]&&n.bools[i[c]]?/^(true|false)$/.test(_)?(a(c,"true"===_),u++):a(c,!n.strings[c]||""):(a(c,_),u++)}else if(/^-[^-]+/.test(h)){for(var f=h.slice(1,-1).split(""),p=!1,d=0;d<f.length;d++){var _;if("-"!==(_=h.slice(d+2))){if(/[A-Za-z]/.test(f[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(_)){a(f[d],_),p=!0;break}if(f[d+1]&&f[d+1].match(/\W/)){a(f[d],h.slice(d+2)),p=!0;break}a(f[d],!n.strings[f[d]]||"")}else a(f[d],_)}c=h.slice(-1)[0],p||"-"===c||(!t[u+1]||/^(-|--)[^-]/.test(t[u+1])||n.bools[c]||i[c]&&n.bools[i[c]]?t[u+1]&&/true|false/.test(t[u+1])?(a(c,"true"===t[u+1]),u++):a(c,!n.strings[c]||""):(a(c,t[u+1]),u++))}else o._.push(n.strings._||!Vr(h)?h:Number(h))}return Object.keys(r).forEach(function(t){var e,n,s;e=o,n=t.split("."),s=e,n.slice(0,-1).forEach(function(t){s=s[t]||{}}),n[n.length-1]in s||(Gr(o,t.split("."),r[t]),(i[t]||[]).forEach(function(e){Gr(o,e.split("."),r[t])}))}),s.forEach(function(t){o._.push(t)}),o}(ut.argv.slice(2));t.exports=r;var i=Math.pow(2,53);function r(t){e.call(this),this.prefixGenerator=t||Xi,this.max=i,this.separator=".",this.reset()}if(Hr.inherits(r,e),r.prototype.reset=function(){this.count=0,this.prefix=this.prefixGenerator(),this.emit("reset",this)},r.prototype.newId=function(){return this.count++===this.max&&this.reset(),this.prefix+this.separator+this.count},k.main===t)for(var o=new r,s=n.count||1;s>0;s--)console.log(o.newId())});const Yr=new qr(()=>"shapeId");class $r{static createHeatAndClusterLayer(t){const e={layerDefinition:t,leafletHeatLayer:null,leafletClusterLayer:null,isDisplay:R.get(t,"isDisplay",!0)};return R.get(t,"shapes.length")?(e.leafletHeatLayer=$r.createHeatLayer(t),e.leafletClusterLayer=$r.createClusterLayer(t,e.isDisplay),e):e}static createHeatLayer(t){let e=null;const n=[];for(const e of t.shapes){const t=Xn.getManagerByShapeDefinition(e);if(t){e.shapeObject&&!e.shapeWkt&&(e.shapeWkt=t.shapeObjectToWkt(e.shapeObject,e.options)),!e.shapeObject&&e.shapeWkt&&(e.shapeObject=t.shapeWktToObject(e.shapeWkt));const i=t.getHeatLayerPoints(e.shapeObject);i&&n.push(i)}}var i;return n.length&&(i=n,e=new j.HeatLayer(i,{minOpacity:T})),e}static createClusterLayer(t,e){let n=null;const i=R.get(jn,"state.mapConfig.clusterOptions",{}),{singleMarkerMode:r,chunkedLoading:o,chunkProgress:s}=i,a={singleMarkerMode:r||$r.defaultClusterOptions.singleMarkerMode,chunkedLoading:o||$r.defaultClusterOptions.chunkedLoading,iconCreateFunction:$r.defaultClusterOptions.iconCreateFunction};s&&R.assign(a,{chunkProgress:$r.defaultClusterOptions.chunkProgress}),n=new j.MarkerClusterGroup(a);const u=t.shapes;for(const t of u){t.options=t.options||{},t.data=t.data||{},t.data.isSelected=R.get(t,"data.isSelected",!1),t.data.isSelectedFade=R.get(t,"data.isSelectedFade",!1),t.data.groupId=R.get(t,"data.groupId","default_group"),t.data.id=R.get(t,"data.id",Yr.newId());const i=Xn.getManagerByShapeDefinition(t);if(i){console.log(e);const r=i.createShape(t),o={leafletRef:r,shapeDef:t};jn.addShape(o),n.addLayer(r),Kr.setEventsOnLeafletLayer(r,{click:Kr.shapeOnClickHandler.bind(this,i),mouseover:t=>{this.shapeHoverTooltipHandler(t)}}),Kr.createBubble(r,t.data,E.TOOLTIP)}}return n.on("animationend",t=>{console.log("animationend"),Kr.clustersReselection();const e=t.target._featureGroup.getLayers();R.forEach(e,t=>{if(t.id&&t.groupId){const e=jn.groupIdToShapeIdMap[t.groupId][t.id],n=R.get(e,"shapeDef.shapeObject.type");Xn.getManagerByType(n).updateIsSelectedView(t)}})}),n.on("clusterclick",t=>{if(!t.originalEvent.ctrlKey||jn.state.mapConfig.isSelectionDisable)return;const e=t.layer.options.icon._icon.classList.contains("selected-cluster");let n=[];t.layer.getAllChildMarkers().forEach(t=>{const i=jn.groupIdToShapeIdMap[t.groupId][t.id],r=R.get(i,"shapeDef.shapeObject.type"),o=Xn.getManagerByType(r);e||n.includes(t.groupId)||(o.toggleSelectShape(t),Kr.updateBubble(t),n.push(t.groupId))})}),n}static iconCreateFunction(t){let e=0,n=!1;t.getAllChildMarkers().forEach(t=>{if(t.id&&t.groupId){!n&&jn.selectedObjects[t.id]&&(n=!0);const i=jn.groupIdToShapeIdMap[t.groupId][t.id],r=R.get(i,"shapeDef.data.count");e+=r||1}});const i=n?"selected-cluster":"";return j.divIcon({html:`<div><span>${(t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))(e)}</span></div>`,className:`marker-cluster ${i}`,iconSize:new j.Point(32,32)})}static shapeHoverTooltipHandler(t){t.originalEvent.ctrlKey||t.originalEvent.shiftKey?t.target.getTooltip()._container&&(t.target.getTooltip()._container.style.display="none"):t.target.getTooltip()._container&&t.target.getTooltip()._container.style.removeProperty("display")}}$r.defaultClusterOptions={singleMarkerMode:!1,chunkedLoading:!0,iconCreateFunction:$r.iconCreateFunction};class Kr{static log_componentWillLoad(t){console.log(`componentWillLoad ${t}`)}static log_componentDidLoad(t){console.log(`componentDidLoad ${t}`)}static log_componentDidUnload(t){console.log(`componentDidUnload ${t}`)}static doNothing(t){}static stopDoubleClickOnPlugin(t){t.addEventListener("dblclick",t=>{t.stopPropagation()})}static fitLayerControllerPosition(t=""){const e=document.querySelector(".custom-toolbar-button.layer-controller"),n=document.querySelector(".custom-layer-controller");if(!e||!n)return;n.style.left=e.offsetLeft+"px";const i=document.querySelector(".custom-layer-controller");i.className=n.className+" "+t;const r=document.querySelector(".leaflet-control-layers-expanded");r.parentNode.removeChild(r),i.appendChild(r)}static exportBlobFactory(t,e,n,i){return this.doNothing([t,e,n,i]),null}static toggleCustomDropDownMenu(t){const e=t.style.display;Kr.closeAllCustomDropDownMenus(),t.style.display="block"===e?"none":"block","block"===t.style.display&&(document.querySelector(".custom-toolbar-button.layer-controller").classList.remove("clicked"),document.querySelector(".custom-layer-controller").classList.remove("show"))}static closeAllCustomDropDownMenus(){const t=document.querySelectorAll(".menu");R.forEach(t,t=>{t.style.display="none"})}static setRadioButtonsByCheckedValue(t,e,n){const i=t.getControl().getContainer().querySelectorAll(`.menu li.menu-item.custom-group [name="${e}"]`);R.forEach(i,t=>{t.getAttribute("checked")&&t.removeAttribute("checked")}),R.forEach(i,t=>{t.getAttribute("value")===n&&t.setAttribute("checked","true")})}static initStoreWithMapTiles(t){const e={};if(t&&t.length)t.forEach(t=>{const n=Object.assign({},t,{noWrap:!0});e[t.name]=new j.TileLayer(t.tilesURI,n)});else{const t={minZoom:S,maxZoom:M,attributionControl:!1,noWrap:!0};e[C.name]=new j.TileLayer(C.address,t)}return e}static initiateLayers(t){const e=[];return t.forEach(t=>{const n=$r.createHeatAndClusterLayer(t);e.push(n)}),e}static setEventsOnLeafletLayer(t,e){t&&e&&(Object.keys(e)||[]).forEach(n=>{e[n]&&t.on(n,e[n])})}static shapeOnClickHandler(t,e){jn.state.mapConfig.isSelectionDisable||(t.toggleHighlight(e.target),e.originalEvent.ctrlKey&&(t.toggleSelectShape(e.target),t.updateIsSelectedView(e.target),Kr.updateBubble(e.target)))}static updateBubble(t){const e=jn.groupIdToShapeIdMap[t.groupId][t.id].shapeDef.data,n=Kr.generatePopupMarkupFromData(e);function i(t,e){t.getPopup()&&t.setPopupContent(e),t.getTooltip()&&t.setTooltipContent(e)}t._layers?Object.values(t._layers).forEach(t=>{i(t,n)}):i(t,n)}static removeHighlightPOIs(){const t=document.querySelectorAll(".highlighted");R.forEach(t,t=>{t.classList.remove("highlighted")})}static highlightPOIsByGroupId(t){if(!t)return;const e=jn.groupIdToShapeIdMap[t];e&&R.forEach(e,e=>{const n=Xn.getManagerByType(R.get(e,"shapeDef.shapeObject.type")),i=n&&n.getType()===z.MARKER,r=R.get(e,"leafletRef._icon")&&"intercept"===R.get(e,"shapeDef.data.type"),o=t===R.get(e,"shapeDef.data.groupId"),s=R.get(e,"leafletRef.__parent._group");if(s){const t=s.getVisibleParent(e.leafletRef);R.get(t,"_icon")&&t._icon.classList.add("highlighted")}o&&i&&r&&R.get(e,"leafletRef._icon")?e.leafletRef._icon.classList.add("highlighted"):i&&r&&R.get(e,"leafletRef._icon")&&e.leafletRef._icon.classList.remove("highlighted")})}static getVisibleLayers(t,e){const n=[];return t.initialLayers.forEach(t=>{e.hasLayer(t.leafletClusterLayer)&&n.push(...t.leafletClusterLayer.getLayers())}),t.importedLayers&&w.forEach(i=>{t.importedLayers[i].forEach(t=>{e.hasLayer(t.leafletClusterLayer)&&n.push(...t.leafletClusterLayer.getLayers())})}),t.drawableLayers.forEach(t=>{e.hasLayer(t)&&n.push(...t.getLayers())}),n}static getSelectedObjects(){let t=[];return R.forEach(jn.selectedObjects,e=>{const n=this.getShapeStoreByShapeId(e.shapeId,e.groupId);t.push(n)}),t}static getShapeStoreByShapeId(t,e){let n=[];e?n.push(jn.groupIdToShapeIdMap[e]):R.forEach(jn.groupIdToShapeIdMap,t=>{n.push(t)});let i=null;return R.forEach(n,e=>{R.forEach(e,e=>{e.leafletRef.id===t&&(i=e)})}),i}static clustersReselection(){const t=jn.gisMap.getContainer().querySelectorAll(".selected-cluster")||[];R.forEach(t,t=>t.classList.remove("selected-cluster")),Kr.selectClustersBySelectedLeafletObjects(jn.selectedObjects)}static updateViewForSelectedObjects(){Kr.getSelectedObjects().forEach(t=>{const e=Xn.getManagerByType(R.get(t,"shapeDef.shapeObject.type"));e&&jn.gisMap.getBounds().contains(t.leafletRef.getLatLng())&&e.updateIsSelectedView(t.leafletRef)})}static selectClustersBySelectedLeafletObjects(t){R.forEach(t,t=>{const e=jn.groupIdToShapeIdMap[t.groupId][t.shapeId],n=R.get(e,"leafletRef.__parent._group");if(n){const t=n&&n.getVisibleParent(e.leafletRef);R.has(t,"_icon")&&e.shapeDef.data.isSelected&&t._icon.classList.add("selected-cluster")}})}static createBubble(t,e,n){const i=Kr.generatePopupMarkupFromData(e);function r(t,e){t["bind"+n](e)}t._layers?Object.values(t._layers).forEach(t=>{r(t,i)}):r(t,i)}static generatePopupMarkupFromData(t){const e=R.omit(t,["id","groupId","isSelectedFade","type","count"]);let n="";return R.forIn(e,(t,e)=>{n+=`<div class="tooltip-row">\n\t\t\t\t<label class="tooltip-row-key">${e}</label><label class="tooltip-row-value">${t}</label>\n\t\t\t</div>`}),n}}Kr.appendHtmlWithContext=function(t,e,n){t.innerHTML=e;const i=t.querySelectorAll("[attachEvent]");R.forEach(i,t=>{t.getAttribute("attachEvent").split(";").forEach(function(e){const i=e.split(":"),r=i[0],o=i[1];r&&o&&t.addEventListener(r,n[o].bind(n))})})};export default Kr;export{f as CUSTOM_DROP_DOWN_PLUGIN_TAG,j as default$1,R as default$2,B as DropDownItemType,jn as default$3,P as LayersTypeLabel,x as CoordinateType,p as CUSTOM_SETTINGS_TAG,jt as reaction,b as FILE_TYPES,d as CUSTOM_EXPORT_TAG,c as DROP_DOWN_PLUGIN_TAG,n as GIS_VIEWER_TAG,a as FULL_SCREEN_PLUGIN_TAG,i as MAP_CONTAINER_TAG,s as ZOOM_TO_EXTENT_PLUGIN_TAG,v as MAX_NORTH_EAST,y as MAX_SOUTH_WEST,Xn as ShapeManagerRepository,r as TOOL_BAR_TAG,o as DRAW_BAR_PLUGIN_TAG,h as SEARCH_PLUGIN_TAG,u as MEASURE_PLUGIN_TAG,l as LAYER_MANAGER_PLUGIN_TAG,qr as default$4,e as ImportFileFormats,O as LayerNames,j as __moduleExports,A as commonjsGlobal,k as commonjsRequire,I as createCommonjsModule,_ as MINI_MAP_PLUGIN_TAG,m as MOUSE_COORDINATE_PLUGIN_TAG,g as SCALE_PLUGIN_TAG};